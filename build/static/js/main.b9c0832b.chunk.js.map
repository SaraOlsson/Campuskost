{"version":3,"sources":["assets sync /^/.*/.jpg$","assets/temp_food1.jpg","assets/userchef.png","assets/temp_food2.jpg","assets/temp_food3.jpg","assets/temp_food4.jpg","assets/temp_food5.jpg","ducks/reducers.js","components/snackbar.js","components/topmenubar.js","components/recipeitem.js","components/recipegridlist.js","pages/feedpage.js","components/listcontainer.js","pages/listpage.js","pages/login.js","components/loadspinner.js","pages/noticepage.js","components/followerlist.js","components/userpagetabs.js","pages/profilepage.js","components/pickuserdialog.js","components/ReactShare.js","reducers/useFirebaseFetch.js","pages/recipepage.js","pages/searchpage.js","components/AlertDialog.js","pages/settings.js","components/descriptionlist.js","components/fileinput.js","components/ingredientslist.js","pages/uploadpage.js","serviceWorker.js","App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","rootReducer","combineReducers","firebase","firebaseReducer","firestore","firestoreReducer","fireReducer","state","db","undefined","storage","auth_user","firestore_user","action","type","testReducers","num","url","step","uploadReducer","editmode","recipe_id","title","ingredients","descriptions","image","userReducer","signedIn","dragReducer","isDragging","draggableId","enableDrag","MySnackbar","props","useState","open","setOpen","useEffect","handleClose","event","reason","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","message","Fragment","Button","color","size","onClick","style","marginRight","IconButton","aria-label","fontSize","ProfileBtn","classes","useStyles","history","useHistory","store","useSelector","btn","variant","push","className","buttonPad","img_src","profile_img_url","icon_content","src","smallprofileimage","alt","jsx_content","username","edge","menuButton","makeStyles","theme","grow","flexGrow","display","breakpoints","up","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","spacing","marginLeft","width","searchIcon","height","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","padding","transition","transitions","create","sectionDesktop","sectionMobile","whiteColor","TopMenuBar","React","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","Boolean","isMobileMenuOpen","handleMobileMenuClose","handleMenuClose","renderMenu","Menu","keepMounted","transformOrigin","MenuItem","renderMobileMenu","Badge","badgeContent","currentTarget","aria-controls","aria-haspopup","AppBar","Toolbar","goBack","Typography","noWrap","Link","component","to","textDecoration","InputBase","placeholder","root","input","inputProps","onBlur","console","log","onFocus","location","pathname","handleChange","listimage","maxHeight","maxWidth","minWidth","minHeight","objectFit","listtile_small","listtile","pointer","cursor","RecipeItem","openDialog","setopenDialog","callback","ms","startLongPress","setStartLongPress","timerId","setTimeout","clearTimeout","useLongPress","result","recipe","r_img","img","img_url","require","tile_jsx","handeRecipeClick","clicked_recipe","smalltiles","GridListTile","key","GridListTileBar","subtitle","user","handleaction","flexWrap","overflow","icon","spinner","marginTop","RecipeGridList","images","setImages","images_temp","recipes","idx","GridList","length","Spinner","ScrollableRecipes","concat","Grid","container","justify","scrolldiv","item","xs","scrolltitle","scrollimage","scrolltext","NewsContainer","recipe_index","Math","floor","random","feedback_form_link","href","target","newscontainer","imageContainer","flexDirection","marginBottom","grid_background","paddingTop","foodImg","margin","imagesidebar","triedby","background","textAlign","alignSelf","FeedPage","setRecipes","scrollview","useFirestore","recpiesRef","collection","recipeFetcher","onSnapshot","querySnapshot","recipe_docs","forEach","doc","data","name","fadeIn","listcontainer","list_header","ListContainer","list_doc","listdoc","recipeDocs","temp_recipes","recipe_fetcher","header","recipe_id_list","get","then","exists","catch","error","spinner_jsx","recipeContent","update","noheader","listname","user_in_header","mine","createdby","split","DraggableRecipe","window","oncontextmenu","preventDefault","stopPropagation","getListStyle","isDraggingOver","listDroppable","draggingClass","displayNone","ListPage","listState","setlistState","setLikes","lists_by_user","setLists_by_user","updateState","useCallback","useDispatch","current_email","email","getListDocsForUser","loadedDocs","getLikesDocsForUser","like_docs","liked_recipes_ids","liked_recipes","Promise","reject","replaced_email","replace","listsRef","where","list_docs","snapshot","created_by","i","droppableId","direction","provided","ref","innerRef","index","SignUpContainer","setEmail","password","setPassword","value","isValid","setUsername","feedback","setFeedback","dispatch","useFirebase","usenameIsAvailableCheck","username_totry","is_available","login_div","autoComplete","onChange","evt","username_textfield","current_username","auth","createUserWithEmailAndPassword","usersRef","docSnapshot","userObj","university","fullname","bio","set","onLogin","create_db_user_doc","errorCode","disabled","LoginContainer","loginProblem","setLoginProblem","signText","currentUser","btn_color","signOut","signInWithEmailAndPassword","errorMessage","alert","sendPasswordResetEmail","SignupBanner","onAction","info_font","LogInBanner","fontStyle","LoginPage","setState","loginRoute","LoadSpinner","B","fontWeight","children","NoticeListItem","noticeText","userClick","recipeClick","recipe_id_to_title","substring","indexOf","user_avatar","eventimg","Avatar","ListItem","ListItemAvatar","ListItemText","primary","secondary","time","body","NoticePage","eventList","setEventList","events_promise","doc_data","temp_data","spinnerjsx","eventListjsx","other_username","event_image_url","List","dense","FollowerListItem","followerlist","followColor","notfollowColor","FollowerList","followData","setFollowData","handleUserClick","followerData","followersjsx","showFollowIcon","TabPanel","other","role","hidden","aria-labelledby","Box","p","a11yProps","paper","SimpleTabs","setValue","Tabs","newValue","Tab","label","userinfo","ProfilePage","username_url","useParams","setUser","ifUser","setIfUser","followInfo","setFollowInfo","followingInfo","setFollowingInfo","following","following_this_user","setFollowing_this_user","url_user","recipeFetcher_new","followFetcher","doc_email","found","email_promise","loadedDoc","followBtn","url_username","followUser","firebase_event_id","delete","date","Date","event_follow_object","timestamp","seen","current_user_email","follow_docs","followBuilder","followers","follows","startIcon","userchef","avatar","blue","SimpleDialog","selectedValue","myFriends","setMyFriends","follow_data","email_jsx","friend","button","event_tips_object","recipeId","handleListItemClick","Dialog","DialogTitle","PickUserDialog","setSelectedValue","ReactShare","shareUrl","FacebookShareButton","quote","FacebookIcon","round","dataFetchReducer","isLoading","isError","hasErrored","payload","newData","rec","replacerecord","useFirebaseFetch","firebaseRef","initialData","db_Ref","useReducer","didCancel","a","err","fetchData","updateDataRecord","record","IngredientsList","quantity","measure","ingredientsjsx","ingred","Divider","ingredientslist","RecipeDecsList","description","order","text","sort","desc1","desc2","descjsx","desc","RecipeDecsListItem","len","checked","setChecked","checkIcon","triedbyText","triedbyNum","recipeheader","RecipePage","setRecipe","likes","doc_id","saved","setSaved","recipetitle","init_recipe_ref","user_doc","likeFetcher","isliked","user_ref","extended_data","disableTouchRipple","textTransform","SearchPage","users","setUsers","userFetcher","collection_name","temp_users","AlertDialog","chosedYes","onAlertClose","aria-describedby","DialogContent","DialogContentText","DialogActions","NoOptionText","autoFocus","yesOptionText","buttons","rainbow","backgroundImage","center_btn","available_text","profileimage","fullrow","flex","Settings","setUsername_textfield","fullname_textfield","setFullname_textfield","bio_textfield","setBio_textfield","imageUrl","setImageUrl","has_changed","setHas_changed","labelWidth","setLabelWidth","in_editmode","setIn_editmode","isAvailable","setIsAvailable","labelRef","useRef","openSetting","setOpenSetting","openAlert","setOpenAlert","imageUrlList","setImageUrlList","cancel_edit","save_username","list_ids","loadedIds","_id","current","offsetWidth","storageRef","child","available_images","listAll","res","items","itemRef","getDownloadURL","randomName","temp_username","preNames","postNames","rand1","rand2","newName","onExpand","expanded","ExpansionPanel","ExpansionPanelSummary","expandIcon","heading","ExpansionPanelDetails","FormControl","InputLabel","htmlFor","OutlinedInput","new_value","TextareaAutosize","img_index","temp_url","continue_search","randomImg","chosedDelete","buttontext","loadedimage","formlabel","imagediv","uploaddiv","greenicon","redicon","newListItem","titlediv","DescriptionList","editObject","setEditObject","setOrder","setText","setDescriptions","upload_store","ingredientsDisp","existing_descriptions","saveEdited","temp_list","slice","ind","obj_copy","toUpperCase","handleAdd","descriptionjsx","object","new_obj","addDescription","TextField","InputLabelProps","shrink","onKeyPress","ev","enterPress","splice","noop","FileInput","rest","f","join","boxSizing","fontFamily","lineHeight","letterSpacing","boxShadow","files","setQuantity","setMeasure","setName","temp_ingredients","initiate_ingredients","setIngredients","addIngredient","required","toLowerCase","UploadPage","setTitle","setFiles","setImage","setId","upload_wait","setUpload_wait","done","setDone","valid","setValid","imageDisp","handleDescriptionsAdd","handleIngredientsAdd","bottom_content","uploadImage","uploadTask","putString","on","downloadURL","upload_done_text","upload_button_text","upload_disabled","recipe_name","document","ref_to_user","returnValue_downloadURL","test","update_data","page_title","FormLabel","reader","FileReader","onload","readAsDataURL","isLocalhost","hostname","match","hasUpdates","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","reload","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","deferredPrompt","BottomMenuBar","BottomNavigation","val","handleMenuClick","bottomMenu","BottomNavigationAction","addEventListener","prompt","userChoice","choiceResult","outcome","mainContainer","paddingBottom","footer","left","bottom","headerrow","top","zIndex","profileBtn","App","openUpdateDialog","setOpenUpdateDialog","state_user","onAuthStateChanged","user_email","path","Login","firebaseConfig","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","createStore","rrfProps","userProfile","useFirestoreForProfile","createFirestoreInstance","rootElement","getElementById","ReactDOM","render","URL","origin","fetch","response","contentType","headers","status","ready","unregister","checkValidServiceWorker"],"mappings":"6HAAA,IAAIA,EAAM,CACT,mBAAoB,IACpB,mBAAoB,IACpB,mBAAoB,IACpB,mBAAoB,IACpB,mBAAoB,KAIrB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,oBC1BpBU,EAAOC,QAAU,IAA0B,wC,kBCA3CD,EAAOC,QAAU,kwO,sGCAjBD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,wC,8JCG9BC,EAAcC,YAAgB,CACvCC,SAAUC,kBACVC,UAAWC,mBACXC,YA+EF,WAA8H,IAAzGC,EAAwG,uDAAhG,CAAEC,QAAIC,EAAWC,aAASD,EAAWE,eAAWF,EAAWG,oBAAgBH,GAAaI,EAAQ,uCAC3H,OAAQA,EAAOC,MACb,IAAK,QACH,OAAO,eACFP,EADL,CAEEC,GAAIK,EAAOL,KAEf,IAAK,aACH,OAAO,eACFD,EADL,CAEEG,QAASG,EAAOH,UAEpB,IAAK,UACH,OAAO,eACFH,EADL,CAEEI,UAAWE,EAAOF,YAEtB,IAAK,cACH,OAAO,eACFJ,EADL,CAEEK,eAAgBC,EAAOD,iBAE3B,QACE,OAAOL,IArGXQ,aAMJ,WAA8D,IAAzCR,EAAwC,uDAAhC,CAAES,IAAK,EAAGC,IAAK,OAASJ,EAAQ,uCACzD,OAAQA,EAAOC,MACb,IAAK,YACH,OAAO,eACFP,EADL,CAEES,IAAKT,EAAMS,IAAMH,EAAOK,OAE5B,IAAK,YACH,OAAO,eACFX,EADL,CAEES,IAAKT,EAAMS,IAAMH,EAAOK,OAE5B,QACE,OAAOX,EACT,IAAK,SACH,OAAO,eACFA,EADL,CAEEU,IAAKV,EAAMU,QAtBjBE,cA2BF,WAAwK,IAAjJZ,EAAgJ,uDAAxI,CAAEa,UAAU,EAAOC,eAAWZ,EAAWa,WAAOb,EAAWc,iBAAad,EAAWe,kBAAcf,EAAWgB,WAAOhB,GAAaI,EAAQ,uCACrK,OAAQA,EAAOC,MACX,IAAK,WACH,OAAO,eACFP,EADL,CAEEe,MAAOT,EAAOS,QAElB,IAAK,iBACH,OAAO,eACFf,EADL,CAEEgB,YAAaV,EAAOU,cAExB,IAAK,kBACH,OAAO,eACFhB,EADL,CAEEiB,aAAcX,EAAOW,eAEzB,IAAK,WACH,OAAO,eACFjB,EADL,CAEEkB,MAAOZ,EAAOY,QAElB,IAAK,cACH,OAAO,eACFlB,EADL,CAEEa,SAAUP,EAAOO,SACjBC,UAAWR,EAAOQ,YAExB,QACE,OAAOd,IAvDXmB,YA2DF,WAA2D,IAAtCnB,EAAqC,uDAA7B,CAAEoB,UAAU,GAASd,EAAQ,uCACxD,OAAQA,EAAOC,MACb,IAAK,SACH,OAAO,eACFP,EADL,CAEEoB,UAAU,IAEd,IAAK,UACH,OAAO,eACFpB,EADL,CAEEoB,UAAU,IAEd,QACE,OAAOpB,IAvEXqB,YAsGF,WAAwG,IAAnFrB,EAAkF,uDAA1E,CAAEsB,YAAY,EAAOC,iBAAarB,EAAWsB,YAAY,GAASlB,EAAQ,uCACrG,OAAQA,EAAOC,MACb,IAAK,gBACH,OAAO,eACFP,EADL,CAEEsB,WAAYhB,EAAOgB,aAEvB,IAAK,iBACH,OAAO,eACFtB,EADL,CAEEuB,YAAajB,EAAOiB,cAExB,IAAK,gBACH,OAAO,eACFvB,EADL,CAEEwB,WAAYlB,EAAOkB,aAEvB,QACE,OAAOxB,M,mLC5HA,SAASyB,EAAWC,GAAQ,IAAD,EAEhBC,mBAASD,EAAME,MAFC,mBAEjCA,EAFiC,KAE3BC,EAF2B,KAIxCC,qBAAU,WACRD,EAAQH,EAAME,QACb,CAACF,EAAME,OAEV,IAIMG,EAAc,SAACC,EAAOC,GACX,cAAXA,IAKJJ,GAAQ,GACRH,EAAMK,gBASR,OACE,6BACE,kBAACG,EAAA,EAAD,CACEC,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdT,KAAMA,EACNU,iBAAkB,IAClBC,QAASR,EACTS,QAASd,EAAMc,QACflC,OACE,kBAAC,IAAMmC,SAAP,KACE,kBAACC,EAAA,EAAD,CAAQC,MAAM,YAAYC,KAAK,QAAQC,QAnB5B,WAEnBhB,GAAQ,GACRH,EAAMK,YAAY,WAgBoDe,MAAO,CAACC,YAAa,SAChFrB,EAAMpB,QAET,kBAAC0C,EAAA,EAAD,CAAYJ,KAAK,QAAQK,aAAW,QAAQN,MAAM,UAAUE,QAASd,GACnE,kBAAC,IAAD,CAAWmB,SAAS,e,mKCmHlC,SAASC,EAAYzB,GAEnB,IAAM0B,EAAUC,KACVC,EAAUC,cACVC,EAAQC,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eAErC2D,EACF,6BACE,kBAAChB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMS,EAAQM,KAAK,WAC5BC,UAAWT,EAAQU,WAJrB,aAWAC,EAAWP,EAAMnD,gBAAkBmD,EAAMnD,eAAe2D,gBAAoBR,EAAMnD,eAAe2D,qBAAkB9D,EAQnH+D,OAA4B/D,IAAZ6D,EAAyB,yBAAKG,IAAKH,EAASF,UAAWT,EAAQe,kBAAmBC,IAAK,gBAAoB,kBAAC,IAAD,MAE3HC,EAAc3C,EAAMN,SAAW6C,EAAeP,EAElD,OAAsB,IAAnBhC,EAAMN,UAAqBoC,EAAMnD,eAGhC,kBAAC,IAAMoC,SAAP,KACA,uBAAGK,MAAO,CAACC,YAAa,GAAIJ,MAAO,0BAAnC,IAA+Da,EAAMnD,eAAeiE,SAApF,KACA,kBAACtB,EAAA,EAAD,CACEuB,KAAK,QACLV,UAAWT,EAAQoB,WACnB7B,MAAM,UACNM,aAAW,eACXJ,QAAS,kBAAMS,EAAQM,KAAK,YAAcJ,EAAMnD,eAAeiE,YAEhED,EAPD,MAWKX,EAKX,IAAML,GAAYoB,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,SAAU,GAGZJ,WAAY,CACVzB,YAAa,GAEfhC,MAAM,aACJ8D,QAAS,QACRH,EAAMI,YAAYC,GAAG,MAAQ,CAC5BF,QAAS,UAGbG,OAAO,aACLC,SAAU,WACVC,aAAcR,EAAMS,MAAMD,aAC1BE,gBAAiBC,YAAKX,EAAMY,QAAQC,OAAOC,MAAO,KAClD,UAAW,CACTJ,gBAAiBC,YAAKX,EAAMY,QAAQC,OAAOC,MAAO,MAEpDzC,YAAa2B,EAAMe,QAAQ,GAC3BC,WAAY,EACZC,MAAO,QACNjB,EAAMI,YAAYC,GAAG,MAAQ,CAC5BW,WAAYhB,EAAMe,QAAQ,GAC1BE,MAAO,SAGXC,WAAY,CACVD,MAAOjB,EAAMe,QAAQ,GACrBI,OAAQ,OACRZ,SAAU,WACVa,cAAe,OACfjB,QAAS,OACTkB,WAAY,SACZC,eAAgB,UAElBC,UAAW,CACTtD,MAAO,WAETuD,WAAW,aACTC,QAASzB,EAAMe,QAAQ,EAAG,EAAG,EAAG,GAChCW,WAAY1B,EAAM2B,YAAYC,OAAO,SACrCX,MAAO,QACNjB,EAAMI,YAAYC,GAAG,MAAQ,CAC5BY,MAAO,MAGXY,eAAe,aACb1B,QAAS,QACRH,EAAMI,YAAYC,GAAG,MAAQ,CAC5BF,QAAS,SAGb2B,cAAc,aACZ3B,QAAS,QACRH,EAAMI,YAAYC,GAAG,MAAQ,CAC5BF,QAAS,SAGb4B,WAAY,CACV9D,MAAO,SAETmB,UAAW,CACTqC,QAAS,MACTjD,SAAU,SAEZiB,kBAAmB,CACjBwB,MAAO,YAIIe,GA/Qf,SAAoBhF,GAClB,IAAM0B,EAAUC,KADS,EAEOsD,IAAMhF,SAAS,MAFtB,mBAElBiF,EAFkB,KAERC,EAFQ,OAG2BF,IAAMhF,SAAS,MAH1C,mBAGlBmF,EAHkB,KAGEC,EAHF,KAKnBzD,EAAUC,cAEVyD,EAAaC,QAAQL,GACrBM,EAAmBD,QAAQH,GAO3BK,EAAwB,WAC5BJ,EAAsB,OAGlBK,EAAkB,WACtBP,EAAY,MACZM,KAaIE,EACJ,kBAACC,EAAA,EAAD,CACEV,SAAUA,EACVzE,aAAc,CAAEC,SAAU,MAAOC,WAAY,SAC7CxD,GALW,8BAMX0I,aAAW,EACXC,gBAAiB,CAAEpF,SAAU,MAAOC,WAAY,SAChDT,KAAMoF,EACNzE,QAAS6E,GAET,kBAACK,EAAA,EAAD,CAAU5E,QAASuE,GAAnB,WACA,kBAACK,EAAA,EAAD,CAAU5E,QAASuE,GAAnB,eAKEM,EACJ,kBAACJ,EAAA,EAAD,CACEV,SAAUE,EACV3E,aAAc,CAAEC,SAAU,MAAOC,WAAY,SAC7CxD,GALiB,qCAMjB0I,aAAW,EACXC,gBAAiB,CAAEpF,SAAU,MAAOC,WAAY,SAChDT,KAAMsF,EACN3E,QAAS4E,GAET,kBAACM,EAAA,EAAD,KACE,kBAACzE,EAAA,EAAD,CAAYC,aAAW,mBAAmBN,MAAM,WAC9C,kBAACgF,EAAA,EAAD,CAAOC,aAAc,EAAGjF,MAAM,aAC5B,kBAAC,IAAD,QAGJ,wCAEF,kBAAC8E,EAAA,EAAD,KACE,kBAACzE,EAAA,EAAD,CAAYC,aAAW,4BAA4BN,MAAM,WACvD,kBAACgF,EAAA,EAAD,CAAOC,aAAc,GAAIjF,MAAM,aAC7B,kBAAC,IAAD,QAGJ,6CAEF,kBAAC8E,EAAA,EAAD,CAAU5E,QAjEgB,SAAAb,GAC5B6E,EAAY7E,EAAM6F,iBAiEd,kBAAC7E,EAAA,EAAD,CACEC,aAAW,0BACX6E,gBAAc,8BACdC,gBAAc,OACdpF,MAAM,WAEN,kBAAC,IAAD,OAEF,wCAKN,OACE,yBAAKkB,UAAWT,EAAQuB,MACtB,kBAACqD,EAAA,EAAD,CAAQ/C,SAAS,UACf,kBAACgD,EAAA,EAAD,KAEE,yBAAKpE,UAAWT,EAAQoD,eACtB,kBAACxD,EAAA,EAAD,CACEuB,KAAK,QACLV,UAAWT,EAAQoB,WACnB7B,MAAM,UACNM,aAAW,cACXJ,QAAU,kBAAMS,EAAQ4E,WAExB,kBAAC,IAAD,QAIJ,kBAACC,EAAA,EAAD,CAAYtE,UAAWT,EAAQrC,MAAO4C,QAAQ,KAAKyE,QAAM,GAEvD,kBAACC,EAAA,EAAD,CAAQC,UAAWD,IAAME,GAAG,QAAQzF,MAAO,CAAE0F,eAAgB,OAAQ7F,MAAO,UAA5E,eAIF,yBAAKkB,UAAWT,EAAQ4B,QACtB,yBAAKnB,UAAWT,EAAQwC,YACtB,kBAAC,IAAD,OAEF,kBAAC6C,EAAA,EAAD,CACEC,YAAY,eACZtF,QAAS,CACPuF,KAAMvF,EAAQ6C,UACd2C,MAAOxF,EAAQ8C,YAEjB2C,WAAY,CAAE,aAAc,UAC5BC,OAAQ,kBAAMC,QAAQC,IAAI,WAC1BC,QAAS,WAhGc,YAA9B3F,EAAQ4F,SAASC,UAClB7F,EAAQM,KAAK,eAkGT,yBAAKC,UAAWT,EAAQuB,OACxB,yBAAKd,UAAWT,EAAQmD,gBACxB,kBAACpD,EAAD,CAAY/B,SAAUM,EAAMN,SAAUgI,aAAc1H,EAAM0H,gBAG1D,yBAAKvF,UAAWT,EAAQoD,eACxB,kBAACrD,EAAD,CAAY/B,SAAUM,EAAMN,SAAUgI,aAAc1H,EAAM0H,kBAK7D1B,EACAL,I,wCChDP,IAAMhE,GAAYoB,YAAW,CAC3B4E,UAAW,CACTC,UAAW,QACXC,SAAU,QACVC,SAAU,QACVC,UAAW,QACXC,UAAW,SAEbC,eAAgB,CACdL,UAAW,QACXC,SAAU,QACVpD,QAAS,OAEXyD,SAAU,CACRN,UAAW,QACXC,SAAU,QACVpD,QAAS,OAEX0D,QAAS,CACRC,OAAQ,aAKIC,GAtGf,SAAoBrI,GAAQ,IAwBtBqC,EAxBqB,EAEWpC,oBAAS,GAFpB,mBAElBqI,EAFkB,KAENC,EAFM,KAiBnB3G,GA5CR,WAAsD,IAAhC4G,EAA+B,uDAApB,aAAUC,EAAU,uDAAL,IAAK,EACPxI,oBAAS,GADF,mBAC5CyI,EAD4C,KAC5BC,EAD4B,KAGnDvI,qBAAU,WACR,IAAIwI,EAOJ,OANIF,EACFE,EAAUC,WAAWL,EAAUC,GAE/BK,aAAaF,GAGR,WACLE,aAAaF,MAEd,CAACF,IA4BuBK,EAXP,SAAAC,GAClBT,GAAc,KAUqC,KAErC1G,eACVH,EAAUC,KAEVsH,EAASjJ,EAAMiJ,OAGjBC,OAAyB1K,IAAfyK,EAAOE,IAAqBF,EAAOE,IAAM,aAIrD9G,OADuB7D,IAAnByK,EAAOG,QACDH,EAAOG,QAEPC,OAAQ,KAAcH,EAAQ,QAG1C,IAKI1J,EAOA8J,EAZEC,EAAmB,SAACC,GACxB5H,EAAQM,KAAK,WAAasH,EAAenK,MAAQ,IAAMmK,EAAerM,KAgCxE,OAvBEqC,EAAQ,iCAAM,qCAAKgD,IAAKH,EAASF,UAAWT,EAAQiG,UAAWjF,IAAKuG,EAAO5J,OAA7D,MAAyE,eAA/E,KAKRiK,OADuB9K,IAArBwB,EAAMyJ,aAAiD,IAArBzJ,EAAMyJ,WAE1C,kBAACC,GAAA,EAAD,CAAcC,IAAKT,EAAO/G,UAAWT,EAAQwG,SAAW,IAAMxG,EAAQyG,QAAUhH,QAAS,kBAAMoI,EAAiBN,KAC7GzJ,EACD,kBAACoK,GAAA,EAAD,CACEvK,MAAO4J,EAAO5J,MACdwK,SAAU,qCAAWZ,EAAOa,SAMhC,kBAAC,IAAM/I,SAAP,KACE,kBAAC2I,GAAA,EAAD,CAAcC,IAAKT,EAAO/G,UAAWT,EAAQuG,eAAgB9G,QAAS,kBAAMoI,EAAiBN,KAC1FzJ,IAOL,kBAAC,IAAMuB,SAAP,KACKuI,EAEH,kBAACvJ,EAAD,CAAYG,KAAMoI,EAAYjI,YA9Dd,SAACzB,GACnB2J,GAAc,GAEA,WAAX3J,GACDoB,EAAM+J,aAAa/J,EAAMiJ,OAAO9L,KA0DwB2D,QAASmI,EAAO5J,MAAOT,OAAQ,4BCpE7F,IAAM+C,GAAYoB,YAAW,CAC3BkE,KAAM,CACL9D,QAAS,OACT6G,SAAU,OACV1F,eAAgB,SAChB2F,SAAU,UAEXC,KAAM,CACJjJ,MAAO,6BAET0G,UAAW,CACTC,UAAW,QACXC,SAAU,QACVpD,QAAS,OAEX0F,QAAS,CACPhH,QAAS,OACTmB,eAAgB,SAChB8F,UAAW,OAIAC,GApDf,SAAwBrK,GAEtB,IAAM0B,EAAUC,KAFa,EAID1B,mBAAS,IAJR,mBAItBqK,EAJsB,KAIdC,EAJc,KAKzBd,IAAczJ,EAAMyJ,YAAczJ,EAAMyJ,WAe5C,OAbArJ,qBAAU,WAER,IAAIoK,EAAcxK,EAAMyK,QAAQzN,KAAI,SAACiM,EAAQyB,GAAT,OAClC,kBAAC,GAAD,CAAYzB,OAAQA,EAAQU,IAAKe,EAAKjB,WAAYA,EAAYtM,GAAIuN,EAAKX,aAAc/J,EAAM+J,kBAG7FQ,EAAUC,KAET,IAMD,yBAAKrI,UAAWT,EAAQuF,MACtB,kBAAC0D,GAAA,EAAD,KACCL,EAAOM,OAAS,GAAKN,KCrBxBO,GAAUxB,EAAQ,IA+DtB,SAASyB,GAAkB9K,GAEzB,IAAM0B,EAAUC,KAGZ8I,EAAUzK,EAAMyK,QAAQM,OAAO/K,EAAMyK,SAGzC,OAFAA,EAAUA,EAAQM,OAAON,GAGvB,kBAACO,GAAA,EAAD,CACEC,WAAS,EACTlH,QAAS,EACTmH,QAAQ,UAINT,EAAQzN,KAAI,SAACiM,EAAQyB,GAAT,OACZ,yBAAKvI,UAAWT,EAAQyJ,UAAWxB,IAAKe,GACxC,kBAACM,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACf,wBAAIlJ,UAAWT,EAAQ4J,aACnBrC,EAAO5J,MAAQ,MAAQ4J,EAAOa,OAGlC,kBAACkB,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,yBAAK7I,IAAK6G,EAAQ,KAAsClH,UAAWT,EAAQ6J,YAAa7I,IAAK,gBAE/F,kBAACsI,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACf,uBAAGlJ,UAAWT,EAAQ8J,YAClB,mBAYZ,SAASC,GAAczL,GAErB,IAAM0B,EAAUC,KACAE,cAIhB,QAAqBrD,IAAlBwB,EAAMyK,SAAyBzK,EAAMyK,QAAQG,OAAS,EACvD,OAAO,KAET,IAAIc,EAAeC,KAAKC,MAAMD,KAAKE,SAAW7L,EAAMyK,QAAQG,QAwBxDkB,QAtBkCtN,IAAlBwB,EAAMyK,cAAyDjM,IAAhCwB,EAAMyK,QAAQiB,IAAgC1L,EAAMyK,QAAQiB,GAAcrM,MAM9GW,EAAMyK,QAAQiB,GAAc5B,KAgBlB,uBAAGiC,KAAK,sCAAsCC,OAAO,SAAS5K,MAAO,CAACH,MAAO,YAA7E,WAEzB,OACE,6BACA,uCACA,kBAAC+J,GAAA,EAAD,CACEC,WAAS,EACTlH,QAAS,EACTmH,QAAQ,SACR7G,WAAW,SACXlC,UAAWT,EAAQuK,eAGnB,kBAACjB,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,yBAAKjK,MAAO,CAACqD,QAAS,SACtB,6EACA,8RACmHqH,EADnH,iEA4BR,IAAMnK,GAAYoB,YAAW,CAC3BmJ,eAAgB,CACd/I,QAAS,OACTgJ,cAAe,MACfnC,SAAU,OACVoC,aAAc,IAEhBC,gBAAiB,CACf3I,gBAAiB,UACjB4I,WAAY,QAEdC,QAAS,CACP7I,gBAAiB,OACjBS,OAAQ,IACRF,MAAO,IACPuI,OAAQ,EACRhJ,aAAc,IAEhByI,cAAe,CACbzI,aAAc,GACdE,gBAAiB,UACjB0I,aAAc,IAEhBzE,UAAW,CACTC,UAAW,OACXC,SAAU,OACVpD,QAAS,MACT+H,OAAQ,OACRhJ,aAAc,QAEhB2G,QAAS,CACPhH,QAAS,OACTmB,eAAgB,SAChB8F,UAAW,KAEbqC,aAAc,CACZhI,QAAS,GAEXiI,QAAS,CACPC,WAAY,UACZnJ,aAAc,MACdiB,QAAS,EACTmI,UAAW,UAEbrB,YAAa,CACX1D,SAAU,SAEZyD,YAAa,CACXuB,UAAW,cAEb1B,UAAW,CACTwB,WAAY,UACZlI,QAAS,OACT+H,OAAQ,OACRhJ,aAAc,QAEhBgI,WAAY,CACVvK,MAAO,WAII6L,GAhPf,WAAoB,MAGY7M,wBAASzB,GAHrB,mBAGXiM,EAHW,KAGFsC,EAHE,OAKkB9M,oBAAS,GAL3B,mBAKX+M,EALW,KAOZtL,GAPY,KAOFC,MAGVxD,GAFQ4D,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eAEvB4O,0BAElB7M,qBAAU,WAER,IAAI8M,EAAa/O,EAAUgP,WAAW,WACtCC,EAAcF,KAEb,IAEH,IAAME,EAAgB,SAACF,GACrB/O,EAAUgP,WAAW,WACpBE,YAAW,SAASC,GAEjB,IAAIC,EAAc,GAClBD,EAAcE,SAAS,SAAAC,GACrB,IAAIC,EAAOD,EAAIC,OACfA,EAAKvQ,GAAKsQ,EAAItQ,GACdoQ,EAAYrL,KAAKwL,MAGnBX,EAAWQ,OAOjB,OAAkB,IAAfP,EAIC,kCAEcxO,IAAZiM,GAAyB,kBAACK,GAAD,CAAmBL,QAASA,KAQzD,6BACE,kBAACgB,GAAD,CAAehB,QAASA,IACxB,qDACcjM,IAAZiM,GAAyB,yBAAKtI,UAAWT,EAAQ2K,iBAAiB,kBAAC,GAAD,CAAgB5B,QAASA,UAC/EjM,IAAZiM,GAAyB,yBAAKtI,UAAWT,EAAQyI,SAAU,kBAACU,GAAD,CAAS8C,KAAK,sBAAsB1M,MAAM,UAAU2M,OAAO,Y,UC3D1H/C,GAAUxB,EAAQ,IAuGtB,IAAM1H,GAAYoB,YAAW,CAC3B8K,cAAe,CACbrK,aAAc,GACdE,gBAAiB,UACjB0I,aAAc,GACdrE,UAAW,IAEboC,QAAS,CACPhH,QAAS,OACTmB,eAAgB,SAChB8F,UAAW,QAEb0D,YAAa,CACXnB,WAAY,UACZ1L,MAAO,QACPwD,QAAS,WACTjB,aAAc,SAIHuK,GAzHf,SAAuB/N,GAAQ,IAAD,EAEEiF,IAAMhF,SAAS,IAFjB,mBAErBwK,EAFqB,KAEZsC,EAFY,KAGtBrL,EAAUC,KAEVxD,GADQ4D,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eACvB4O,0BAEZe,EAAWhO,EAAMiO,QAEvB7N,qBAAU,WAGR,QAAuB5B,GAApBwB,EAAMkO,YAOT,QAAwB1P,GAApBwP,EAASvD,QAAsB,CAEjC,IAAI0D,EAAe,GAGnBxQ,OAAOD,KAAKsQ,EAASvD,SAAS+C,SAAQ,SAAS7D,IACd,IAA1BqE,EAASvD,QAAQd,IAClBwE,EAAajM,KAAKyH,MAGxByE,EAAeD,SAffpB,EAAW/M,EAAMyK,WAkBlB,IAEH,IAgDI4D,EA3BED,EAAiB,SAACE,GAEtB,IAAIH,EAAe,GAEnBG,EAAetR,KAAK,SAACoC,EAAWsL,GAExBvM,EAAUgP,WAAW,WAAWM,IAAIrO,GACtCmP,MAAMC,MAAK,SAASf,GACpB,GAAIA,EAAIgB,OAAQ,CAEZ,IAAIf,EAAOD,EAAIC,OACfA,EAAKvQ,GAAKsQ,EAAItQ,GACdgR,EAAajM,KAAKwL,GACdhD,GAAO4D,EAAe1D,OAAS,GACjCmC,EAAWoB,OAGlBO,OAAM,SAASC,GACdtH,QAAQC,IAAI,0BAA2BqH,UAM3CC,EAAc,yBAAKzM,UAAWT,EAAQyI,SAAU,kBAAC,GAAD,CAASwD,KAAK,sBAAsB1M,MAAM,UAAU2M,OAAO,UAC3GiB,EAAiBpE,EAAQG,OAAS,EAAK,kBAAC,GAAD,CAAgBb,aA9CtC,SAAC3K,GAELjB,EAAUgP,WAAW,gBAAgBM,IAAIO,EAAS7Q,IAExDoR,MAAMC,MAAK,SAASf,GAE3B,IAAIC,EAAOD,EAAIC,OACfA,EAAKvQ,GAAKsQ,EAAItQ,GACduQ,EAAKjD,QAAQrL,IAAa,EAC1BjB,EAAUgP,WAAW,gBAAgBM,IAAIA,EAAItQ,IAAI2R,OAAOpB,OAqC2BjD,QAASA,EAAShB,YAAY,IAAUmF,EAG/H,GAAsB,GAAlB5O,EAAM+O,SAAmB,CAC3B,IAAIC,EAAYhB,EAASgB,SAAYhB,EAASgB,SAAW,aACrDC,EAAkBjP,EAAMkP,KAAQ,GAAK,KAAOlP,EAAMmP,UAAUC,MAAM,KAAK,GAC3Ef,EAAS,uBAAGlM,UAAWT,EAAQoM,aAAtB,IAAqCkB,EAArC,IAA+C,2BAAIC,GAAnD,KAKX,OACE,yBAAK7N,MAAO,CAAC6C,MAAO,SACjBoK,EACD,yBAAKlM,UAAWT,EAAQmM,eACrBgB,KC/FLhE,GAAUxB,EAAQ,IAwCtB,SAASgG,GAAgBrP,GAEvB,IAAM0B,EAAUC,KACVsH,EAASjJ,EAAMiJ,OAGjBC,OAAyB1K,IAAfyK,EAAOE,IAAqBF,EAAOE,IAAM,aACnD9G,OAA+B7D,IAAnByK,EAAOG,QAAyBH,EAAOG,QAAUC,OAAQ,KAAcH,EAAQ,QAC3F1J,EAAQ,qCAAKgD,IAAKH,EAASF,UAAWT,EAAQiG,UAAWjF,IAAKuG,EAAO5J,OAA7D,MAAyE,eAGrF,OACE,kBAAC,IAAM0B,SAAP,KACCvB,GAKL8P,OAAOC,cAAgB,SAASjP,GAG3B,OAFAA,EAAMkP,iBACNlP,EAAMmP,mBACC,GAiUZ,IAAMC,GAAe,SAACC,GAAD,MAAqB,CACtChD,WAAYgD,EAAiB,YAAc,UAC3ClL,QAnXO,GAoXPR,MAAO,MAEPgG,SAAU,OACVzG,aAAc,GACdW,OAAQ,QACRiI,aAAc,OACdQ,UAAW,SACXpL,SAAU,OACVP,MAAO,UAGLU,GAAYoB,YAAW,CAC3B6M,cAAe,CACbzM,QAAS,OACT6G,SAAU,OACVwC,OAAQ,GAEV7E,UAAW,CACTxD,OAAQ,QACRF,MAAO,QACP+D,UAAW,QACXxE,aAAc,GACdgJ,OAAQ,OAEVqD,cAAe,CACb1L,OAAQ,OACRF,MAAO,OACP+D,UAAW,QACXxE,aAAc,IAEhB2G,QAAS,CACPlJ,MAAO,QACPI,YAAa,OACb2C,WAAY,OACZC,MAAO,eAET6L,YAAa,CACX3M,QAAS,UAME4M,GA5Wf,WAAqB,IAAD,EAEkB9K,IAAMhF,cAASzB,GAFjC,mBAETwR,EAFS,KAEEC,EAFF,OAGUhL,IAAMhF,cAASzB,GAHzB,mBAGF0R,GAHE,aAIcjL,IAAMhF,SAAS,IAJ7B,mBAIA8M,GAJA,aAK0B9H,IAAMhF,SAAS,IALzC,mBAKTkQ,EALS,KAKMC,EALN,OAMQnL,IAAMhF,WAArBoQ,EANO,oBAWVvO,GAJcwO,uBAAY,kBAAMD,EAAY,MAAK,IAIzCtO,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,gBACnCF,EAAY8O,yBACZvL,EAAUC,KAmBZ/B,GAlBYiC,cAGC0O,eAeA,GAGjBnQ,qBAAU,WAER,GAAK0B,EAAMnD,eAAX,CAIA,IAAI6R,EAAgB1O,EAAMnD,eAAe8R,MAGzCC,EAAmBF,GAAe,GAAMhC,MAAK,SAACmC,GAC5CP,EAAiBO,MAInBC,EAAoBJ,GAAehC,MAAK,SAACqC,GAGvC,GAAIA,EAAJ,CAGAX,EAASW,GAET,IAAIC,EAAoBD,EAAUE,cAClC,QAA0BvS,GAArBsS,EAAgC,CAEnC,IAAI3C,EAAe,GAEnBxQ,OAAOD,KAAKoT,GAAmBtD,SAAQ,SAAS7D,IACd,IAA3BmH,EAAkBnH,IACnBwE,EAAajM,KAAKyH,MAGxByE,EAAeD,WAKlB,CAACrM,EAAMnD,iBAEV,IAAIiS,EAAsB,SAASJ,GACjC,OAAO,IAAIQ,SAAQ,SAACpT,EAASqT,GAEZ9S,EAAUgP,WAAW,gBAAgBM,IAAI+C,GAE/CjC,MAAMC,MAAK,SAASf,GAC3B,IAAIC,EAAOD,EAAIC,OACf9P,EAAQ8P,UAOVgD,EAAqB,SAASF,EAAetB,GAC/C,OAAO,IAAI8B,SAAQ,SAACpT,EAASqT,GAE3B,IAAIC,EAAiBV,EAAcW,QAAQ,MAAO,KAC9CC,EAAWjT,EAAUgP,WAAW,gBAAgBkE,MAAM,kBAAoBH,EAAgB,MAAM,GAChGI,EAAY,IAEH,IAATpC,IACFkC,EAAWA,EAASC,MAAM,aAAc,KAAMb,IAGpCY,EAAS7C,MAClBC,MAAK,SAAA+C,GAEJA,EAAS/D,SAAQ,SAAAC,GAEf,IAAIC,EAAOD,EAAIC,SAEF,IAATwB,IAA2B,IAATA,GAAkBxB,EAAK8D,YAAchB,KACzD9C,EAAKvQ,GAAKsQ,EAAItQ,GACdmU,EAAUpP,KAAKwL,OAInB9P,EAAQ0T,UAMVlD,EAAiB,SAACE,GAEtB,IAAIH,EAAe,GAEnBG,EAAetR,KAAK,SAACoC,EAAWsL,GAExBvM,EAAUgP,WAAW,WAAWM,IAAIrO,GACtCmP,MAAMC,MAAK,SAASf,GACpB,GAAIA,EAAIgB,OAAQ,CAEZ,IAAIf,EAAOD,EAAIC,OACfA,EAAKvQ,GAAKsQ,EAAItQ,GACdgR,EAAajM,KAAKwL,GACdhD,GAAO4D,EAAe1D,OAAS,IACjCmC,EAAWoB,GACX8B,EAAa9B,QAGpBO,OAAM,SAASC,GACdtH,QAAQC,IAAI,0BAA2BqH,UAwEvBwB,EAAcnT,KAAI,SAACgR,EAAUyD,GAAX,OACxC,kBAAC,KAAD,CAAW9H,IAAK,QAAU8H,EAAGC,YAAa,QAAUD,EAAGE,UAAU,eAC5D,SAACC,EAAUL,GAEV,OACE,yBAAKM,IAAKD,EAASE,UACjB,yBACE1Q,MAAOsO,GAAa6B,EAAS5B,gBAC7BxN,UAAWvC,EAAa,KAAO8B,EAAQoO,aACrC,+BAAK9B,EAASgB,SAAd,KACA,kBAAC,GAAD,CAASrB,KAAK,oBAAoB1M,MAAM,QAAQkB,UAAWT,EAAQyI,YAGpEvK,GACH,6BACI,kBAAC,GAAD,CAAe+J,IAAK8H,EACjBxD,QAASD,EACTe,UAAU,EAAOG,MAAM,YAanB,6BACrB,iEAKF,OAF2Bc,GAAaA,EAAUpF,OAAS,GAAuB,sCAE1EoF,GAAaA,EAAUpF,OAAS,EACtC,yBAAKxJ,MAAO,CAACoL,OAAQ,KACnB,8CACA,6BACGwD,EAAUhT,KAAI,SAACoO,EAAM2G,GAAP,OACb,kBAAC1C,GAAD,CAAiBpG,OAAQmC,EAAMzB,IAAKoI,EAAO5P,UAAWT,EAAQiG,gBAGlE,2CACA,2DAEA,6BAAK,8CAAuB,gHClRpC,SAASqK,GAAgBhS,GAAQ,IAAD,EAEJC,mBAAS,IAFL,mBAEvBwQ,EAFuB,KAEhBwB,EAFgB,OAGEhS,mBAAS,IAHX,mBAGvBiS,EAHuB,KAGbC,EAHa,OAIElS,mBAAS,CAACmS,MAAO,GAAIC,SAAS,IAJhC,mBAIvBzP,EAJuB,KAIb0P,EAJa,OAQErS,mBAAS,CAACgB,MAAO,QAASH,QAAS,KARrC,mBAQvByR,EARuB,KAQbC,EARa,KAUxBC,EAAWlC,cACX7O,EAAUC,KAEVxD,GADQ4D,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eACvB4O,0BACZhP,EAAWyU,wBAkEjB,IA6BIC,EAA0B,SAASC,GACrC,OAAO,IAAI5B,SAAQ,SAACpT,EAASqT,GAG3B,IAAI4B,GAAe,EACP1U,EAAUgP,WAAW,SAASkE,MAAM,WAAY,KAAMuB,GAAgBrE,MAC/EC,MAAK,SAAA+C,GACJA,EAAS/D,SAAQ,SAAAC,GACfoF,GAAe,KAEjBjV,EAAQiV,UAKhB,OAEE,yBAAK1Q,UAAWT,EAAQoR,WACxB,6CACA,oFAEK,2BAAOC,aAAa,MAAMX,MAAO3B,EAAO5R,KAAK,QAAQmI,YAAY,QAAQgM,SAAU,SAAAC,GAAG,OAAIhB,EAASgB,EAAIjH,OAAOoG,UAJnH,eAMK,2BAAOW,aAAa,MAAMX,MAAOF,EAAUrT,KAAK,WAAWmI,YAAY,WAAWgM,SAAU,SAAAC,GAAG,OAAId,EAAYc,EAAIjH,OAAOoG,UAC1H,6BAAK,6BACL,2BAAOW,aAAa,MAAMX,MAAOxP,EAASwP,MAAOvT,KAAK,OAAOmI,YAAY,UAAUgM,SAAU,SAAAC,GAAG,OA/BjFC,EA+BkGD,EAAIjH,OAAOoG,MA7BjIE,EAAY,CAACF,MAAOc,EAAoBb,SAAS,SACjDG,EAAY,CAACvR,MAAO,QAASH,QAAS,KAHnB,IAACoS,KAiCf,kBAAClS,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QA3Dc,WAErB,IAAIgS,EAAmBvQ,EAASwP,MAEP,KAArBe,EAMJR,EAAwBQ,GAAkB3E,MAAK,SAACqE,GAE9CP,EAAY,CAACF,MAAOe,EAAkBd,QAASQ,IAG7CL,GADkB,IAAjBK,EACW,CAAC5R,MAAO,SAAUH,QAAS,6BAE3B,CAACG,MAAO,QAASH,QAAS,+BAZxC0R,EAAY,CAACvR,MAAO,SAAUH,QAAS,4CAuDlCM,MAAO,CAAC4C,WAAY,KAJtB,WASA,6BAAK,6BAEL,kBAAChD,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QA/FT,WAEMsP,EAAM7F,OAAS,GAAKsH,EAAStH,OAAS,EACxC4H,EAAY,CAACvR,MAAO,MAAOH,QAAS,qEAKtC7C,EAASmV,OAAOC,+BAA+B5C,EAAOyB,GAAU1D,MAAK,SAAS4D,GAE5EI,EAAY,CAACvR,MAAO,QAASH,QAAS,4BAA2B2P,IAjD1C,WAEzB,IAAM6C,EAAWnV,EAAUgP,WAAW,SAASM,IAAIgD,GAEnD6C,EAAS/E,MAAMC,MAAK,SAAC+E,GACnB,GAAIA,EAAY9E,YAET,CAGL,IAAI+E,EAAU,CACZ/C,MAAOA,EACP7N,SAAUA,EAASwP,MACnBqB,WAAY,GACZC,SAAU,GACVC,IAAK,GACLrR,gBAAiB,IAGnB+E,QAAQC,IAAI,uBACZgM,EAASM,IAAIJ,GAGbf,EAAS,CACP5T,KAAM,cACNF,eAAgB6U,IAKpBxT,EAAM6T,aAoBNC,MAECpF,OAAM,SAASC,GAEhB,IAAIoF,EAAYpF,EAAMlR,KACHkR,EAAM7N,QAEP,8BAAdiT,EACFvB,EAAY,CAACvR,MAAO,MAAOH,QAAS,2CACf,uBAAdiT,GACPvB,EAAY,CAACvR,MAAO,MAAOH,QAAS,0CA2EjCkT,UAAWpR,EAASyP,SAJtB,eASA,6BAAK,6BAEV,uBAAGjR,MAAO,CAACH,MAAOsR,EAAStR,QAA3B,IAAqCsR,EAASzR,QAA9C,MAQJ,SAASmT,GAAejU,GAAQ,IAAD,EAEHC,mBAAS,IAFN,mBAEtBwQ,EAFsB,KAEfwB,EAFe,OAGGhS,mBAAS,IAHZ,mBAGtBiS,EAHsB,KAGZC,EAHY,OAIGlS,mBAAS,CAACgB,MAAO,QAASH,QAAS,KAJtC,mBAItByR,EAJsB,KAIZC,EAJY,OAKWvS,oBAAS,GALpB,mBAKtBiU,EALsB,KAKRC,EALQ,KAOvBzS,EAAUC,KACV1D,EAAWyU,wBA0DjB,IAAI0B,EAAYnW,EAASmV,OAAOiB,YAAe,WAAa,WACxDC,EAAarW,EAASmV,OAAOiB,YAAe,YAAc,UAE9D,OAEE,yBAAKlS,UAAWT,EAAQoR,WACxB,0CACA,6EAEK,2BAAOjU,KAAK,OAAO8O,KAAK,QAAQ3G,YAAY,QAAQgM,SAAU,SAAAC,GAAG,OAAIhB,EAASgB,EAAIjH,OAAOoG,UAJ9F,eAMK,2BAAOvT,KAAK,WAAW8O,KAAK,WAAW3G,YAAY,WAAWgM,SAAU,SAAAC,GAAG,OAAId,EAAYc,EAAIjH,OAAOoG,UAEtG,6BAAK,6BAEL,kBAACpR,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAOqT,EACPnT,QAvET,WAGE,GAAIlD,EAASmV,OAAOiB,YAClBpW,EAASmV,OAAOmB,cACX,CAEL,GAAI9D,EAAM7F,OAAS,GAAKsH,EAAStH,OAAS,EAExC,YADA4H,EAAY,CAACvR,MAAO,MAAOH,QAAS,qEAKtC7C,EAASmV,OAAOoB,2BAA2B/D,EAAOyB,GAAU1D,MAAM,WAChE2F,GAAgB,GAChB3B,EAAY,CAACvR,MAAO,QAASH,QAAS,2BACtCd,EAAM6T,aAELnF,OAAM,SAASC,GAEhB,IAAIoF,EAAYpF,EAAMlR,KAClBgX,EAAe9F,EAAM7N,QAEP,wBAAdiT,GACFvB,EAAY,CAACvR,MAAO,MAAOH,QAAS,qBACpCqT,GAAgB,IAGhBO,MAAMD,GAERpN,QAAQC,IAAIqH,SA2CRyF,GAfR,gBAoBwB,IAAjBF,GACF,kBAAClT,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,YACNE,QAvCT,WAEIlD,EAASmV,OAAOuB,uBAAuBlE,GAAOjC,MAAK,WACjDkG,MAAM,iCAAmCjE,MACxC/B,OAAM,SAASC,GAEhBtH,QAAQC,IAAI,mCA8BX,+BASA,6BAAK,6BAEL,uBAAGlG,MAAO,CAACH,MAAOsR,EAAStR,QAA3B,IAAqCsR,EAASzR,QAA9C,MAQT,SAAS8T,GAAa5U,GAEpB,IAAM0B,EAAUC,KAEhB,OAEE,yBAAKQ,UAAWT,EAAQoR,WACtB,mEAEA,kBAAC9R,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAASnB,EAAM6U,UAHjB,eAQA,uBAAG1S,UAAWT,EAAQoT,WAAtB,uDACgD,6BADhD,4CAEqC,qCAFrC,MASN,SAASC,GAAY/U,GAEnB,IAAM0B,EAAUC,KAEhB,OAEE,yBAAKQ,UAAWT,EAAQoR,WACtB,yDACA,kBAAC9R,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAASnB,EAAM6U,UAHjB,aAYN,IAAMlT,GAAYoB,YAAW,CAC3B+P,UAAW,CACTnG,WAAY,UACZlI,QAAS,MACT+H,OAAQ,QACRhJ,aAAc,QAEjBsR,UAAW,CACRE,UAAW,SACXxT,SAAU,WAcCyT,GAlYf,WAAsB,IAAD,EAEOhV,mBAJP,UAEA,mBAEZ3B,EAFY,KAEL4W,EAFK,KAKbtT,GADUD,KACAE,eAEVsT,EAAa,WAEjB9N,QAAQC,IAAI,kBACZ1F,EAAQM,KAAK,UAIf,OAEE,6BAnBgB,UAsBZ5D,GACA,6BACE,kBAAC2V,GAAD,CAAgBJ,QAASsB,IACzB,kBAACP,GAAD,CAAcC,SAAU,kBAAMK,EAxBnB,yBA8Bb5W,GACA,6BACE,kBAAC0T,GAAD,CAAiB6B,QAASsB,IAC1B,kBAACJ,GAAD,CAAaF,SAAU,kBAAMK,EAlCnB,e,sECRhBrK,GAAUxB,EAAQ,IAatB,IAAM1H,GAAYoB,YAAW,CAC3BoH,QAAS,CACPhH,QAAS,OACTmB,eAAgB,SAChB8F,UAAW,OAIAgL,GAnBf,SAAqBpV,GAEnB,IAAM0B,EAAUC,KAEhB,OACE,yBAAKQ,UAAWT,EAAQyI,SACtB,kBAAC,GAAD,CAASwD,KAAK,sBAAsB1M,MAAM,UAAU2M,OAAO,WCG3DyH,GAAI,SAACrV,GAAD,OAAW,0BAAMoB,MAAO,CAACkU,WAAY,SAAUtV,EAAMuV,WAG/D,SAASC,GAAexV,GAEtB,IAEIyV,EAFE/T,EAAUC,KACVC,EAAUC,cAGV6T,EAAY,WAChB9T,EAAQM,KAAK,YAAclC,EAAM8J,OAG7B6L,EAAc,WAGlB/T,EAAQM,KAAK,WAAa0T,EAAmB5V,EAAMiJ,QAAU,IAAMjJ,EAAMiJ,SAGrE2M,EAAqB,SAACxW,GAE1B,OADmBY,EAAMiJ,OAAO4M,UAAU,EAAG7V,EAAMiJ,OAAO6M,QAAQ,OAIpE,OAAQ9V,EAAMnB,MACZ,IAAK,UACH4W,EAAa,6BACA,0BAAMtT,UAAWT,EAAQyG,QAAShH,QAASuU,GAAW,kBAAC,GAAD,KAAI1V,EAAM8J,OAChE,sDAEb,MACF,IAAK,OACH2L,EAAa,6BACD,0BAAMtT,UAAWT,EAAQyG,QAAShH,QAASuU,GAAW,kBAAC,GAAD,KAAI1V,EAAM8J,OAChE,0DACA,0BAAM3H,UAAWT,EAAQyG,QAAShH,QAASwU,GAAa,kBAAC,GAAD,KAAIC,EAAmB5V,EAAMiJ,SAArF,MAEZ,MACF,IAAK,SACHwM,EAAa,6BACC,0BAAMtT,UAAWT,EAAQyG,QAAShH,QAASuU,GAAW,kBAAC,GAAD,KAAI1V,EAAM8J,OAChE,0DACA,0BAAM3H,UAAWT,EAAQyG,QAAShH,QAASwU,GAAa,kBAAC,GAAD,KAAIC,EAAmB5V,EAAMiJ,SAArF,MAUlB,IAAI8M,OAAcvX,EAkBlB,OAfEuX,OADmBvX,GAAlBwB,EAAMgW,SACO,yBAAKxT,IAAKxC,EAAMgW,SAAU7T,UAAWT,EAAQe,kBAAoB,IAAMf,EAAQyG,QAAUzF,IAAK,gBAG1G,kBAACuT,GAAA,EAAD,KACI,kBAAC,KAAD,OAaN,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,KACGJ,GAGH,kBAACK,GAAA,EAAD,CACEC,QAAWZ,EACXa,UAAkBtW,EAAMuW,QA+FhC,IAAM5U,GAAYoB,YAAW,CAC3ByT,KAAM,CACJ/R,QAAS,IAEXhC,kBAAmB,CACjBwB,MAAO,QAETkG,QAAS,CACPhH,QAAS,OACTmB,eAAgB,SAChB8F,UAAW,KAEbjC,QAAS,CACRC,OAAQ,aAqCIqO,GA7Hf,SAAoBzW,GAAQ,IAAD,EAESC,wBAASzB,GAFlB,mBAElBkY,EAFkB,KAEPC,EAFO,KAKnB7U,GADUH,KACFI,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,gBACnCF,EAAY8O,yBAGlB7M,qBAAU,gBAEoB5B,IAAzBsD,EAAMnD,eAMTiY,EAAe9U,EAAMnD,eAAe8R,OAAOjC,MAAK,SAACmC,GAC/CgG,EAAahG,MANbgG,EAAa,MAUd,CAAC7U,EAAMnD,iBAEV,IAAIiY,EAAiB,SAASnG,GAC5B,OAAO,IAAIO,SAAQ,SAACpT,EAASqT,GAE3B9S,EAAUgP,WAAW,UAAUkE,MAAM,QAAS,KAAMZ,GAAOlC,MACxDC,MAAK,SAAA+C,GAEJ,IAAIsF,EAAW,GACftF,EAAS/D,SAAQ,SAAAC,GACf,IAAIqJ,EAAYrJ,EAAIC,OACpBmJ,EAAS3U,KAAK4U,MAGhBlZ,EAAQiZ,UAKZE,EAAa,kBAAC,GAAD,MACbC,EAAgBN,EAAaA,EAAU1Z,KAAK,SAACsD,EAAOoK,GAAR,OAC9C,kBAAC8K,GAAD,CAAgB7L,IAAKe,EAAK7L,KAAMyB,EAAMzB,KAAMiL,KAAMxJ,EAAM2W,eAAgBhO,OAAQ3I,EAAM2I,aAAUzK,EAAW+X,KAAK,GAAGP,SAAU1V,EAAM4W,qBACjIH,EAQJ,OAEE,6BACA,4CAKE,kBAACI,GAAA,EAAD,CAAMC,OAAO,GACVJ,GAGFN,GAAaA,EAAU9L,OAAS,GACjC,4H,oFCnKN,SAASyM,GAAiBrX,GAExB,IAAM0B,EAAUC,KACZmI,EAAO9J,EAAM8J,KAEbiM,OAAcvX,EAWlB,OATEuX,OADyBvX,GAAxBsL,EAAKxH,iBAAwD,IAAxBwH,EAAKxH,gBAC7B,yBAAKE,IAAKsH,EAAKxH,gBAAiBH,UAAWT,EAAQe,kBAAmBC,IAAK,gBAGvF,kBAACuT,GAAA,EAAD,KACI,kBAAC,KAAD,OAON,kBAACC,GAAA,EAAD,CAAU/T,UAAWT,EAAQyG,SAC3B,kBAACgO,GAAA,EAAD,KACGJ,GAGH,kBAACK,GAAA,EAAD,CACEC,QAAWvM,EAAKlH,SAChB0T,UAAYxM,EAAK4J,SACjBvS,QAAS,kBAAMnB,EAAM0H,aAAaoC,EAAKlH,cAGtC,GAmDT,IAAMjB,GAAYoB,YAAW,CAC3BuU,aAAc,CACblN,UAAW,QAEXmN,YAAa,CACXtW,MAAO,WAETuW,eAAgB,CACdvW,MAAO,WAETwB,kBAAmB,CACjBwB,MAAO,QAETkE,QAAS,CACRC,OAAQ,aAIGqP,GAtDf,SAAsBzX,GAAQ,IAAD,EAESC,mBAAS,IAFlB,mBAEpByX,EAFoB,KAERC,EAFQ,KAGrBjW,EAAUC,KACVC,EAAUC,cAEV+V,EAAkB,SAAC9N,GACvBlI,EAAQM,KAAK,YAAc4H,IAI7B1J,qBAAU,WAERuX,EAAc3X,EAAM6X,gBAEnB,CAAC7X,EAAM6X,eAUV,IAAIC,EAAeJ,EAAW1a,KAAI,SAAC8M,EAAMY,GAAP,OAChC,kBAAC2M,GAAD,CAAkB1N,IAAKe,EAAKZ,KAAMA,EAAMpC,aAAckQ,EAAiBG,eAAgB/X,EAAM+X,oBAG/F,OACE,kBAACZ,GAAA,EAAD,CAAMC,OAAO,EAAMjV,UAAWT,EAAQ4V,cACnCQ,I,wCCjFP,SAASE,GAAShY,GAAQ,IAChBuV,EAAqCvV,EAArCuV,SAAUnD,EAA2BpS,EAA3BoS,MAAOL,EAAoB/R,EAApB+R,MAAUkG,EADZ,aACsBjY,EADtB,8BAGvB,OACE,kBAACyG,EAAA,EAAD,eACEG,UAAU,MACVsR,KAAK,WACLC,OAAQ/F,IAAUL,EAClB5U,GAAE,0BAAqB4U,GACvBqG,kBAAA,qBAA+BrG,IAC3BkG,GAEH7F,IAAUL,GAAS,kBAACsG,GAAA,EAAD,CAAKC,EAAG,GAAI/C,IAWtC,SAASgD,GAAUxG,GACjB,MAAO,CACL5U,GAAG,cAAD,OAAgB4U,GAClB,gBAAgB,mBAAhB,OAAoCA,IAIxC,IAAMpQ,GAAYoB,aAAW,SAAAC,GAAK,MAAK,CACrCiE,KAAM,CACJ/D,SAAU,EACVQ,gBAAiBV,EAAMY,QAAQ+I,WAAW6L,WAI/B,SAASC,GAAWzY,GACjC,IAAM0B,EAAUC,KADwB,EAEdsD,IAAMhF,SAAS,GAFD,mBAEjCmS,EAFiC,KAE1BsG,EAF0B,KAQxC,OACE,yBAAKvW,UAAWT,EAAQuF,MACtB,kBAACX,EAAA,EAAD,CAAQ/C,SAAS,UACf,kBAACoV,GAAA,EAAD,CAAMvG,MAAOA,EAAOY,SAPL,SAAC1S,EAAOsY,GAC3BF,EAASE,IAMuCrX,aAAW,uBACrD,kBAACsX,GAAA,EAAD,eAAKC,MAAM,UAAaP,GAAU,KAClC,kBAACM,GAAA,EAAD,eAAKC,MAAM,UAAaP,GAAU,KAClC,kBAACM,GAAA,EAAD,eAAKC,MAAM,cAAcP,GAAU,KACnC,kBAACM,GAAA,EAAD,eAAKC,MAAM,aAAaP,GAAU,OAGtC,kBAACP,GAAD,CAAU5F,MAAOA,EAAOL,MAAO,GAC5B/R,EAAMuV,SAAS,IAElB,kBAACyC,GAAD,CAAU5F,MAAOA,EAAOL,MAAO,GAC5B/R,EAAMuV,SAAS,IAElB,kBAACyC,GAAD,CAAU5F,MAAOA,EAAOL,MAAO,GAC5B/R,EAAMuV,SAAS,IAElB,kBAACyC,GAAD,CAAU5F,MAAOA,EAAOL,MAAO,GAC5B/R,EAAMuV,SAAS,KCrDxB,IAAI1K,GAAUxB,EAAQ,IAsVtB,IAAM1H,GAAYoB,YAAW,CAC3BgW,SAAU,CACT3M,aAAc,QAEhBjC,QAAS,CACPhH,QAAS,OACTmB,eAAgB,SAChB8F,UAAW,KAEbxH,SAAU,CACR0S,WAAY,OACZ9I,OAAQ,YAEViH,WAAY,CACVjH,OAAQ,YAEVmH,IAAK,CACHnS,SAAU,OACVqG,SAAU,WAKEmR,GA1Wf,SAAqBhZ,GAAQ,IAEnBiZ,EAAiBC,cAAjBD,aAFkB,EAIFhZ,wBAASzB,GAJP,mBAInBsL,EAJmB,KAIbqP,EAJa,OAKElZ,oBAAS,GALX,mBAKnBmZ,EALmB,KAKXC,EALW,OAMIpZ,wBAASzB,GANb,mBAMnBiM,EANmB,KAMVsC,EANU,OAQU9M,mBAAS,IARnB,mBAQnBqZ,EARmB,KAQPC,EARO,OASgBtZ,mBAAS,IATzB,mBASnBuZ,EATmB,KASJC,EATI,OAU4BxZ,mBAAS,CAACyZ,WAAW,EAAOjJ,MAAO,KAV/D,mBAUnBkJ,EAVmB,KAUEC,EAVF,KAYpBlY,EAAUC,KACVG,EAAQC,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eACnCF,EAAY8O,yBACZrL,EAAUC,cAGhBzB,qBAAU,WA2EV,IAAkByZ,EAvEhBC,EAAkBb,GAEfnX,EAAMnD,gBAAkBsa,IAAiBnX,EAAMnD,eAAeiE,UAE/DyW,GAAU,GACVU,EAAcd,EAAcnX,EAAMnD,eAAe8R,MAAO,aACxDsJ,EAAcd,EAAcnX,EAAMnD,eAAe8R,MAAO,cAC9C3O,EAAMnD,gBAAkBsa,IAAiBnX,EAAMnD,eAAeiE,WAgE1DiX,EA9DLZ,EAiEX9a,EAAUgP,WAAW,SACpBE,YAAW,SAASC,GAEjBA,EAAcE,SAAS,SAAAC,GAErB,IAAIuM,EAAY,GACbvM,EAAIC,OAAO9K,WAAaiX,IACzBG,EAAYvM,EAAItQ,GAEhB4c,EAAcd,EAAce,EAAW,aACvCD,EAAcd,EAAce,EAAW,cAGzC,IAAIC,GAAQ,EAEZ9b,EAAUgP,WAAW,aAAaM,IAAI3L,EAAMnD,eAAe8R,OAAOtD,WAAW,aAC5EE,YAAW,SAASC,GAEjBA,EAAcE,SAAS,SAAAC,GAElBA,EAAItQ,KAAO6c,IAEZC,GAAQ,EACRL,EAAuB,CAACF,WAAW,EAAMjJ,MAAOuJ,YAK3C,IAAVC,GAEDL,EAAuB,CAACF,WAAW,EAAOjJ,MAAOuJ,UA9FvDX,GAAU,IAIZa,EAAcjB,GAAczK,MAAK,SAAC2L,GAEhChB,EAAQgB,QAGT,CAACrY,EAAMnD,eAAgBsa,IAE1B,IAgMImB,EAhMAF,EAAgB,SAASG,GAC3B,OAAO,IAAIrJ,SAAQ,SAACpT,EAASqT,GAE3B9S,EAAUgP,WAAW,SAASkE,MAAM,WAAY,KAAMgJ,GAAc9L,MACjEC,MAAK,SAAA+C,GAEJ,IAAIsF,EACJtF,EAAS/D,SAAQ,SAAAC,GAEfoJ,EAAWpJ,EAAIC,UAEjB9P,EAAQiZ,UAKVyD,EAAa,WAEjB,IAAIC,EAAoBzY,EAAMnD,eAAe8R,MAAQ,YAAckJ,EAAoBlJ,MAGvF,GAAGkJ,EAAoBD,UACrBvb,EAAUgP,WAAW,aAAaM,IAAI3L,EAAMnD,eAAe8R,OAAOtD,WAAW,aAAaM,IAAIkM,EAAoBlJ,OAAO+J,SACzHrc,EAAUgP,WAAW,aAAaM,IAAIkM,EAAoBlJ,OAAOtD,WAAW,aAAaM,IAAI3L,EAAMnD,eAAe8R,OAAO+J,SACzHrc,EAAUgP,WAAW,UAAUM,IAAI8M,GAAmBC,aAEjD,CACLrc,EAAUgP,WAAW,aAAaM,IAAI3L,EAAMnD,eAAe8R,OAAOtD,WAAW,aAAaM,IAAIkM,EAAoBlJ,OAAOmD,IAAI,IAC7HzV,EAAUgP,WAAW,aAAaM,IAAIkM,EAAoBlJ,OAAOtD,WAAW,aAAaM,IAAI3L,EAAMnD,eAAe8R,OAAOmD,IAAI,IAE7H,IAAI6G,EAAO,IAAIC,KAEXC,EAAsB,CACxBlK,MAAOkJ,EAAoBlJ,MAC3ByG,gBAAiBpV,EAAMnD,eAAe2D,gBACtC2U,eAAgBnV,EAAMnD,eAAeiE,SACrCgY,UAAWH,EACX5b,KAAM,UACNgc,MAAM,GAGR1c,EAAUgP,WAAW,UAAUM,IAAI8M,GAAmB3G,IAAI+G,GAI5Df,EAAuB,CAACF,WAAYC,EAAoBD,UAAWjJ,MAAOkJ,EAAoBlJ,SA+C1FsJ,EAAgB,SAAC5G,EAAkB2H,EAAoB3N,GAE3D,IAAI4N,EAAc,GAElB5c,EAAUgP,WAAW,aAAaM,IAAIqN,GAAoB3N,WAAWA,GACpEE,YAAW,SAASC,GAEjBA,EAAcE,SAAS,SAAAC,GAErB,IAAIC,EAAO,GACXA,EAAK+C,MAAQhD,EAAItQ,GACjB4d,EAAY7Y,KAAKwL,MAGnBsN,EAAc7H,EAAkB4H,EAAa5N,OAU7C6N,EAAgB,SAAC7H,EAAkB4H,EAAa5N,GAEpD,IAAI8N,EAAY,GAChBF,EAAYvN,SAAQ,SAACpC,EAAMqG,GAEzBtT,EAAUgP,WAAW,SAASM,IAAIrC,EAAKqF,OACtCpD,YAAW,SAASI,GACjB,IAAIC,EAAOD,EAAIC,OACfuN,EAAU/Y,KAAK,CAACU,SAAU8K,EAAK9K,SAAU8Q,SAAUhG,EAAKgG,SAAUpR,gBAAiBoL,EAAKpL,gBAAiB4Y,SAAS,UAKtG,cAAf/N,EACDoM,EAAc0B,GACO,cAAf9N,GACNsM,EAAiBwB,IAKfnB,EAAoB,SAAC3G,GACzBhV,EAAUgP,WAAW,WACpBE,YAAW,SAASC,GAEjB,IAAIC,EAAc,GAClBD,EAAcE,SAAS,SAAAC,GAErB,IAAIC,EAAOD,EAAIC,OACXA,EAAK5D,MAAQqJ,IAEfzF,EAAKvQ,GAAKsQ,EAAItQ,GACdoQ,EAAYrL,KAAKwL,OAGrBX,EAAWQ,OAsCbqB,EAAc,yBAAKzM,UAAWT,EAAQyI,SAAU,kBAAC,GAAD,CAASwD,KAAK,sBAAsB1M,MAAM,UAAU2M,OAAO,UAC3GiB,OAA4BrQ,GAAXiM,EAAwB,kBAAC,GAAD,CAAgBA,QAASA,IAAamE,EAG/E9M,EAAMnD,iBAAmBya,GAA2C,GAAjCO,EAAoBD,UAEzDU,EAAa,kBAACpZ,EAAA,EAAD,CACXiB,QAAQ,YACRhB,MAAM,UACNka,UAAW,kBAAC,KAAD,MACXha,QAAS,kBAAMmZ,MAJJ,iBASJxY,EAAMnD,iBAAmBya,IAElCgB,EAAa,kBAACpZ,EAAA,EAAD,CACXiB,QAAQ,YACRhB,MAAM,UACNka,UAAW,kBAAC,KAAD,MACXha,QAAS,kBAAMmZ,MAJJ,iBAYoB9b,GAAxBsD,EAAMnD,gBAA+BmD,EAAMnD,eAAe8U,gBAC7BjV,GAAxBsD,EAAMnD,gBAA+BmD,EAAMnD,eAAe+U,SAD1E,IAIIrR,EAAU+Y,KAOd,OANIhC,GAAUtX,EAAMnD,gBAAkBmD,EAAMnD,eAAe2D,gBACzDD,EAAUP,EAAMnD,eAAe2D,iBACrB8W,GAAUtP,GAAQA,EAAKxH,kBACjCD,EAAUyH,EAAKxH,iBAKf,kBAAC,IAAMvB,SAAP,KAEE,kBAACiK,GAAA,EAAD,CACEC,WAAS,EACTlH,QAAS,EACTmH,QAAQ,SACR7G,WAAW,SACXlC,UAAWT,EAAQqX,UAGnB,kBAAC/N,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,0BAAMlJ,UAAWT,EAAQkB,UAAWqW,QAE1Bza,GAARsL,GACA,0BAAM3H,UAAWT,EAAQ+R,YAAzB,MAAyC3J,EAAK4J,eAGrClV,GAARsL,GAAwC,IAAnBA,EAAK2J,YAC3B,uBAAGtR,UAAWT,EAAQ+R,YAAtB,eAAqC3J,EAAK2J,iBAGjCjV,GAARsL,QAAiCtL,GAAZsL,EAAK6J,KAC3B,uBAAGxR,UAAWT,EAAQiS,KAAK,2BAAI7J,EAAK6J,MAGtC,6BAECyF,GAAU,kBAACpY,EAAA,EAAD,CACTiB,QAAQ,YACRhB,MAAM,UACNka,UAAW,kBAAC,KAAD,MACXha,QAAS,kBAAMS,EAAQM,KAAK,eAJnB,oBASVkY,GAEH,kBAACpP,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,yBAAK7I,IAAKH,EAASK,IAAI,uBAK3B,kBAAC+V,GAAD,CAAYrG,MAAO,GACjB,yBAAKhR,MAAO,CAACkL,WAAY,SACvBuC,GAEF,6BACA,kBAAC,GAAD,OAEA,6BACA,kBAAC,GAAD,CAAcgJ,aAAcyB,EAAYvB,gBAAgB,KAExD,6BACA,kBAAC,GAAD,CAAcF,aAAc2B,EAAezB,gBAAgB,Q,iJC/U7DpW,GAAYoB,YAAW,CAC3BsY,OAAQ,CACN3X,gBAAiB4X,KAAK,KACtBra,MAAOqa,KAAK,QAIhB,SAASC,GAAavb,GACpB,IAAM0B,EAAUC,KACRd,EAAiCb,EAAjCa,QAAS2a,EAAwBxb,EAAxBwb,cAAetb,EAASF,EAATE,KAFL,EAGOD,wBAASzB,GAHhB,mBAGpBid,EAHoB,KAGTC,EAHS,KAKrB5Z,EAAQC,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eACnCF,EAAY8O,yBAGlB7M,qBAAU,WAEL0B,EAAMnD,gBACPob,EAAcjY,EAAMnD,eAAe8R,MAAO,eAG3C,CAAC3O,EAAMnD,iBAEV,IA0BMob,EAAgB,SAACe,EAAoB3N,GAEzC,IACIwO,EAAc,GAElBxd,EAAUgP,WAAW,aAAaM,IAAIqN,GAAoB3N,WAAWA,GACpEE,YAAW,SAASC,GAEjBA,EAAcE,SAAS,SAAAC,GAErBtP,EAAUgP,WAAW,SAASM,IAAIA,EAAItQ,IACrCkQ,YAAW,SAASI,GACjB,IAAIC,EAAOD,EAAIC,OACfiO,EAAYzZ,KAAK,CAACuO,MAAOhD,EAAItQ,GAAIyF,SAAU8K,EAAK9K,SAAU8Q,SAAUhG,EAAKgG,SAAUpR,gBAAiBoL,EAAKpL,gBAAiB4Y,SAAS,UAMzIQ,EAAaC,OAIfC,OAA0Bpd,GAAbid,EAA0BA,EAAUze,KAAI,SAAC6e,GAAD,OACvD,kBAAC3F,GAAA,EAAD,CAAU4F,QAAM,EAAC3a,QAAS,kBA9CA,SAAC0a,GAE3Bhb,EAAQgb,EAAOpL,OAEf,IAAIgK,EAAO,IAAIC,KAEXqB,EAAoB,CACtBtL,MAAOoL,EAAOpL,MACdyG,gBAAiBpV,EAAMnD,eAAe2D,gBACtC2U,eAAgBnV,EAAMnD,eAAeiE,SACrCqG,OAAQjJ,EAAMgc,SACdpB,UAAWH,EACX5b,KAAM,OACNgc,MAAM,GAGJN,EAAoBzY,EAAMnD,eAAe8R,MAAQ,SAAWoL,EAAOpL,MAAQ,IAAMzQ,EAAMgc,SAE3F7d,EAAUgP,WAAW,UAAUM,IAAI8M,GAAmB3G,IAAImI,GA4B1BE,CAAoBJ,IAASlS,IAAKkS,EAAOpL,OACvE,kBAAC0F,GAAA,EAAD,KACE,kBAACF,GAAA,EAAD,CAAQ9T,UAAWT,EAAQ2Z,QACzB,kBAAC,KAAD,QAGJ,kBAACjF,GAAA,EAAD,CAAcC,QAASwF,EAAOjZ,eAE7B,KAGL,OACE,kBAACsZ,GAAA,EAAD,CAAQrb,QA9DU,WAClBA,EAAQ2a,IA6DsBpD,kBAAgB,sBAAsBlY,KAAMA,GACxE,kBAACic,GAAA,EAAD,CAAahf,GAAG,uBAAhB,gBACA,kBAACga,GAAA,EAAD,KACGyE,IAYM,SAASQ,GAAepc,GAAQ,IAAD,EACpBiF,IAAMhF,UAAS,GADK,mBACrCC,EADqC,KAC/BC,EAD+B,OAEF8E,IAAMhF,SAAS,QAFb,mBAErCub,EAFqC,KAEtBa,EAFsB,KAgB5C,OACE,6BACE,kBAACrb,EAAA,EAAD,CAAQiB,QAAQ,YAAYhB,MAAM,UAAUE,QAdxB,WACtBhB,GAAQ,KAaN,mBAGA,kBAACob,GAAD,CAAcS,SAAUhc,EAAMgc,SAAUR,cAAeA,EAAetb,KAAMA,EAAMW,QAZlE,SAACuR,GACnBjS,GAAQ,GACRkc,EAAiBjK,O,wBC/HN,SAASkK,GAAWtc,GAEjC,IACIuc,EADY,0BAA4Bvc,EAAMwH,SAE9CnI,EAAQ,oEAA6DW,EAAMX,MAI/E,OAFAgI,QAAQC,IAAIiV,GAIR,kBAACC,GAAA,EAAD,CACExd,IAAKud,EACLE,MAAOpd,EACP8C,UAAU,oCAGV,yBAAKf,MAAO,CAACgJ,UAAW,KAEpB,kBAACsS,GAAA,EAAD,CAAcxb,KAAM,GAAIyb,OAAK,M,mCClBnCC,GAAmB,SAACte,EAAOM,GAC/B,OAAQA,EAAOC,MACb,IAAK,aACH,OAAO,eAAKP,EAAZ,CAAmBue,WAAW,EAAMC,SAAS,IAC/C,IAAK,gBACH,OAAO,eACFxe,EADL,CAEEue,WAAW,EACXE,YAAY,EACZtI,aAAc,GACd/G,KAAM9O,EAAOoe,UAEjB,IAAK,gBACH,OAAO,eACF1e,EADL,CAEEue,WAAW,EACXE,YAAY,EACZtI,aAAc,0BAElB,IAAK,eAEH,IAAMwI,EAAU3e,EAAMoP,KAAK1Q,KAAI,SAAAkgB,GAC7B,OAAOA,EAAI/f,KAAOyB,EAAOue,cAAchgB,GAAKyB,EAAOue,cAAgBD,KAErE,OAAO,eACF5e,EADL,CAEEue,WAAW,EACXE,YAAY,EACZtI,aAAc,GACd/G,KAAMuP,IAEV,QACE,MAAM,IAAIzf,QA8DD4f,GA1DU,SAACC,EAAaC,GAAiB,IAAD,EACpCrd,mBAASod,GAAnBE,EAD8C,sBAG3BC,qBAAWZ,GAAkB,CACrDC,WAAW,EACXE,YAAY,EACZtI,aAAc,GACd/G,KAAM4P,IAP6C,mBAG9Chf,EAH8C,KAGvCmU,EAHuC,KAUrDrS,qBAAU,WACR,IAAIqd,GAAY,EA+BhB,OA7Be,yCAAG,uBAAAC,EAAA,sDAChBjL,EAAS,CAAE5T,KAAM,eAEjB0e,EAAOhP,MAAMC,MAAK,SAASf,GAErBA,EAAIgB,OAEDgP,GACHhL,EAAS,CAAE5T,KAAM,gBAAiBme,QAASvP,EAAIC,SAI1C+P,GACDhL,EAAS,CAAE5T,KAAM,qBAK1B6P,OAAM,SAAAiP,GACAF,GACDhL,EAAS,CAAE5T,KAAM,qBApBP,2CAAH,oDA0Bf+e,GAGO,WACLH,GAAY,KAGb,CAACF,IASJ,OAAO,eAAKjf,EAAZ,CAAmBuf,iBAPM,SAAAC,GACvBrL,EAAS,CACP5T,KAAM,eACNse,cAAeW,QC2QrB,SAASC,GAAgB/d,GAEvB,IAAM0B,EAAUC,KAUZrC,OAAoCd,GAArBwB,EAAMV,YAA4BU,EAAMV,YAPpC,CACvB,CAACqO,KAAM,yBAAuBqQ,SAAU,IAAKC,QAAS,MACtD,CAACtQ,KAAM,OAAQqQ,SAAU,IAAKC,QAAS,OACvC,CAACtQ,KAAM,WAASqQ,SAAU,IAAKC,QAAS,MACxC,CAACtQ,KAAM,SAAOqQ,SAAU,IAAKC,QAAS,KAKlCC,EAAiB5e,EAAYtC,KAAI,SAACmhB,EAAQzT,GAAT,OACrC,kBAAC,IAAM3J,SAAP,CAAgB4I,IAAKe,GACnB,kBAACwL,GAAA,EAAD,KACE,kBAACE,GAAA,EAAD,CACEC,QAAU8H,EAAOH,SAAW,IAAMG,EAAOF,QAAU,IAAME,EAAOxQ,QAIlEjD,EAAMpL,EAAYsL,OAAS,GAAK,kBAACwT,GAAA,EAAD,CAASxX,UAAU,WAIvD,OACE,6BACE,8CACA,kBAACuQ,GAAA,EAAD,CAAMC,OAAO,EAAMjV,UAAWT,EAAQ2c,iBACnCH,IAQT,SAASI,GAAete,GAEtB,IAAM0B,EAAUC,KAQZ4c,OAAoC/f,GAArBwB,EAAMue,YAA4Bve,EAAMue,YANpC,CACvB,CAACC,MAAO,EAAGC,KAAM,+CACjB,CAACD,MAAO,EAAGC,KAAM,8CACjB,CAACD,MAAO,EAAGC,KAAM,uCAMjBF,EAAYG,MAAM,SAACC,EAAOC,GAAR,OAAkBD,EAAMH,MAAQI,EAAMJ,SAExD,IAAIK,EAAUN,EAAYvhB,KAAI,SAAC8hB,EAAMpU,GAAP,OAC5B,kBAACqU,GAAD,CAAoBrU,IAAKA,EAAKf,IAAKe,EAAKoU,KAAMA,EAAKL,KAAMO,IAAKT,EAAY3T,YAG5E,OACE,6BACE,qDACA,kBAACuM,GAAA,EAAD,CAAMC,OAAO,EAAMjV,UAAWT,EAAQ2c,iBACnCQ,IAMT,SAASE,GAAmB/e,GAAQ,IAAD,EAEHC,oBAAS,GAFN,mBAE1Bgf,EAF0B,KAEjBC,EAFiB,KAG3Bxd,EAAUC,KAEZ+I,EAAM1K,EAAM0K,IAMZR,GAAoB,IAAZ+U,EAAqB,kBAAC,KAAD,CAAc9c,UAAWT,EAAQyd,YAAe,kBAAC,KAAD,CAA0Bhd,UAAWT,EAAQyd,YAE9H,OACE,kBAAC,IAAMpe,SAAP,KACE,kBAACmV,GAAA,EAAD,CACE/U,QAAS,WARb+d,GAAYD,KAUP/U,EACD,kBAACkM,GAAA,EAAD,CAAcC,QAAUrW,EAAM8e,QAE9BpU,EAAM1K,EAAMgf,IAAM,GAAK,kBAACZ,GAAA,EAAD,CAASxX,UAAU,QAKlD,IAAMjF,GAAYoB,YAAW,CAC3B4E,UAAU,aACRC,UAAW,OACXC,SAAU,OACVrE,aAAc,MACdwE,UAAW,QACXD,UAAW,SALJ,WAMG,SAEZ0E,aAAc,CACZhI,QAAS,GAEXiI,QAAS,CACPC,WAAY,UACZnJ,aAAc,MACdiB,QAAS,EACTmI,UAAW,SACXxC,UAAW,GAEbgV,YAAa,CACX5S,OAAQ,KAEV6S,WAAY,CACV/J,WAAY,OACZnS,QAAS,QACT3B,SAAU,OAEZ6c,gBAAiB,CAChBjU,UAAW,QAEb+U,UAAW,CACT9d,YAAa,OACbJ,MAAO,WAETqe,aAAc,CACZ9S,OAAQ,WACR8I,WAAY,UAIAiK,GArdf,SAAoBvf,GAAQ,IAAD,EAEIC,oBAAS,GAFb,mBAEjBmZ,EAFiB,KAETC,EAFS,OAGIpZ,wBAASzB,GAHb,mBAGjByK,EAHiB,KAGTuW,EAHS,OAIGvf,mBAAS,CAACwf,OAAO,EAAOC,YAAQlhB,IAJnC,mBAIjBmhB,EAJiB,KAIVC,EAJU,OAKG3f,oBAAS,GALZ,gCAMGiZ,eAApB2G,EANiB,EAMjBA,YAAa1iB,EANI,EAMJA,GAEf2E,EAAQC,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eACnCF,EAAY8O,yBAEZvL,EAAUC,KACVC,EAAUC,cACV4Q,EAAWlC,cAIbuP,GAFa/d,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,YAAYM,kBAElCR,EAAUgP,WAAW,WAAWM,IAAItQ,IAjBjC,EAoBrBigB,GAAiB0C,EAAiB,IApBb,EAmBlBpS,KAnBkB,EAmBZmP,UAnBY,EAmBDE,WAnBC,EAmBWtI,aAnBX,EAmByBoJ,iBAiBlDzd,qBAAU,WAER,IAAIyR,EAAM1T,EAAUgP,WAAW,WAAWM,IAAItQ,GAC9CiQ,EAAcyE,KAGb,IAGHzR,qBAAU,WAEJ0B,EAAMnD,gBAAmBsK,GAAWA,EAAO8W,SAASnd,WAGrDqG,EAAO8W,SAASnd,UAAYd,EAAMnD,eAAeiE,UAClDyW,GAAU,GAKZ2G,EAAYle,EAAMnD,eAAe8R,UAEhC,CAAC3O,EAAMnD,eAAgBsK,IAE1B,IAkKI5G,EAlKE2d,EAAc,SAACxP,GAGJrS,EAAUgP,WAAW,gBAAgBM,IAAI+C,GAE/CjC,MAAMC,MAAK,SAASf,GAE3B,IAAIwS,EAEJ,GAAIxS,EAAIgB,OAAQ,CAEd,IAAIf,EAAOD,EAAIC,OACfuS,OAA8CzhB,IAAlCkP,EAAKqD,cAAc9H,EAAO9L,KAAsBuQ,EAAKqD,cAAc9H,EAAO9L,SAGtFgB,EAAUgP,WAAW,gBAAgBM,IAAI+C,GAAeoD,IAAI,CAAC7C,cAAe,KAC5EkP,GAAU,EAIZL,EAAS,CAACH,MAAOQ,EAASP,OAAQlP,OAGnC9B,OAAM,SAAAiP,GACLtW,QAAQC,IAAI,0BAA2BqW,OA+FrCvQ,EAAgB,SAACyE,GACrBA,EAAItD,MAAMC,MAAK,SAASf,GACtB,GAAIA,EAAIgB,OAAQ,CACZ,IAAIf,EAAOD,EAAIC,OACfA,EAAKvQ,GAAKsQ,EAAItQ,IArBM+iB,EAuBPxS,EAAKwS,SAtBjB,IAAIlP,SAAQ,SAACpT,EAASqT,GAI3BiP,EAAS3R,MAAMC,MAAK,SAASf,GAEpBA,EAAIgB,QACPwC,IAEF,IAAI4F,EAAWpJ,EAAIC,OACnB9P,EAAQiZ,UAYoBrI,MAAK,SAAC2R,GAEhCzS,EAAKqS,SAAWI,EAChBX,EAAU9R,MAETgB,OAAM,WACPrH,QAAQC,IAAI,+CA7BH,IAAS4Y,KAiCvBxR,OAAM,SAASC,GACdtH,QAAQC,IAAI,0BAA2BqH,OAKzCzE,GAAwB,IAAhByV,EAAMF,MAAkB,kBAAC,KAAD,MAAkB,kBAAC,KAAD,MAClDvW,OAAqB1K,IAAXyK,EAAwBA,EAAOE,IAAM,aA6BnD,OANE9G,OADe7D,IAAXyK,QAA2CzK,IAAnByK,EAAOG,QACzBH,EAAOG,QAEPC,OAAQ,KAAcH,EAAQ,QAMxC,kCAIe1K,IAAXyK,GACA,6BAEE,yBAAK9G,UAAWT,EAAQ4d,cACxB,8BACE,kBAACte,EAAA,EAAD,CAAQof,oBAAkB,EAACjf,QAzJlB,WAEbW,EAAMnD,gBAKKR,EAAUgP,WAAW,gBAAgBM,IAAI3L,EAAMnD,eAAe8R,OAEpElC,MAAMC,MAAK,SAASf,GAE3B,IAAIC,EAGAD,EAAIgB,UAENf,EAAOD,EAAIC,QACNqD,cAAc9H,EAAO9L,KAAOwiB,EAAMF,MACvCthB,EAAUgP,WAAW,gBAAgBM,IAAIA,EAAItQ,IAAI2R,OAAOpB,OAK5DkS,EAAS,CAACH,OAAQE,EAAMF,MAAOC,OAAQC,EAAMD,UApB3CrY,QAAQC,IAAI,0BAuJNlG,MAAO,CAAC+B,QAAS,SAAUO,gBAAiB,gBACzCwG,GAED2V,EAAc,OAGlB,8BAEE,kBAAC7e,EAAA,EAAD,CAAQof,oBAAkB,EAACjf,QA9Fb,WACtBS,EAAQM,KAAK,YAAc+G,EAAO8W,SAASnd,WA8FnCxB,MAAO,CAAC+B,QAAS,SAAUO,gBAAiB,cAAe2c,cAAe,SACtEpX,EAAO8W,SAASnd,YAKxB,kBAACoI,GAAA,EAAD,CACEC,WAAS,EACTlH,QAAS,EACTmH,QAAQ,UAGR,kBAACF,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,yBAAK7I,IAAKH,EAASF,UAAWT,EAAQiG,UAAWjF,IAAK,gBAExD,kBAACsI,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,EAAGlJ,UAAWT,EAAQ+K,cACnC,yBAAKtL,QApJQ,cAqJX,kBAACib,GAAD,CAAgBJ,SAAU/S,EAAO9L,MAGnC,kBAACmf,GAAD,CAAY9U,SAAU5F,EAAQ4F,SAASC,SAAUpI,MAAOwgB,MAK5D,kBAAC9B,GAAD,CAAiBze,YAAa2J,EAAO3J,cACrC,kBAACgf,GAAD,CAAgBC,YAAatV,EAAOsV,cAEnCnF,GACC,kBAACpY,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNka,UAAW,kBAAC,KAAD,MACXha,QAjKS,WAEjBsR,EAAS,CACP5T,KAAM,kBACNU,aAAc0J,EAAOsV,cAGvB9L,EAAS,CACP5T,KAAM,iBACNS,YAAa2J,EAAO3J,cAGtBmT,EAAS,CACP5T,KAAM,WACNQ,MAAO4J,EAAO5J,QAGhBoT,EAAS,CACP5T,KAAM,cACNM,UAAU,EACVC,UAAWjC,IAGbyE,EAAQM,KAAK,aAsIP,mBA3CF,iBAuDCkX,GACC,kBAACpY,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,YACNka,UAAW,kBAAC,KAAD,MACXha,QApJW,WAEnBhD,EAAUgP,WAAW,WAAWM,IAAItQ,GAAIqd,SACxC5Y,EAAQM,KAAK,WA6IP,qBCnTN2I,GAAUxB,EAAQ,IAwEtB,IAAM1H,GAAYoB,YAAW,CAC3BoH,QAAS,CACPhH,QAAS,OACTmB,eAAgB,SAChB8F,UAAW,OAIAkW,GA9Ef,SAAoBtgB,GAAQ,IAAD,EAECC,mBAAS,IAFV,mBAElBsgB,EAFkB,KAEXC,EAFW,OAGKvgB,wBAASzB,GAHd,mBAGlBiM,EAHkB,KAGTsC,EAHS,KAKnBrL,EAAUC,KAEVxD,GADQ4D,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eACvB4O,0BAEFpL,cAIhBzB,qBAAU,WACRqgB,EAAY,SACZA,EAAY,aACX,IAEH,IAAMA,EAAc,SAACC,GAEnBviB,EAAUgP,WAAWuT,GAAiBrT,YAAW,SAASC,GAEpD,IAAIqT,EAAa,GACjBrT,EAAcE,SAAS,SAAAC,GACrB,IAAIC,EAAOD,EAAIC,OACfA,EAAKvQ,GAAKsQ,EAAItQ,GACdwjB,EAAWze,KAAKwL,MAGM,UAApBgT,GACFF,EAASG,GACa,YAApBD,GACF3T,EAAW4T,OAIjBnH,EAAgB+G,EAAMvjB,KAAK,SAAA8M,GAE7B,MADU,CAAClH,SAAUkH,EAAKlH,SAAU8Q,SAAU5J,EAAK4J,SAAUpR,gBAAiBwH,EAAKxH,gBAAiB4Y,SAAS,MAO/G,OAEE,6BACE,8CAIyB,mHAEvBqF,EAAM3V,QAAU,GAAK,yBAAKzI,UAAWT,EAAQyI,SAAU,kBAAC,GAAD,CAASwD,KAAK,sBAAsB1M,MAAM,UAAU2M,OAAO,UAClH2S,EAAM3V,OAAS,GAAK,kBAAC,IAAM7J,SAAP,KACtB,mDACA,6BACA,kBAAC,GAAD,CAAc8W,aAAc2B,KAE5B,6CACA,yBAAKpY,MAAO,CAACkL,WAAY,cACZ9N,GAAXiM,GAAwB,kBAAC,GAAD,CAAgBA,QAASA,Q,wHC/D1C,SAASmW,GAAY5gB,GAElC,IAAMK,EAAc,SAACwgB,GACnB7gB,EAAM8gB,aAAaD,IAGrB,OAEI,kBAAC3E,GAAA,EAAD,CACEhc,KAAMF,EAAME,KACZW,QAASR,EACT+X,kBAAgB,qBAChB2I,mBAAiB,4BAEjB,kBAAC5E,GAAA,EAAD,CAAahf,GAAG,sBAAsB6C,EAAMX,OAC5C,kBAAC2hB,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CAAmB9jB,GAAG,4BACnB6C,EAAMc,UAGX,kBAACogB,GAAA,EAAD,KACE,kBAAClgB,EAAA,EAAD,CAAQG,QAAS,kBAAMd,GAAY,IAAQY,MAAM,WAC9CjB,EAAMmhB,cAET,kBAACngB,EAAA,EAAD,CAAQG,QAAS,kBAAMd,GAAY,IAAOY,MAAM,UAAUmgB,WAAS,GAChEphB,EAAMqhB,iBCugBnB,IAAM1f,GAAYoB,YAAW,CAC3B+P,UAAW,CACTnG,WAAY,UACZlI,QAAS,MACT+H,OAAQ,QACRhJ,aAAc,QAEjB8d,QAAS,CACP9U,OAAQ,OAEV+U,QAAS,CACPC,gBAAiB,sDACjBlM,WAAY,QAEdmM,WAAY,CACTzd,WAAY,OACZ3C,YAAa,OACb+I,UAAW,OACXjH,QAAS,QAEZue,eAAgB,CACblgB,SAAU,OACVP,MAAO,UACPuL,OAAQ,OAEZmV,aAAc,CACZ3d,WAAY,OACZ3C,YAAa,OACb+K,aAAc,QAEhBwV,QAAS,CACPC,KAAM,WACN1e,QAAS,UAII2e,GAxjBf,SAAkB9hB,GAAQ,IAAD,EAE6BC,mBAAS,IAFtC,mBAEhBiT,EAFgB,KAEI6O,EAFJ,OAG6B9hB,mBAAS,IAHtC,mBAGhB+hB,EAHgB,KAGIC,EAHJ,OAImBhiB,mBAAS,IAJ5B,mBAIhBiiB,EAJgB,KAIDC,EAJC,OAKSliB,wBAASzB,GALlB,mBAKhB4jB,EALgB,KAKNC,EALM,OAOepiB,oBAAS,GAPxB,mBAOhBqiB,EAPgB,KAOHC,EAPG,OAQatiB,mBAAS,GARtB,mBAQhBuiB,EARgB,KAQJC,EARI,OASexiB,oBAAS,GATxB,mBAShByiB,EATgB,KASHC,EATG,OAUe1iB,oBAAS,GAVxB,mBAUhB2iB,EAVgB,KAUHC,EAVG,KAWjBC,EAAW7d,IAAM8d,OAAO,MAXP,EAYe9iB,mBAAS,IAZxB,mBAYhB+iB,EAZgB,KAYHC,EAZG,OAcWhjB,oBAAS,GAdpB,mBAchBijB,EAdgB,KAcLC,EAdK,OAgBiBljB,mBAAS,IAhB1B,mBAgBhBmjB,EAhBgB,KAgBFC,GAhBE,KAkBjB3hB,GAAUC,KACVG,GAAQC,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eACnCF,GAAY8O,yBACZrL,GAAUC,cAiDhB,SAASyhB,KAEPX,GAAe,GACZL,IACDP,EAAsBjgB,GAAMnD,eAAeiE,UAC3Cqf,EAAsBngB,GAAMnD,eAAe+U,UAC3CyO,EAAiBrgB,GAAMnD,eAAegV,KACtC0O,EAAYvgB,GAAMnD,eAAe2D,kBAmErC,SAASihB,KA/BA,IAAIvS,SAAQ,SAACpT,EAASqT,GAG3B,IAAI4B,GAAe,EACP1U,GAAUgP,WAAW,SAASkE,MAAM,WAAY,KAAM6B,GAAoB3E,MACnFC,MAAK,SAAA+C,GACJA,EAAS/D,SAAQ,SAAAC,GACfoF,GAAe,KAEjBjV,EAAQiV,SAwBKrE,MAAK,SAACqE,GAnDL,IAASM,GAqDP,IAAjBN,GAOH1U,GAAUgP,WAAW,SAASM,IAAI3L,GAAMnD,eAAe8R,OAAO3B,OAAO,CAAClM,SAAUsQ,IAChFyP,GAAe,IA7DYxP,EAgEXrR,GAAMnD,eAAeiE,SA/DhC,IAAIoO,SAAQ,SAACpT,EAASqT,GAE3B,IAAIG,EAAWjT,GAAUgP,WAAW,WAChCqW,EAAW,GAEHpS,EAASC,MAAM,OAAQ,KAAM8B,GAAkB5E,MACxDC,MAAK,SAAA+C,GAEJA,EAAS/D,SAAQ,SAAAC,GACf+V,EAASthB,KAAKuL,EAAItQ,OAEpBS,EAAQ4lB,UAoDmChV,MAAK,SAACiV,GAEnDA,EAAUzmB,KAAK,SAAA0mB,GACbvlB,GAAUgP,WAAW,WAAWM,IAAIiW,GAAK5U,OAAO,CAAChF,KAAMoJ,WAZzD2P,GAAe,MA/HrB5d,IAAM7E,WAAU,WACdqiB,EAAcK,EAASa,QAAQC,aAE/B,IAAMC,EAAa5lB,IAASQ,UAAUoT,MAAMiS,MAAM,iBAC5CC,EAAmB,GAGzBF,EAAWG,UAAUxV,MAAK,SAASyV,GACjCA,EAAIC,MAAM1W,SAAQ,SAAS2W,GACzBA,EAAQC,iBAAiB5V,MAAK,SAACxP,GAAU+kB,EAAiB7hB,KAAKlD,SAEjEqkB,GAAgBU,MAEfrV,OAAM,SAASC,GAChBtH,QAAQC,IAAI,mCAGb,IAEHrC,IAAM7E,WAAU,WAEX0B,GAAMnD,iBAAmBuU,IAAuBpR,GAAMnD,eAAeiE,UACtEwf,IAAatgB,GAAMnD,eAAe2D,iBAClC0f,IAAuBlgB,GAAMnD,eAAe+U,WAC1C5R,GAAMnD,eAAegV,KAAQ7R,GAAMnD,eAAegV,KAAOuO,IAAkBpgB,GAAMnD,eAAegV,KAClG4O,GAAe,GAEfA,GAAe,KAEhB,CAACrP,EAAoB8O,EAAoBE,EAAeE,IAG3Dnd,IAAM7E,WAAU,WACX0B,GAAMnD,iBACPojB,EAAsBjgB,GAAMnD,eAAeiE,UAC3Cqf,EAAsBngB,GAAMnD,eAAe+U,eAEElV,IAAzCsD,GAAMnD,eAAe2D,iBACvB+f,EAAYvgB,GAAMnD,eAAe2D,sBAEF9D,IAA7BsD,GAAMnD,eAAegV,KACvBwO,EAAiBrgB,GAAMnD,eAAegV,QAEzC,CAAC7R,GAAMnD,iBA6HV,IAAM0lB,GAAa,WACjB,IAAIC,EAhBN,WAEE,IAAIC,EAAW,CAAC,SAAU,OAAQ,OAC9BC,EAAY,CAAC,OAAQ,SAAU,QAAS,QAExCC,EAAQ9Y,KAAKC,MAAMD,KAAKE,SAAW0Y,EAAS3Z,QAC5C8Z,EAAQ/Y,KAAKC,MAAMD,KAAKE,SAAW2Y,EAAU5Z,QAMjD,OAJY2Z,EAASE,GACRD,EAAUE,GAOHC,GACpB5C,EAAsBuC,IAoBlBM,GAAW,SAACrnB,EAAGsnB,EAAU1nB,GAE7B8lB,EADc4B,EAAW1nB,EAAK,IAE9BmmB,MAyBEjhB,GAAU+f,EAEd,OAEE,6BACE,yBAAKjgB,UAAWT,GAAQoR,WACtB,gDAEA,kBAACgS,GAAA,EAAD,CACE9R,SAAU,SAACzV,EAAGsnB,GAAJ,OAAiBD,GAASrnB,EAAGsnB,EAAU,aACjDA,SAA0B,aAAhB7B,EACV5hB,MAAO,CAACuL,WAAY,UAAWvC,UAAW,QAC1C,kBAAC2a,GAAA,EAAD,CACEC,WAAY,kBAAC,KAAD,MACZ5e,gBAAc,kBACdjJ,GAAG,kBAEH,kBAACsJ,EAAA,EAAD,CAAYtE,UAAWT,GAAQujB,SAA/B,oBAEF,kBAACC,GAAA,EAAD,KAEE,kBAACC,GAAA,EAAD,CAAaljB,QAAQ,YACnB,kBAACmjB,GAAA,EAAD,CAAYvT,IAAKiR,EAAUuC,QAAQ,sBAAnC,qBACA,kBAACC,GAAA,EAAD,CACElT,MAAOc,EACPF,SAAU,SAACzV,GAAD,OAhLFgoB,EAgLsBhoB,EAAEyO,OAAOoG,MA/KnD2P,EAAsBwD,QACtB1C,GAAe,GAFI,IAAC0C,GAiLR/C,WAAYA,EACZxO,UAAW0O,MAIZA,GACH,kBAAC1hB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMwhB,GAAe,IAC9BxgB,UAAWT,GAAQ4f,SAJrB,4BASEoB,GACF,kBAAC,IAAM3hB,SAAP,KACE,kBAACC,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMmiB,MACfnhB,UAAWT,GAAQ4f,SAJrB,UAQA,kBAACtgB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMkjB,MACfliB,UAAS,UAAKT,GAAQ4f,QAAb,YAAwB5f,GAAQ6f,UAJ3C,uBAQA,kBAACvgB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMoiB,MACfphB,UAAWT,GAAQ4f,QACnBtN,UAAWsO,GALb,+BASGM,GACH,kBAACnc,EAAA,EAAD,CAAYtE,UAAWT,GAAQggB,gBAA/B,4BAQN,kBAACoD,GAAA,EAAD,CACE9R,SAAU,SAACzV,EAAGsnB,GAAJ,OAAiBD,GAASrnB,EAAGsnB,EAAU,aACjDA,SAA0B,aAAhB7B,EACV5hB,MAAO,CAACuL,WAAY,UAAWvC,UAAW,QAC1C,kBAAC2a,GAAA,EAAD,CACEC,WAAY,kBAAC,KAAD,MACZ5e,gBAAc,kBACdjJ,GAAG,kBAEH,kBAACsJ,EAAA,EAAD,CAAYtE,UAAWT,GAAQujB,SAA/B,SAEF,kBAACC,GAAA,EAAD,KAEE,kBAACC,GAAA,EAAD,CAAaljB,QAAQ,YACnB,kBAACmjB,GAAA,EAAD,CAAYvT,IAAKiR,EAAUuC,QAAQ,sBAAnC,UACA,kBAACC,GAAA,EAAD,CACElT,MAAO4P,EACPhP,SAAU,SAACzV,GAAD,OAAO0kB,EAAsB1kB,EAAEyO,OAAOoG,QAChDoQ,WAAYA,EACZxO,UAAW0O,MAIZA,GACH,kBAAC1hB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMwhB,GAAe,IAC9BxgB,UAAWT,GAAQ4f,SAJrB,iBASEoB,GACF,kBAAC,IAAM3hB,SAAP,KACE,kBAACC,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMmiB,MACfnhB,UAAWT,GAAQ4f,SAJrB,UASA,kBAACtgB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBA1OrBhD,GAAUgP,WAAW,SAASM,IAAI3L,GAAMnD,eAAe8R,OAAO3B,OAAO,CAAC4E,SAAUsO,SAChFW,GAAe,IA0OHxgB,UAAWT,GAAQ4f,QACnBtN,UAAWsO,GALb,iBAeN,kBAACwC,GAAA,EAAD,CACE9R,SAAU,SAACzV,EAAGsnB,GAAJ,OAAiBD,GAASrnB,EAAGsnB,EAAU,QACjDA,SAA0B,QAAhB7B,EACV5hB,MAAO,CAACuL,WAAY,UAAWvC,UAAW,QAC1C,kBAAC2a,GAAA,EAAD,CACEC,WAAY,kBAAC,KAAD,MACZ5e,gBAAc,kBACdjJ,GAAG,kBAEH,kBAACsJ,EAAA,EAAD,CAAYtE,UAAWT,GAAQujB,SAA/B,aAEF,kBAACC,GAAA,EAAD,KAEE,kBAACC,GAAA,EAAD,CAAaljB,QAAQ,YAEnB,kBAACujB,GAAA,EAAD,CACEpT,MAAO8P,EACPlP,SAAU,SAACzV,GAAD,OAAO4kB,EAAiB5kB,EAAEyO,OAAOoG,QAC3C4B,UAAW0O,MAIZA,GACH,kBAAC1hB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMwhB,GAAe,IAC9BxgB,UAAWT,GAAQ4f,SAJrB,qBASEoB,GACF,kBAAC,IAAM3hB,SAAP,KACE,kBAACC,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMmiB,MACfnhB,UAAWT,GAAQ4f,SAJrB,UASA,kBAACtgB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBA5RrBhD,GAAUgP,WAAW,SAASM,IAAI3L,GAAMnD,eAAe8R,OAAO3B,OAAO,CAAC6E,IAAKuO,SAC3ES,GAAe,IA4RHxgB,UAAWT,GAAQ4f,QACnBtN,UAAWsO,GALb,qBAeN,kBAACwC,GAAA,EAAD,CACE9R,SAAU,SAACzV,EAAGsnB,GAAJ,OAAiBD,GAASrnB,EAAGsnB,EAAU,iBACjDA,SAA0B,iBAAhB7B,EACV5hB,MAAO,CAACuL,WAAY,UAAWvC,UAAW,QAC1C,kBAAC2a,GAAA,EAAD,CACEC,WAAY,kBAAC,KAAD,MACZ5e,gBAAc,kBACdjJ,GAAG,kBAEH,kBAACsJ,EAAA,EAAD,CAAYtE,UAAWT,GAAQujB,SAA/B,eAEF,kBAACC,GAAA,EAAD,CAAuB9jB,MAAO,CAAC+B,QAAS,OAAQ6G,SAAU,SAEtD3H,IACF,yBAAKF,UAAWT,GAAQkgB,SACtB,yBAAKpf,IAAKH,GAASF,UAAWT,GAAQigB,aAAejf,IAAK,kBAIzDggB,GACH,kBAAC1hB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMwhB,GAAe,IAC9BxgB,UAAWT,GAAQ4f,SAJrB,iBASEoB,GACF,kBAAC,IAAM3hB,SAAP,KACE,kBAACC,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAAMmiB,MACfnhB,UAAWT,GAAQ4f,SAJrB,UAQA,kBAACtgB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,kBAzRL,WAEhB,IACIskB,EAAWC,EADXC,GAAkB,EAEtB,GAEEF,EAAY9Z,KAAKC,MAAMD,KAAKE,SAAWuX,EAAaxY,SACpD8a,EAAWtC,EAAaqC,MAERrD,IACduD,GAAkB,EAClBtD,EAAYqD,UAGRC,GA2QmBC,IACfzjB,UAAS,UAAKT,GAAQ4f,QAAb,YAAwB5f,GAAQ6f,UAJ3C,uBAQA,kBAACvgB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,WAxTrBhD,GAAUgP,WAAW,SAASM,IAAI3L,GAAMnD,eAAe8R,OAAO3B,OAAO,CAACxM,gBAAiB8f,KAyT3EjgB,UAAWT,GAAQ4f,QACnBtN,UAAWsO,GALb,2BAkBR,yBAAKlhB,MAAO,CAAC+B,QAAS,SACtB,kBAACnC,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAAS,WApaTlD,IAASmV,OAAOiB,cAClBpW,IAASmV,OAAOmB,UAChB3S,GAAQM,KAAK,YAmaXC,UAAWT,GAAQ+f,YAJrB,YASA,kBAACzgB,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,YACNE,QAAS,WArSbgiB,GAAa,IAsSThhB,UAAWT,GAAQ+f,YAJrB,iBAUA,kBAACb,GAAD,CACA1gB,KAAMgjB,EACNpC,aA3SsB,SAAC+E,GAEzBxe,QAAQC,IAAIue,GACZ1C,GAAa,GAEbhlB,GAAUgP,WAAW,SAASM,IAAI3L,GAAMnD,eAAe8R,OAAO+J,SAC9D5Y,GAAQM,KAAK,UAsSX7C,MAAM,qBACNyB,QAAQ,0EACRugB,cAAc,KACdF,aAAa,e,+GC1VnB,IAAMxf,GAAYoB,aAAW,SAAAC,GAAK,MAAK,CACrCwT,KAAM,CACJ/R,QAAS,IAEXqhB,WAAY,CACVzF,cAAe,SAEjBnZ,MAAO,CACLjG,MAAO,QACPgD,MAAO,KAET8hB,YAAa,CACX9hB,MAAO,OACPT,aAAc,OAEhByD,KAAM,CACJhD,MAAO,QAET+hB,UAAW,CACT3kB,YAAa,QAEf4kB,SAAU,CACRtZ,WAAY,UACZnJ,aAAc,MACdiB,QAAS,OACT2F,UAAW,OAEb8b,UAAW,CACTvZ,WAAY,UACZnJ,aAAc,MACdiB,QAAS,OACT2F,UAAW,OAEb+b,UAAW,CACTllB,MAAO,WAETmlB,QAAS,CACPnlB,MAAO,OAETolB,YAAa,CACX1Z,WAAY,UACZ1L,MAAO,QACPuC,aAAc,MACdS,MAAO,SAETqiB,SAAU,CACR3Z,WAAY,YAID4Z,GA3Of,SAAyBvmB,GAAQ,IAAD,EAEMC,wBAASzB,GAFf,mBAEvBgoB,EAFuB,KAEXC,EAFW,OAGJxmB,oBAAU,GAHN,mBAGhBymB,GAHgB,aAINzmB,mBAAS,IAJH,mBAIvBwe,EAJuB,KAIjBkI,EAJiB,OAMU1mB,oBAAS,uBAcjBzB,IAAtBwB,EAAMue,YAA6Bve,EAAMue,YAAc,MApBnC,mBAMvBhf,EANuB,KAMTqnB,EANS,KAOxBllB,EAAUC,KAEV8Q,EAAWlC,cACXsW,EAAe9kB,aAAY,SAAAzD,GAAK,OAAIA,EAAMY,iBAE1C4nB,EAAkB,WACtBrU,EAAS,CACP5T,KAAM,kBACNU,aAAcA,KAQlBa,qBAAU,WAER,IAAI2mB,EAAwBF,EAAatnB,kBACZf,IAA1BuoB,GAEDH,EAAgBG,KAGjB,IAGH,IAuCMC,EAAa,WAGjB,IAAIC,EAAY1nB,EAAa2nB,MAAM,GAC/BC,EAAMF,EAAUnR,QAAQ0Q,GAExBY,EAAWZ,EACfY,EAAS3I,KAAQA,EAAK7T,OAAS,EAAK6T,EAAK,GAAG4I,cAAgB5I,EAAKyI,MAAM,GAAK,GAI5ED,EAAUE,GAAOC,EAEd3I,EAAK7T,OAAS,GACfvD,QAAQC,IAAI,wBAGdsf,EAAgBK,GAEhBR,OAAcjoB,GACdmoB,EAAQ,IACRD,GAAU,KAEV1mB,EAAMsnB,UAAUL,EAAUrc,QAC1Bkc,KAkBES,EAAiBhoB,EAAavC,KAAI,SAAC8hB,EAAMpU,GAAP,OACtC,kBAAC,IAAM3J,SAAP,CAAgB4I,IAAKe,GACnB,kBAACwL,GAAA,EAAD,CAAU/U,QAAS,kBAtDnBslB,EAFiBe,EAwDkB1I,GAnDnC0I,EAAO/I,KAAQ+I,EAAO/I,KAAK7T,OAAS,EAAK4c,EAAO/I,KAAK,GAAG4I,cAAgBG,EAAO/I,KAAKyI,MAAM,GAAK,QAE/FP,EAAQa,EAAO/I,MAPC,IAAC+I,GAwDyBrlB,UAAY5C,EAAauW,QAAQ0Q,KAAgB9b,EAAM,SAAW,GAAKtJ,MAAO,CAAC2G,UAAW,KAClI,kBAACqO,GAAA,EAAD,CACEC,QAAUyI,EAAKN,MAAQ,KAAOM,EAAKL,QAIrC/T,EAAMnL,EAAaqL,OAAS,GAAK,kBAACwT,GAAA,EAAD,CAASxX,UAAU,WAOxD,OACE,6BAEE,kBAACoE,GAAA,EAAD,CAAM7I,UAAU,OACd8I,WAAS,EACTlH,QAAS,EACTmH,QAAQ,SACR7G,WAAW,UAGb,kBAAC2G,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAAC8L,GAAA,EAAD,CAAMC,OAAO,EAAMjV,UAAWT,EAAQ2c,iBAEnCkJ,OAEgB/oB,IAAfgoB,GAEA,kBAACtQ,GAAA,EAAD,CAAU7R,WAAW,SAASlD,QAAS,kBAjH1B,WAErB,IAAI8lB,EAAY1nB,EAAa2nB,MAAM,GAC/BO,EAAU,CAACjJ,MAAOjf,EAAaqL,OAAS,EAAG6T,KAAM,IACrDwI,EAAU/kB,KAAKulB,GACfhB,EAAcgB,GACdb,EAAgBK,GAEhBP,EAASnnB,EAAaqL,OAAS,GAC/Bkc,IAwGqDY,IAAkBvlB,UAAWT,EAAQ2kB,aAChF,kBAACjQ,GAAA,EAAD,CACEC,QAAQ,qCASA7X,IAAfgoB,GAED,kBAAC,IAAMzlB,SAAP,KAEA,kBAACiK,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAACsc,GAAA,EAAD,CAAW1lB,QAAQ,WAAW6W,MAAM,OAAO8O,gBAAiB,CAACC,QAAQ,GAAOzV,MAAOqM,EAAMzL,SAAW,SAAA1S,GAAK,OAAIqmB,EAAQrmB,EAAM0L,OAAOoG,QAAQ0V,WAAY,SAACC,GAAD,OA9D3I,SAACA,GAEH,UAAXA,EAAGpe,MAELqd,IACAe,EAAGvY,kBAyD+JwY,CAAWD,OAG3K,kBAAC/c,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAAC,KAAD,CAAUlK,QAAS6lB,EAAY7kB,UAAWT,EAAQykB,aAEpD,kBAACnb,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAAC,KAAD,CAAmBlK,QA5HD,WAExB,IAAI8lB,EAAY1nB,EAAa2nB,MAAM,GAC/BC,EAAMF,EAAUnR,QAAQ0Q,GAC5BS,EAAUgB,OAAOd,EAAK,GAEtBP,EAAgBK,GAChBR,OAAcjoB,GAEdmoB,EAAQ,IACRD,GAAU,KACVI,KAiHqD3kB,UAAWT,EAAQ0kB,e,UCvLtE8B,GAAO,aAoDEC,GAlDG,SAAC,GAAD,IAAG/V,EAAH,EAAGA,MAAH,IAAUY,gBAAV,MAAqBkV,GAArB,EAA8BE,EAA9B,4CAChB,6BACG7iB,QAAQ6M,EAAMxH,SACb,gDAAsBwH,EAAMpV,KAAI,SAAAqrB,GAAC,OAAIA,EAAE1a,QAAM2a,KAAK,OAEpD,2BAAOlnB,MAAO,CAEZqD,QAAS,WACTjD,SAAU,WACVsG,SAAU,OACVygB,UAAW,aACX7jB,WAAY,0JACZ8jB,WAAY,6CACZlT,WAAY,MACZmT,WAAY,OACZjlB,aAAc,MACdklB,cAAe,YACfhlB,gBAAiB,UACjBzC,MAAO,QACP0nB,UAAW,yGAdb,eAoBE,2CACMP,EADN,CAEEhnB,MAAO,CAAE+B,QAAS,QAClBtE,KAAK,OACLmU,SAAU,SAAAzV,GACRyV,EAAS,aAAIzV,EAAEyO,OAAO4c,e,qBCyKhC,IAAMjnB,GAAYoB,aAAW,SAAAC,GAAK,MAAK,CACrCwT,KAAM,CACJ/R,QAAS,IAEXqhB,WAAY,CACVzF,cAAe,SAEjBnZ,MAAO,CACLjG,MAAO,QACPgD,MAAO,KAET8hB,YAAa,CACX9hB,MAAO,OACPT,aAAc,OAEhByD,KAAM,CACJhD,MAAO,QAET+hB,UAAW,CACT3kB,YAAa,QAEf4kB,SAAU,CACRtZ,WAAY,UACZnJ,aAAc,MACdiB,QAAS,OACT2F,UAAW,OAEb8b,UAAW,CACTvZ,WAAY,UACZnJ,aAAc,MACdiB,QAAS,OACT2F,UAAW,OAEb+b,UAAW,CACTllB,MAAO,WAETmlB,QAAS,CACPnlB,MAAO,OAETolB,YAAa,CACX1Z,WAAY,UACZ1L,MAAO,QACPuC,aAAc,MACdS,MAAO,SAETqiB,SAAU,CACR3Z,WAAY,YAIDoR,GA/Of,SAAyB/d,GAAQ,IAAD,EAEMC,wBAASzB,GAFf,mBAEvBgoB,EAFuB,KAEXC,EAFW,OAGExmB,mBAAS,IAHX,mBAGvB+d,EAHuB,KAGb6K,EAHa,OAIA5oB,mBAAS,IAJT,mBAIvBge,EAJuB,KAId6K,EAJc,OAKN7oB,mBAAS,IALH,mBAKvB0N,EALuB,KAKjBob,EALiB,OAMQ9oB,oBAAS,kBAa/C,WACE,IAAI+oB,EASJ,OAFAA,EAAmB,QAEWxqB,IAAtBwB,EAAMV,YAA6BU,EAAMV,YAAc0pB,EAvBZC,MANvB,mBAMvB3pB,EANuB,KAMV4pB,EANU,KAOxBxnB,EAAUC,KAEV8Q,EAAWlC,cACXsW,EAAe9kB,aAAY,SAAAzD,GAAK,OAAIA,EAAMY,iBAE1C4nB,EAAkB,WACtBrU,EAAS,CACP5T,KAAM,iBACNS,YAAaA,KAiBjBc,qBAAU,WAER,IAAI4oB,EAAmBnC,EAAavnB,iBACZd,IAArBwqB,GAEDE,EAAeF,KAIhB,IAEH,IAqCMhC,EAAa,WAEjB,IAAIC,EAAY3nB,EAAY4nB,MAAM,GAC9BC,EAAMF,EAAUnR,QAAQ0Q,GAExBY,EAAWZ,EACfY,EAASpJ,SAAWA,EACpBoJ,EAASnJ,QAAUA,EACnBmJ,EAASzZ,KAAOA,EAEhBsZ,EAAUE,GAAOC,EAEjB8B,EAAejC,GAEfR,OAAcjoB,GACdqqB,EAAY,IACZC,EAAW,IACXC,EAAQ,IAER/oB,EAAMsnB,UAAUL,EAAUrc,QAE1Bkc,KAgBE5I,EAAiB5e,EAAYtC,KAAI,SAACmhB,EAAQzT,GAAT,OACrC,kBAAC,IAAM3J,SAAP,CAAgB4I,IAAKe,GACnB,kBAACwL,GAAA,EAAD,CAAU/U,QAAS,kBA9CnBslB,EAFiBe,EAgDkBrJ,GA5CnC0K,EAAYrB,EAAOxJ,UACnB8K,EAAWtB,EAAOvJ,cAClB8K,EAAQvB,EAAO7Z,MANC,IAAC6Z,GAgD2BrlB,UAAY7C,EAAYwW,QAAQ0Q,KAAgB9b,EAAM,SAAW,GAAKtJ,MAAO,CAAC2G,UAAW,KACnI,kBAACqO,GAAA,EAAD,CACEC,QAAU8H,EAAOH,SAAW,IAAMG,EAAOF,QAAU,IAAME,EAAOxQ,QAIlEjD,EAAMpL,EAAYsL,OAAS,GAAK,kBAACwT,GAAA,EAAD,CAASxX,UAAU,WAKvD,OACE,6BAEE,kBAACoE,GAAA,EAAD,CAAM7I,UAAU,OACd8I,WAAS,EACTlH,QAAS,EACTmH,QAAQ,SACR7G,WAAW,UAGb,kBAAC2G,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACb,kBAAC8L,GAAA,EAAD,CAAMC,OAAO,EAAMjV,UAAWT,EAAQ2c,iBAEnCH,OAEgB1f,IAAfgoB,GAEA,kBAACtQ,GAAA,EAAD,CAAU7R,WAAW,SAASlD,QAAS,kBAxG3B,WAEpB,IAAI8lB,EAAY3nB,EAAY4nB,MAAM,GAC9BO,EAAU,CAAC9Z,KAAM,GAAIqQ,SAAU,GAAIC,QAAS,IAChDgJ,EAAU/kB,KAAKulB,GACfhB,EAAcgB,GACdyB,EAAejC,GAEfH,IAgGqDqC,IAAiBhnB,UAAWT,EAAQ2kB,aAC/E,kBAACjQ,GAAA,EAAD,CACEC,QAAQ,oCAQA7X,IAAfgoB,GAED,kBAAC,IAAMzlB,SAAP,KAEA,kBAACiK,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAACsc,GAAA,EAAD,CAAWyB,UAAQ,EAACnnB,QAAQ,WAAW6W,MAAM,WAAQ8O,gBAAiB,CAACC,QAAQ,GAAOzV,MAAO4L,EAAUhL,SAAW,SAAA1S,GAAK,OAAIuoB,EAAYvoB,EAAM0L,OAAOoG,MAAMiX,mBAE5J,kBAACre,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAACsc,GAAA,EAAD,CAAW1lB,QAAQ,WAAW6W,MAAM,UAAO8O,gBAAiB,CAACC,QAAQ,GAAOzV,MAAO6L,EAASjL,SAAW,SAAA1S,GAAK,OAAIwoB,EAAWxoB,EAAM0L,OAAOoG,MAAMiX,mBAEhJ,kBAACre,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAACsc,GAAA,EAAD,CAAWyB,UAAQ,EAACnnB,QAAQ,WAAW6W,MAAM,aAAa8O,gBAAiB,CAACC,QAAQ,GAAOzV,MAAOzE,EAAMqF,SAAW,SAAA1S,GAAK,OAAIyoB,EAAQzoB,EAAM0L,OAAOoG,MAAMiX,gBAAgBvB,WAAY,SAACC,GAAD,OA/DxK,SAACA,GAEH,UAAXA,EAAGpe,MACLqd,IACAe,EAAGvY,kBA2D4LwY,CAAWD,OAExM,kBAAC/c,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAAC,KAAD,CAAiBlK,QAAS6lB,EAAY7kB,UAAWT,EAAQykB,aAE3D,kBAACnb,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAAC,KAAD,CAAmBlK,QAxHF,WAEvB,IAAI8lB,EAAY3nB,EAAY4nB,MAAM,GAC9BC,EAAMF,EAAUnR,QAAQ0Q,GAC5BS,EAAUgB,OAAOd,EAAK,GAEtB+B,EAAejC,GACfR,OAAcjoB,GAEdqqB,EAAY,IACZC,EAAW,IACXC,EAAQ,IAERjC,KA2GoD3kB,UAAWT,EAAQ0kB,eC5JvEvb,GAAUxB,EAAQ,IAiZtB,IAAM1H,GAAYoB,aAAW,SAAAC,GAAK,MAAK,CACrCwT,KAAM,CACJ/R,QAAS,IAEXqhB,WAAY,CACVzF,cAAe,SAEjBnZ,MAAO,CACLjG,MAAO,QACPgD,MAAO,KAET8hB,YAAa,CACX9hB,MAAO,OACPT,aAAc,OAEhByD,KAAM,CACJhD,MAAO,QAET+hB,UAAW,CACT3kB,YAAa,OACbiU,WAAY,QAEd2Q,SAAU,CACRtZ,WAAY,UACZnJ,aAAc,MACdiB,QAAS,OACT2F,UAAW,OAEb8b,UAAW,CACTvZ,WAAY,UACZnJ,aAAc,MACdiB,QAAS,OACT2F,UAAW,OAEb+b,UAAW,CACTllB,MAAO,WAETmlB,QAAS,CACPnlB,MAAO,OAETolB,YAAa,CACX1Z,WAAY,WAEd2Z,SAAU,CACR3Z,WAAY,QAEdxC,QAAS,CACPhH,QAAS,OACTmB,eAAgB,cAILglB,GAncf,SAAoBtpB,GAAQ,IAAD,EAECiF,IAAMhF,SAAS,IAFhB,mBAElBZ,EAFkB,KAEXkqB,EAFW,OAGCtkB,IAAMhF,SAAS,IAHhB,mBAGlB2oB,EAHkB,KAGXY,EAHW,OAICvkB,IAAMhF,cAASzB,GAJhB,mBAIlBgB,EAJkB,KAIXiqB,EAJW,OAKLxkB,IAAMhF,cAASzB,GALV,mBAKlBrB,EALkB,KAKdusB,EALc,OAMazkB,IAAMhF,UAAS,GAN5B,mBAMlB0pB,EANkB,KAMLC,EANK,OAOD3kB,IAAMhF,UAAS,GAPd,mBAOlB4pB,EAPkB,KAOZC,EAPY,OAQW7kB,IAAMhF,SAAS,GAR1B,mBAQlBuiB,EARkB,KAQNC,EARM,KASnBK,EAAW7d,IAAM8d,OAAO,MATL,EAUH9d,IAAMhF,SAAS,QAVZ,mBAcnByB,GAdmB,UAcTC,MACV8Q,EAAWlC,cACXzO,EAAQC,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eACnCF,EAAY8O,yBACZ4Z,EAAe9kB,aAAY,SAAAzD,GAAK,OAAIA,EAAMY,iBAC1C0C,EAAUC,cAnBS,EAuBCoD,IAAMhF,SAAS,CACvCZ,OAAO,EACPC,aAAa,EACbwf,MAAM,EACNtf,OAAO,IA3BgB,mBAuBlBuqB,EAvBkB,KAuBXC,EAvBW,KA8BnBC,EAAY,SAAA9gB,GAChBsJ,EAAS,CACP5T,KAAM,WACNW,MAAO2J,KASXlE,IAAM7E,WAAU,WACdqiB,EAAcK,EAASa,QAAQC,kBAENplB,GAAtBqoB,EAAaxnB,QAEdkqB,EAAS1C,EAAaxnB,OACtB2qB,EAAS,eAAKD,EAAN,eAAc,SAAU,WAGFvrB,GAA7BqoB,EAAatnB,cAEd2qB,EAAsBrD,EAAatnB,aAAaqL,aAGnBpM,GAA5BqoB,EAAavnB,aAEd6qB,EAAqBtD,EAAavnB,YAAYsL,UAG/C,IAEH,IAoKIwf,EAxJED,EAAuB,SAAAvf,GAC3Bof,EAAS,eAAKD,EAAN,eAAc,cAAgBnf,EAAS,MAG3Csf,EAAwB,SAAAtf,GAC5Bof,EAAS,eAAKD,EAAN,eAAc,OAASnf,EAAS,MAwBpCyf,GAAc,SAAC7hB,GAKnBohB,GAAe,GAEf,IAIIU,EAJarsB,KAASQ,UACGoT,IAAI,UAAYxS,EAAQ,cAGxBkrB,UAAU/qB,EAAO,YAE9C8qB,EAAWE,GAAG,iBAAiB,SAASjZ,OACrC,SAAS5C,OACT,WAED2b,EAAW/Y,SAASM,IAAIuS,iBAAiB5V,MAAK,SAASic,GACrDjiB,EAASiiB,UAuGXC,GAAoB7D,EAAa1nB,SAAY,aAAY,aACzDwrB,GAAsB9D,EAAa1nB,SAAY,kBAAiB,YAEhEyrB,KA7LMb,EAAM1qB,OAAS0qB,EAAMzqB,aAAeyqB,EAAMjL,MAAQiL,EAAMvqB,OAkMhE4qB,EAFgB,GAAfT,GAAgC,GAARE,EAEP,kBAAC7oB,EAAA,EAAD,CAChBiB,QAAQ,YACRhB,MAAM,UACNka,UAAW,kBAAC,KAAD,MACXha,QA9GiB,WAUnB,QAA2B3C,GAAxBsD,EAAMnD,eAAT,CAMA,IAAIiE,EAAWd,EAAMnD,eAAeiE,SAChCioB,EAAchE,EAAaxnB,MAMzByrB,EAAW3sB,EAAUgP,WAAW,WAAWM,MAG7Csd,EAAc5sB,EAAUgP,WAAW,SAASM,IAAI3L,EAAMnD,eAAe8R,OAGzE,GAA4B,GAAzBoW,EAAa1nB,SAGdkrB,IAAY,SAASW,GAEnB,IAAIP,EAAcO,EAGlBF,EAASlX,IAAI,CACX9J,KAAMlH,EACNvD,MAAOwrB,EACP1hB,IAfM,aAgBNC,QAASqhB,EACTnrB,YAAaunB,EAAavnB,YAC1Bif,YAAasI,EAAatnB,aAC1B2gB,SAAU6K,IACTvc,MAAK,SAACyc,GAEP5jB,QAAQC,IAAK,0CACbsiB,GAAe,GACfE,GAAQ,MAIVJ,EAAMoB,EAAS3tB,WAIZ,CAGL,IAAI+tB,EAAc,CAChB7rB,MAAOwrB,EACPvrB,YAAaunB,EAAavnB,YAC1Bif,YAAasI,EAAatnB,mBAIff,GAATgB,GAEFrB,EAAUgP,WAAW,WAAWM,IAAIoZ,EAAaznB,WAAW0P,OAAOoc,GACnEtB,GAAe,GACfE,GAAQ,IAGRO,IAAY,SAASW,GAEnBE,EAAY9hB,QAAU4hB,EACtB7sB,EAAUgP,WAAW,WAAWM,IAAIoZ,EAAaznB,WAAW0P,OAAOoc,GAEnEtB,GAAe,GACfE,GAAQ,MAMZJ,EAAM7C,EAAaznB,iBA3EnBsV,MAAM,8BAoGNV,SAAU4W,IAETD,IAGoB,GAAfhB,EAEU,yBAAKxnB,UAAWT,EAAQyI,SAAU,kBAAC,GAAD,CAASwD,KAAK,sBAAsB1M,MAAM,UAAU2M,OAAO,UAG7F,kBAAC5M,EAAA,EAAD,CAChBiB,QAAQ,YACRhB,MAAM,UACNE,QA/Be,WACjBS,EAAQM,KAAK,WAAa7C,EAAQ,IAAMlC,KAgCrCutB,GALe,sBASpB,IAAIS,GAActE,EAAa1nB,SAAY,kBAAiB,mBAQ5D,OAGE,6BACE,4BAAKgsB,IAEL,8BAEA,kBAACngB,GAAA,EAAD,CACEC,WAAS,EACTlH,QAAS,EACTmH,QAAQ,SACR7G,WAAW,UAIX,kBAAC2G,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACf,kBAAC8Z,GAAA,EAAD,CAAaljB,QAAQ,YACnB,kBAACmjB,GAAA,EAAD,CAAYvT,IAAKiR,EAAUuC,QAAQ,sBAAnC,uBACA,kBAACC,GAAA,EAAD,CACElT,MAAO/S,EACP2T,SA/NW,SAAA1S,GAEnB,IAAI8R,EAAQ9R,EAAM0L,OAAOoG,MACzBmX,EAASnX,GACT4X,EAAS,eAAKD,EAAN,eAAc,QAAU3X,EAAMxH,OAAS,KAE/C6H,EAAS,CACP5T,KAAM,WACNQ,MAAO+S,KAwNDoQ,WAAYA,MAMhB,kBAACxX,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACf,kBAACyZ,GAAA,EAAD,CAAgB1jB,MAAO,CAACuL,WAAY,UAAWvC,UAAW,QACxD,kBAAC2a,GAAA,EAAD,CACEC,WAAY,kBAAC,KAAD,MACZzjB,aAAW,SACX6E,gBAAc,8BACdjJ,GAAG,8BAGL,kBAACiuB,GAAA,EAAD,CAAWxkB,UAAU,SAASzE,UAAWT,EAAQskB,WAAjD,iBAGA,kBAACd,GAAA,EAAD,KACE,kBAAC,GAAD,CAAiBoC,UAAW6C,OAMhC,kBAACnf,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACf,kBAACyZ,GAAA,EAAD,CAAgB1jB,MAAO,CAACuL,WAAY,YAClC,kBAACoY,GAAA,EAAD,CACEC,WAAY,kBAAC,KAAD,MACZzjB,aAAW,SACX6E,gBAAc,8BACdjJ,GAAG,8BAEL,kBAACiuB,GAAA,EAAD,CAAWxkB,UAAU,SAASzE,UAAWT,EAAQskB,WAAjD,gBAGA,kBAACd,GAAA,EAAD,KACE,kBAAC,GAAD,CAAiBoC,UAAW4C,OAMhC,kBAAClf,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,IACf,kBAACyZ,GAAA,EAAD,CAAgB1jB,MAAO,CAACuL,WAAY,YAClC,kBAACoY,GAAA,EAAD,CACEC,WAAY,kBAAC,KAAD,MACZzjB,aAAW,SACX6E,gBAAc,8BACdjJ,GAAG,8BAEL,kBAACiuB,GAAA,EAAD,CAAWxkB,UAAU,SAASzE,UAAWT,EAAQskB,WAAjD,eAGA,kBAACd,GAAA,EAAD,KAEQ,kBAACla,GAAA,EAAD,CAAMC,WAAS,EAAClH,QAAS,GACvB,kBAACiH,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,EAAGjK,MAAO,CACrB+B,QAAS,OACTiJ,aAAc,SAElB,kBAAC,GAAD,CAAWgG,MAAOwW,EAAO5V,SAzQzB,SAAC4V,GACjBoB,EAAS,eAAKD,EAAN,eAAc,SAAU,KAChCP,EAASZ,GAET,IAAIyC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAAShuB,GACvBksB,EAASlsB,EAAEyO,OAAOhD,QAClBihB,EAAU1sB,EAAEyO,OAAOhD,SAGrBqiB,EAAOG,cAAc5C,EAAM,IAC3BqB,cAkQyBzrB,GAATgB,GACF,kBAAC,IAAMuB,SAAP,KACE,kBAACiK,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,yBAAK7I,IAAKhD,EAAOkD,IAAK,cAAeP,UAAWT,EAAQqkB,eAE1D,kBAAC/a,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACb,kBAACrK,EAAA,EAAD,CACEiB,QAAQ,YACRhB,MAAM,UACNE,QAxQD,WACnB6oB,EAAS,eAAKD,EAAN,eAAc,SAAU,KAChCP,EAAS,IACTC,OAASjrB,IAsQW4C,MAAO,CAACqnB,WAAY,QAJtB,sBAsBhB,yBAAKtmB,UAAWT,EAAQwkB,WACtB,kBAAClb,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAAS7G,WAAW,UAC5C,kBAAC2G,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GACd+e,QCrZHqB,GAAclmB,QACW,cAA7B+J,OAAO9H,SAASkkB,UAEe,UAA7Bpc,OAAO9H,SAASkkB,UAEhBpc,OAAO9H,SAASkkB,SAASC,MACvB,2DAIKC,IAAa,EA0CxB,SAASC,GAAgBC,EAAOC,GAC9BC,UAAUC,cACPC,SAASJ,GACTtd,MAAK,SAAA2d,GACJA,EAAaC,cAAgB,WAE3BR,IAAa,EACbtc,OAAO9H,SAAS6kB,SAEhB,IAAMC,EAAmBH,EAAaI,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBhuB,QACf0tB,UAAUC,cAAcQ,YAa1BplB,QAAQC,IACN,iHAKEykB,GAAUA,EAAOW,UACnBX,EAAOW,SAASP,KAMlB9kB,QAAQC,IAAI,sCAGRykB,GAAUA,EAAOY,WACnBZ,EAAOY,UAAUR,WAO5Bzd,OAAM,SAAAC,GACLtH,QAAQsH,MAAM,4CAA6CA,MCrFjEtF,EAAQ,KAAU0iB,SAElB,IAGIa,GAgKJ,SAASC,KAAiB,IAAD,EAEG5nB,IAAMhF,SAAS,WAFlB,mBAEhBmS,EAFgB,KAETsG,EAFS,KAIjB9W,EAAUC,cACVH,EAAUC,KACVklB,EAAe9kB,aAAY,SAAAzD,GAAK,OAAIA,EAAMY,iBAC1CuT,EAAWlC,cAgCjB,OAEE,kBAACuc,EAAA,EAAD,CAAkB1a,MAAOA,EAAOY,SAAW,SAACC,EAAIb,GAAL,OAhCrB,WAA4B,wDAAC,IAAT2a,EAAQ,uCAClDrU,EAASqU,GACTnrB,EAAQM,KAAK,IAAM6qB,GAGnBta,EAAS,CACP5T,KAAM,kBACNU,kBAAcf,IAGhBiU,EAAS,CACP5T,KAAM,iBACNS,iBAAad,IAGfiU,EAAS,CACP5T,KAAM,WACNQ,WAAOb,IAGC,UAAPuuB,GAA4C,GAAzBlG,EAAa1nB,UACjCsT,EAAS,CACP5T,KAAM,cACNM,UAAU,IAS4C6tB,CAAgB/Z,EAAKb,IAASjQ,UAAWT,EAAQurB,YACzG,kBAACC,EAAA,EAAD,CAAwBpU,MAAM,WAAQ1G,MAAM,OAAOlI,KAAM,kBAAC,IAAD,QACzD,kBAACgjB,EAAA,EAAD,CAAwBpU,MAAM,YAAY1G,MAAM,SAASlI,KAAM,kBAAC,IAAD,QAC/D,kBAACgjB,EAAA,EAAD,CAAwBpU,MAAM,UAAU1G,MAAM,UAAUlI,KAAM,kBAAC,IAAD,QAC9D,kBAACgjB,EAAA,EAAD,CAAwBpU,MAAM,SAAS1G,MAAM,QAAQlI,KAAM,kBAAC,IAAD,SA5MjEoF,OAAO6d,iBAAiB,uBAAuB,SAAC5vB,IAE9CqvB,GAAiBrvB,GACF6vB,SAGfR,GAAeS,WACZ7e,MAAK,SAAC8e,GACwB,aAAzBA,EAAaC,QACflmB,QAAQC,IAAI,iCAEZD,QAAQC,IAAI,kCAEdslB,GAAiB,WAwMvB,IAAMjrB,GAAYoB,YAAW,CAC3ByT,KAAM,CACJ/R,QAAS,GACT6H,WAAY,QAEdkhB,cAAe,CACblhB,WAAY,OACZmhB,cAAe,QAEjBC,OAAQ,CACNnqB,SAAU,QACVoqB,KAAM,EACNC,OAAQ,EACR3pB,MAAO,OACPd,QAAS,OACTmB,eAAgB,UAElBupB,UAAW,CACTtqB,SAAU,QACVoqB,KAAM,EACNG,IAAK,EACL7pB,MAAO,OACP8pB,OAAQ,IAEVC,WAAY,CACV/sB,MAAO,SAETgsB,WAAY,CACVhpB,MAAO,OAMIgqB,GAnOf,SAAajuB,GAAQ,IAAD,EAEQiF,IAAMhF,SAAS,WAFvB,gCAGcgF,IAAMhF,UAAS,IAH7B,gCAI8BgF,IAAMhF,UAAS,IAJ7C,mBAIXiuB,EAJW,KAIOC,EAJP,KAMZzsB,EAAUC,KACV8Q,EAAWlC,cACX6d,EAAarsB,aAAY,SAAAzD,GAAK,OAAIA,EAAMmB,eAGxCtB,GAFQ4D,aAAY,SAAAzD,GAAK,OAAIA,EAAMD,eAEvB4O,0BAsFlB,OApFA7M,qBAAU,YAIwB,IAA7B6rB,IACDkC,GAAoB,KAGrB,CAAClC,KAGJ7rB,qBAAU,WAIRnC,IAASmV,OAAOib,oBAAmB,SAAAvkB,GAIjC,GAAIA,EAAO,CAET,IAAMwkB,EAAaxkB,EAAK2G,MAElB6C,EAAWnV,EAAUgP,WAAW,SAASM,IAAI6gB,GAEnDhb,EAAS/E,MACRC,MAAK,SAAC+E,GACDA,EAAY9E,OACd6E,EAASjG,YAAW,SAACI,GAEnBpG,QAAQC,IAAI,4BAGZmL,EAAS,CACP5T,KAAM,cACNF,eAAgB8O,EAAIC,YAKxBrG,QAAQC,IAAI,wCAKhBmL,EAAS,CACP5T,KAAM,UACNH,UAAWoL,SAOb2I,EAAS,CACP5T,KAAM,UACNiL,UAAMtL,IAKViU,EAAS,CAAE5T,KAAMiL,EAAO,SAAW,iBAIpC,IAoBD,yBAAK3H,UAAU,QAGb,6BAEE,yBAAKA,UAAWT,EAAQmsB,WACxB,kBAAC,GAAD,CAAYnuB,SAAU0uB,EAAW1uB,SAAUgI,aAlB5B,WAAiC,wDAAC,IAAdkR,EAAa,uCAEpDvR,QAAQC,IAAI,SAAWsR,EAAW,SAmB9B,yBAAKzW,UAAWT,EAAQ8rB,eAEtB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOe,KAAK,SAAS3nB,UAAW4nB,KAChC,kBAAC,IAAD,CAAOD,KAAK,YAAY3nB,UAAWkb,KACnC,kBAAC,IAAD,CAAOyM,KAAK,yBAAyB3nB,UAAWoS,KAChD,kBAAC,IAAD,CAAOuV,KAAK,UAAU3nB,UAAW0iB,KACjC,kBAAC,IAAD,CAAOiF,KAAK,WAAW3nB,UAAW6P,KAClC,kBAAC,IAAD,CAAO8X,KAAK,SAAS3nB,UAAWmJ,KAChC,kBAAC,IAAD,CAAOwe,KAAK,2BAA2B3nB,UAAW2Y,KAClD,kBAAC,IAAD,CAAOgP,KAAK,UAAU3nB,UAAW0Z,KACjC,kBAAC,IAAD,CAAOiO,KAAK,QAAQ3nB,UAAWkG,KAC/B,kBAAC,IAAD,CAAOyhB,KAAK,SAAS3nB,UAAWmJ,KAChC,kBAAC,IAAD,CAAOnJ,UAAWkG,MAIpB,kBAAC/M,EAAD,CAAYG,KAAMguB,EAAkB7tB,YA3CxB,SAACzB,GACnBuvB,GAAoB,IA0CgDrtB,QAhCjD,mFAgC0ElC,OAAQ,MAGjG,yBAAKuD,UAAWT,EAAQgsB,QACtB,kBAACb,GAAD,UCtKJ4B,GAAiB,CACrBC,OAFcC,0CAGdC,WAAY,sCACZC,YAAa,6CACbC,UAAW,sBACXC,cAAe,kCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gBAQjBjxB,IAASkxB,cAAcV,IACvBxwB,IAASE,YAET,IACM2D,GAAQstB,YAAYrxB,EADL,IAIfsxB,GAAW,CACfpxB,aACA8tB,OAdgB,CAChBuD,YAAa,YACbC,wBAAwB,GAaxB9c,SAAU3Q,GAAM2Q,SAChB+c,mDA+BIC,GAAc3E,SAAS4E,eAAe,QAC5CC,IAASC,OAEP,mBA9BiB,WAcjB,OACE,kBAAC,IAAD,CAAU9tB,MAAOA,IACf,kBAAC,6BAA+ButB,GAC9B,kBAAC,IAAD,KACE,kBAAC,GAAD,WAYR,MACAI,IFpDK,SAAkB1D,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAI6D,IAAIlB,GAAwBrf,OAAO9H,SAASuE,MACpD+jB,SAAWxgB,OAAO9H,SAASsoB,OAIvC,OAGFxgB,OAAO6d,iBAAiB,QAAQ,WAC9B,IAAMrB,EAAK,UAAM6C,GAAN,sBAEPlD,KA6EV,SAAiCK,EAAOC,GAEtCgE,MAAMjE,GACHtd,MAAK,SAAAwhB,GAEJ,IAAMC,EAAcD,EAASE,QAAQ3hB,IAAI,gBAEnB,MAApByhB,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYna,QAAQ,cAG5CkW,UAAUC,cAAcmE,MAAM5hB,MAAK,SAAA2d,GACjCA,EAAakE,aAAa7hB,MAAK,WAC7Bc,OAAO9H,SAAS6kB,gBAIpBhlB,QAAQC,IAAI,4CACZukB,GAAgBC,EAAOC,OAG1Brd,OAAM,WACLrH,QAAQC,IACN,oEAlGAgpB,CAAwBxE,EAAOC,GAI/BC,UAAUC,cAAcmE,MAAM5hB,MAAK,WACjCnH,QAAQC,IACN,iHAMJukB,GAAgBC,EAAOC,OEiC/BE,K","file":"static/js/main.b9c0832b.chunk.js","sourcesContent":["var map = {\n\t\"./temp_food1.jpg\": 289,\n\t\"./temp_food2.jpg\": 527,\n\t\"./temp_food3.jpg\": 528,\n\t\"./temp_food4.jpg\": 529,\n\t\"./temp_food5.jpg\": 530\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 202;","module.exports = __webpack_public_path__ + \"static/media/temp_food1.cd514d13.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/temp_food2.03e2fd15.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food3.c3c706f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food4.af2bb629.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food5.758c2926.jpg\";","import {combineReducers} from \"redux\";\r\nimport {firebaseReducer} from \"react-redux-firebase\";\r\nimport {firestoreReducer} from \"redux-firestore\";\r\nexport const rootReducer = combineReducers({\r\n    firebase: firebaseReducer,\r\n    firestore: firestoreReducer,\r\n    fireReducer: fireReducer,\r\n    testReducers: testreducer,\r\n    uploadReducer: uploadReducer,\r\n    userReducer: userReducer,\r\n    dragReducer: dragReducer\r\n});\r\n\r\nfunction testreducer(state = { num: 0, url: \"hey\" }, action) {\r\n    switch (action.type) {\r\n      case \"INCREMENT\":\r\n        return {\r\n          ...state,\r\n          num: state.num + action.step\r\n        };\r\n      case \"DECREMENT\":\r\n        return {\r\n          ...state,\r\n          num: state.num - action.step\r\n        };\r\n      default:\r\n        return state;\r\n      case \"SETURL\":\r\n        return {\r\n          ...state,\r\n          url: state.url\r\n        };\r\n    }\r\n  }\r\n  \r\n  function uploadReducer(state = { editmode: false, recipe_id: undefined, title: undefined, ingredients: undefined, descriptions: undefined, image: undefined }, action) {\r\n    switch (action.type) {\r\n        case \"SETTITLE\":\r\n          return {\r\n            ...state,\r\n            title: action.title\r\n          };\r\n        case \"SETINGREDIENTS\":\r\n          return {\r\n            ...state,\r\n            ingredients: action.ingredients\r\n          };\r\n        case \"SETDESCRIPTIONS\":\r\n          return {\r\n            ...state,\r\n            descriptions: action.descriptions\r\n          };\r\n        case \"SETIMAGE\":\r\n          return {\r\n            ...state,\r\n            image: action.image\r\n          };\r\n        case \"SETEDITMODE\":\r\n          return {\r\n            ...state,\r\n            editmode: action.editmode,\r\n            recipe_id: action.recipe_id,\r\n          };\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  \r\n  function userReducer(state = { signedIn: false }, action) {\r\n    switch (action.type) {\r\n      case \"SIGNIN\":\r\n        return {\r\n          ...state,\r\n          signedIn: true\r\n        };\r\n      case \"SIGNOUT\":\r\n        return {\r\n          ...state,\r\n          signedIn: false\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  \r\n  function fireReducer(state = { db: undefined, storage: undefined, auth_user: undefined, firestore_user: undefined }, action) {\r\n    switch (action.type) {\r\n      case \"SETDB\":\r\n        return {\r\n          ...state,\r\n          db: action.db\r\n        };\r\n      case \"SETSTORAGE\":\r\n        return {\r\n          ...state,\r\n          storage: action.storage\r\n        };\r\n      case \"SETUSER\":\r\n        return {\r\n          ...state,\r\n          auth_user: action.auth_user\r\n        };\r\n      case \"SETFIREUSER\":\r\n        return {\r\n          ...state,\r\n          firestore_user: action.firestore_user\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  \r\n  function dragReducer(state = { isDragging: false, draggableId: undefined, enableDrag: false }, action) {\r\n    switch (action.type) {\r\n      case \"SETISDRAGGING\":\r\n        return {\r\n          ...state,\r\n          isDragging: action.isDragging\r\n        };\r\n      case \"SETDRAGGABLEID\":\r\n        return {\r\n          ...state,\r\n          draggableId: action.draggableId\r\n        };\r\n      case \"SETENABLEDRAG\":\r\n        return {\r\n          ...state,\r\n          enableDrag: action.enableDrag\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  }","import React, {useState, useEffect} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nexport default function MySnackbar(props) {\r\n\r\n  const [open, setOpen] = useState(props.open);\r\n\r\n  useEffect(() => {\r\n    setOpen(props.open);\r\n  }, [props.open]);\r\n\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n\r\n\r\n    setOpen(false);\r\n    props.handleClose();\r\n  };\r\n\r\n  const handleAction = () => {\r\n\r\n    setOpen(false);\r\n    props.handleClose(\"remove\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n        message={props.message}\r\n        action={\r\n          <React.Fragment>\r\n            <Button color=\"secondary\" size=\"small\" onClick={handleAction} style={{marginRight: '25px'}}>\r\n              {props.action}\r\n            </Button>\r\n            <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </React.Fragment>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import AppBar from '@material-ui/core/AppBar';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport LinkUI from '@material-ui/core/Link';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { default as AccountCircle, default as AccountCircleIcon } from '@material-ui/icons/AccountCircle';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\nfunction TopMenuBar(props) {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const isMenuOpen = Boolean(anchorEl);\r\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n\r\n\r\n  const handleProfileMenuOpen = event => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMobileMenuClose = () => {\r\n    setMobileMoreAnchorEl(null);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n    handleMobileMenuClose();\r\n  };\r\n\r\n  const handleMobileMenuOpen = event => {\r\n    setMobileMoreAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleSearchFocus = () => {\r\n    if(history.location.pathname !== \"/search\")\r\n      history.push(\"/search\")\r\n  };\r\n\r\n  const menuId = 'primary-search-account-menu';\r\n  const renderMenu = (\r\n    <Menu\r\n      anchorEl={anchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMenuOpen}\r\n      onClose={handleMenuClose}\r\n    >\r\n      <MenuItem onClick={handleMenuClose}>Profile</MenuItem>\r\n      <MenuItem onClick={handleMenuClose}>My account</MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  const mobileMenuId = 'primary-search-account-menu-mobile';\r\n  const renderMobileMenu = (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMobileMenuOpen}\r\n      onClose={handleMobileMenuClose}\r\n    >\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\r\n          <Badge badgeContent={4} color=\"secondary\">\r\n            <MailIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Messages</p>\r\n      </MenuItem>\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 11 new notifications\" color=\"inherit\">\r\n          <Badge badgeContent={11} color=\"secondary\">\r\n            <NotificationsIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Notifications</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleProfileMenuOpen}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n        <p>Profile</p>\r\n      </MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n\r\n          <div className={classes.sectionMobile}>\r\n            <IconButton\r\n              edge=\"start\"\r\n              className={classes.menuButton}\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              onClick={ () => history.goBack() }\r\n            >\r\n              <ArrowBackIosIcon />\r\n            </IconButton>\r\n          </div>\r\n\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n\r\n            <LinkUI component={Link} to=\"/home\" style={{ textDecoration: 'none', color: 'white' }}>\r\n              Campuskost\r\n            </LinkUI>\r\n          </Typography>\r\n          <div className={classes.search}>\r\n            <div className={classes.searchIcon}>\r\n              <SearchIcon />\r\n            </div>\r\n            <InputBase\r\n              placeholder=\"Search…\"\r\n              classes={{\r\n                root: classes.inputRoot,\r\n                input: classes.inputInput,\r\n              }}\r\n              inputProps={{ 'aria-label': 'search' }}\r\n              onBlur={() => console.log(\"onBlur\")}\r\n              onFocus={() => handleSearchFocus()}\r\n            />\r\n          </div>\r\n          <div className={classes.grow} />\r\n          <div className={classes.sectionDesktop}>\r\n          <ProfileBtn signedIn={props.signedIn} handleChange={props.handleChange}/>\r\n          </div>\r\n\r\n          <div className={classes.sectionMobile}>\r\n          <ProfileBtn signedIn={props.signedIn} handleChange={props.handleChange}/>\r\n          </div>\r\n\r\n        </Toolbar>\r\n      </AppBar>\r\n      {renderMobileMenu}\r\n      {renderMenu}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction ProfileBtn (props) {\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  let btn = (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => history.push(\"/login\")}\r\n        className={classes.buttonPad}\r\n      >\r\n        logga in\r\n      </Button>\r\n    </div> );\r\n\r\n  // make sure info is loaded\r\n  let img_src = (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : undefined;\r\n\r\n  // if user has no profile image set in firebase\r\n  /*\r\n  if (img_src === undefined) {\r\n    img_src = <AccountCircleIcon/>;\r\n  } */\r\n\r\n  let icon_content = (img_src !== undefined) ? <img src={img_src} className={classes.smallprofileimage} alt={\"profile img\"} /> : <AccountCircleIcon/>;\r\n\r\n  let jsx_content = props.signedIn ? icon_content : btn;\r\n\r\n  if(props.signedIn === true && store.firestore_user)\r\n  {\r\n    return (\r\n      <React.Fragment>\r\n      <p style={{marginRight: 15, color: 'rgba(255,255,255,0.5)'}}> {store.firestore_user.username} </p>\r\n      <IconButton\r\n        edge=\"start\"\r\n        className={classes.menuButton}\r\n        color=\"inherit\"\r\n        aria-label=\"open profile\"\r\n        onClick={() => history.push(\"/profile/\" + store.firestore_user.username)}\r\n      >\r\n      {jsx_content} </IconButton></React.Fragment>\r\n\r\n    );\r\n  } else {\r\n    return btn;\r\n  }\r\n\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n    //marginBottom: '50px'\r\n  },\r\n  menuButton: {\r\n    marginRight: 0, // theme.spacing(2),\r\n  },\r\n  title: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing(3),\r\n      width: 'auto',\r\n    },\r\n  },\r\n  searchIcon: {\r\n    width: theme.spacing(7),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 7),\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    [theme.breakpoints.up('md')]: {\r\n      width: 200,\r\n    },\r\n  },\r\n  sectionDesktop: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'flex',\r\n    },\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  whiteColor: {\r\n    color: 'white'\r\n  },\r\n  buttonPad: {\r\n    padding: '6px',\r\n    fontSize: 'small'\r\n  },\r\n  smallprofileimage: {\r\n    width: '40px'\r\n  }\r\n}));\r\n\r\nexport default TopMenuBar;\r\n","import GridListTile from '@material-ui/core/GridListTile';\r\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport MySnackbar from '../components/snackbar';\r\n\r\nfunction useLongPress(callback = () => {}, ms = 300) {\r\n  const [startLongPress, setStartLongPress] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let timerId;\r\n    if (startLongPress) {\r\n      timerId = setTimeout(callback, ms);\r\n    } else {\r\n      clearTimeout(timerId);\r\n    }\r\n\r\n    return () => {\r\n      clearTimeout(timerId);\r\n    };\r\n  }, [startLongPress]);\r\n\r\n  return {\r\n    onMouseDown: () => setStartLongPress(true),\r\n    onMouseUp: () => setStartLongPress(false),\r\n    onMouseLeave: () => setStartLongPress(false),\r\n    onTouchStart: () => setStartLongPress(true),\r\n    onTouchEnd: () => setStartLongPress(false),\r\n  };\r\n}\r\n\r\n\r\n\r\nfunction RecipeItem(props) {\r\n\r\n  const [openDialog, setopenDialog] = useState(false);\r\n\r\n  const onLongPress = result => {\r\n    setopenDialog(true);\r\n  }\r\n\r\n  const handleClose = (action) => {\r\n    setopenDialog(false);\r\n\r\n    if(action === \"remove\")\r\n      props.handleaction(props.recipe.id);\r\n  }\r\n\r\n  const backspaceLongPress = useLongPress(onLongPress, 500);\r\n\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const recipe = props.recipe;\r\n\r\n\r\n  let r_img = ( recipe.img !== undefined) ? recipe.img : 'temp_food1';\r\n  let img_src;\r\n\r\n  if  ( recipe.img_url !== undefined) {\r\n    img_src = recipe.img_url;\r\n  } else {\r\n    img_src = require('../assets/'+ r_img + '.jpg');\r\n  }\r\n\r\n  const handeRecipeClick = (clicked_recipe) => {\r\n    history.push(\"/recipe/\" + clicked_recipe.title + \"/\" + clicked_recipe.id );\r\n  };\r\n\r\n  let enable_press = false;\r\n  let image;\r\n\r\n  if (enable_press === true)\r\n    image = <div {...backspaceLongPress}> <img src={img_src} className={classes.listimage} alt={recipe.title} alt={\"recipe img\"} /> </div> ;\r\n  else\r\n    image = <div> <img src={img_src} className={classes.listimage} alt={recipe.title} alt={\"recipe img\"} /> </div> ;\r\n\r\n  let tile_jsx;\r\n  // if feed or list\r\n  if( props.smalltiles !== undefined && props.smalltiles === false) {\r\n    tile_jsx = (\r\n    <GridListTile key={r_img} className={classes.listtile + ' ' + classes.pointer } onClick={() => handeRecipeClick(recipe)}>\r\n      {image}\r\n      <GridListTileBar\r\n        title={recipe.title}\r\n        subtitle={<span>Av: {recipe.user}</span>}\r\n      />\r\n    </GridListTile>);\r\n  } else // LIST\r\n  {\r\n    tile_jsx = (\r\n    <React.Fragment>\r\n      <GridListTile key={r_img} className={classes.listtile_small} onClick={() => handeRecipeClick(recipe)}>\r\n        {image}\r\n      </GridListTile>\r\n    </React.Fragment>);\r\n  }\r\n\r\n  return (\r\n\r\n    <React.Fragment>\r\n        {tile_jsx}\r\n\r\n      <MySnackbar open={openDialog} handleClose={handleClose} message={recipe.title} action={\"ta bort från lista\"}/>\r\n    </React.Fragment>\r\n\r\n  );\r\n}\r\n\r\n// <MyDialog open={openDialog}/>\r\n\r\nconst useStyles = makeStyles({\r\n  listimage: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    minWidth: '150px',\r\n    minHeight: '150px',\r\n    objectFit: 'cover'\r\n  },\r\n  listtile_small: {\r\n    maxHeight: '100px',\r\n    maxWidth: '100px',\r\n    padding: '2px',\r\n  },\r\n  listtile: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    padding: '5px',\r\n  },\r\n  pointer: {\r\n   cursor: 'pointer'\r\n  }\r\n});\r\n\r\n\r\nexport default RecipeItem;\r\n","import GridList from '@material-ui/core/GridList';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useEffect, useState } from 'react';\r\nimport RecipeItem from '../components/recipeitem';\r\n\r\n\r\nfunction RecipeGridList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  const [images, setImages] = useState([]);\r\n  let smalltiles = (props.smalltiles) ? props.smalltiles : false;\r\n\r\n  useEffect(() => {\r\n\r\n    let images_temp = props.recipes.map((recipe, idx) =>\r\n      <RecipeItem recipe={recipe} key={idx} smalltiles={smalltiles} id={idx} handleaction={props.handleaction}/>\r\n    );\r\n\r\n    setImages(images_temp);\r\n\r\n  }, []);\r\n\r\n\r\n  // oh loading in parent component is what is taking time\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <GridList>\r\n      {images.length > 0 && images }\r\n      </GridList>\r\n    </div>\r\n  );\r\n}\r\n//    backgroundColor: '#f1f1f1',\r\n//    padding: '10px'\r\nconst useStyles = makeStyles({\r\n  root: {\r\n   display: 'flex',\r\n   flexWrap: 'wrap',\r\n   justifyContent: 'center',\r\n   overflow: 'hidden'\r\n  },\r\n  icon: {\r\n    color: 'rgba(255, 255, 255, 0.54)',\r\n  },\r\n  listimage: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    padding: '5px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\nexport default RecipeGridList;\r\n","import Grid from '@material-ui/core/Grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport RecipeGridList from '../components/recipegridlist';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction FeedPage() {\r\n\r\n  // const [images, setImages] = useState();\r\n  const [recipes, setRecipes] = useState(undefined);\r\n  //const [docs, setDocs] = useState(undefined);\r\n  const [scrollview, setScrollview] = useState(true);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  const firestore = useFirestore();\r\n\r\n  useEffect(() => {\r\n\r\n    let recpiesRef = firestore.collection('recipes');\r\n    recipeFetcher(recpiesRef);\r\n\r\n  }, []);\r\n\r\n  const recipeFetcher = (recpiesRef) => {\r\n    firestore.collection(\"recipes\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        let recipe_docs = [];\r\n        querySnapshot.forEach( doc => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          recipe_docs.push(data);\r\n        });\r\n\r\n        setRecipes(recipe_docs);\r\n    });\r\n  }\r\n\r\n  // <div className={classes.imageContainer}>{images}</div>\r\n  // recipeData.PastaMaster.recipes\r\n// { recipes != undefined && <RecipeGridList imageData={recipes}/> }\r\n  if(scrollview === false )\r\n  {\r\n    return (\r\n\r\n      <div>\r\n\r\n      { recipes !== undefined && <ScrollableRecipes recipes={recipes}/> }\r\n\r\n       </div>\r\n\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <NewsContainer recipes={recipes}/>\r\n      <h3>Senaste recepten</h3>\r\n      { recipes !== undefined && <div className={classes.grid_background}><RecipeGridList recipes={recipes}/></div> }\r\n      { recipes === undefined && <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div> }\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nfunction ScrollableRecipes(props) {\r\n\r\n  const classes = useStyles();\r\n  // className={classes.userinfo}\r\n\r\n  let recipes = props.recipes.concat(props.recipes);\r\n  recipes = recipes.concat(recipes);\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={1}\r\n      justify=\"center\"\r\n\r\n    >\r\n      {\r\n        recipes.map((recipe, idx) =>\r\n        <div className={classes.scrolldiv} key={idx}>\r\n        <Grid item xs={12}>\r\n        <h3 className={classes.scrolltitle}>\r\n          { recipe.title + ' | ' + recipe.user }\r\n        </h3>\r\n        </Grid>\r\n        <Grid item xs={12} >\r\n          <img src={require('../assets/'+ 'temp_food1' + '.jpg')} className={classes.scrollimage} alt={\"recipe img\"} />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n        <p className={classes.scrolltext}>\r\n          { 'Some text' }\r\n        </p>\r\n        </Grid>\r\n        </div>\r\n      )\r\n\r\n      }\r\n    </Grid>\r\n  );\r\n}\r\n\r\n// component above the feed at start page\r\nfunction NewsContainer(props) {\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  // className={classes.userinfo}\r\n\r\n\r\n  if(props.recipes === undefined || props.recipes.length < 1 )\r\n    return null; // <p style={{margin: 15}}>Sorry chefs, an issue! probably no internet connection.</p>\r\n\r\n  let recipe_index = Math.floor(Math.random() * props.recipes.length);\r\n\r\n  let viral_header = (props.recipes !== undefined && props.recipes[recipe_index] !== undefined ) ? props.recipes[recipe_index].title : \"Veckans favvo: \";\r\n\r\n  const handleUserClick = (user) => {\r\n    history.push(\"/profile/\" + user );\r\n  };\r\n\r\n  let username = props.recipes[recipe_index].user;\r\n\r\n  /*\r\n  <Grid item xs={5}>\r\n\r\n    {props.recipes !== undefined &&\r\n      <GridList><RecipeItem recipe={props.recipes[recipe_index]} smalltiles={false}/></GridList>\r\n    }\r\n\r\n  </Grid>\r\n  <Grid item xs={7}>\r\n    <h3>{viral_header}</h3>\r\n    <h5 onClick={() => handleUserClick(username)} style={{cursor: 'pointer'}}> @username</h5>\r\n  </Grid>\r\n  */\r\n\r\n  let feedback_form_link = <a href=\"https://forms.gle/wUSFkwExgdJbiAUL7\" target=\"_blank\" style={{color: '#68bb8c'}}>här</a>;\r\n\r\n  return (\r\n    <div>\r\n    <h3>Nyheter</h3>\r\n    <Grid\r\n      container\r\n      spacing={1}\r\n      justify=\"center\"\r\n      alignItems=\"center\"\r\n      className={classes.newscontainer}\r\n    >\r\n\r\n      <Grid item xs={12}>\r\n        <div style={{padding: '10px'}}>\r\n        <h3>Välkommen till nya Campuskost 🌱</h3>\r\n        <p> Campuskost har fått nytt utseende och funktion! Du kan nu skapa ett konto och själv ladda upp och redigera dina recept.\r\n        Snart kommer funktionalitet såsom att skapa listor och följa dina vänners listor med recept. Lämna gärna feedback {feedback_form_link} om du\r\n        hittar buggar eller har något roligt förslag</p>\r\n        </div>\r\n      </Grid>\r\n\r\n    </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n// used before for testing\r\n/*\r\nfunction ImageContainer(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Link to={\"/recipe/\" + props.data.title } >\r\n      <div>\r\n      <div className={classes.foodImg}></div>\r\n      {props.data.title}\r\n      </div>\r\n    </Link>\r\n  );\r\n} */\r\n\r\nconst useStyles = makeStyles({\r\n  imageContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    marginBottom: 50,\r\n  },\r\n  grid_background: {\r\n    backgroundColor: '#f1f1f1',\r\n    paddingTop: '10px'\r\n  },\r\n  foodImg: {\r\n    backgroundColor: 'pink',\r\n    height: 100,\r\n    width: 100,\r\n    margin: 5,\r\n    borderRadius: 20\r\n  },\r\n  newscontainer: {\r\n    borderRadius: 20,\r\n    backgroundColor: '#f1f1f1',\r\n    marginBottom: 15\r\n  },\r\n  listimage: {\r\n    maxHeight: '90px',\r\n    maxWidth: '90px',\r\n    padding: '5px',\r\n    margin: '15px',\r\n    borderRadius: '10px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  },\r\n  imagesidebar: {\r\n    padding: 5\r\n  },\r\n  triedby: {\r\n    background: '#f1f1f1',\r\n    borderRadius: '4px',\r\n    padding: 5,\r\n    textAlign: 'center'\r\n  },\r\n  scrollimage: {\r\n    maxWidth: '300px',\r\n  },\r\n  scrolltitle: {\r\n    alignSelf: 'flex-start'\r\n  },\r\n  scrolldiv: {\r\n    background: '#f2f2f2',\r\n    padding: '25px',\r\n    margin: '15px',\r\n    borderRadius: '12px'\r\n  },\r\n  scrolltext: {\r\n    color: 'black'\r\n  }\r\n});\r\n\r\nexport default FeedPage;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useEffect } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport RecipeGridList from '../components/recipegridlist';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction ListContainer(props) {\r\n\r\n  const [recipes, setRecipes] = React.useState([]);\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n\r\n  const list_doc = props.listdoc;\r\n\r\n  useEffect(() => {\r\n\r\n    // now using\r\n    if(props.recipeDocs != undefined) {\r\n\r\n      setRecipes(props.recipes);\r\n      return;\r\n    }\r\n\r\n    // using recipe ids\r\n    if (list_doc.recipes != undefined) {\r\n\r\n      let temp_recipes = [];\r\n\r\n      // previously liked recipes will persist in the firestore map but be false\r\n      Object.keys(list_doc.recipes).forEach(function(key) {\r\n          if(list_doc.recipes[key] === true)\r\n            temp_recipes.push(key)\r\n      });\r\n\r\n      recipe_fetcher(temp_recipes);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const handleaction = (recipe_id) => {\r\n\r\n    let listsRef = firestore.collection('recipe_lists').doc(list_doc.id);\r\n\r\n    listsRef.get().then(function(doc) {\r\n\r\n      let data = doc.data();\r\n      data.id = doc.id;\r\n      data.recipes[recipe_id] = false; // remove from list // my_map.delete(key)\r\n      firestore.collection(\"recipe_lists\").doc(doc.id).update(data);\r\n\r\n\r\n      //let updated_recipes = data.recipes[recipe_id];\r\n      // const nextState = recipes.map(a => a.id === doc.id ? { ...a, [recipes]: updated_recipes } : a);\r\n      // setRecipes(nextState);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  // fetch by list of recipe ids\r\n  const recipe_fetcher = (recipe_id_list) => {\r\n\r\n    let temp_recipes = [];\r\n    let ref;\r\n    recipe_id_list.map( (recipe_id, idx) => {\r\n\r\n      ref = firestore.collection('recipes').doc(recipe_id);\r\n      ref.get().then(function(doc) {\r\n          if (doc.exists) {\r\n\r\n              let data = doc.data();\r\n              data.id = doc.id;\r\n              temp_recipes.push(data);\r\n              if (idx == recipe_id_list.length - 1) {\r\n                setRecipes(temp_recipes);\r\n              }\r\n          } \r\n      }).catch(function(error) {\r\n          console.log(\"Error getting document:\", error);\r\n      });\r\n    })\r\n  }\r\n\r\n  // either spinner or recipe content is to be shown\r\n  let spinner_jsx = <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>;\r\n  let recipeContent = (recipes.length > 0) ? <RecipeGridList handleaction={handleaction} recipes={recipes} smalltiles={true}/> : spinner_jsx;\r\n\r\n  let header;\r\n  if (props.noheader == false) {\r\n    let listname = (list_doc.listname) ? list_doc.listname : \"<listname>\"; // \"Gillade recept\"\r\n    let user_in_header = (props.mine) ? \"\" : \"| \" + props.createdby.split(\"@\")[0];\r\n    header = <p className={classes.list_header}> {listname} <i>{user_in_header}</i> </p>;\r\n  }\r\n\r\n  let id = 5;\r\n\r\n  return (\r\n    <div style={{width: '100%'}}>\r\n      {header}\r\n      <div className={classes.listcontainer}>\r\n        {recipeContent}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  listcontainer: {\r\n    borderRadius: 20,\r\n    backgroundColor: '#f1f1f1',\r\n    marginBottom: 15,\r\n    minHeight: 50\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: '20px'\r\n  },\r\n  list_header: {\r\n    background: '#cab18e',\r\n    color: 'white',\r\n    padding: '3px 15px',\r\n    borderRadius: '5px'\r\n}\r\n});\r\n\r\nexport default ListContainer;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useCallback, useEffect } from 'react';\r\nimport { Droppable } from 'react-beautiful-dnd';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ListContainer from '../components/listcontainer';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\n// ********************************* */\r\n\r\n// a little function to help us with reordering the result\r\nconst reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n\r\n    return result;\r\n};\r\n\r\nlet grid = 15;\r\nconst getReicipeStyle = (isDragging, draggableStyle) => {\r\n\r\n  return {\r\n\r\n    userSelect: 'none',\r\n    margin: `0px 10px ${grid}px 0px`,\r\n    // background: isDragging ? 'lightgreen' : '#68bb8c', // 'lightgreen\r\n    borderRadius: 10,\r\n    width: '120px !important', // isDragging ? '50px !important' : '120px',\r\n    height: '120px !important', // isDragging ? '50px !important' : '120px',\r\n\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle\r\n}};\r\n\r\n\r\nconst getLikedListStyle = isDraggingOver => ({\r\n  background: isDraggingOver ? 'lightblue' : '#eeeeee',\r\n    background: '#eeeeee',\r\n    padding: grid,\r\n    width: '90%',\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    borderRadius: 12,\r\n});\r\n\r\nfunction DraggableRecipe(props) {\r\n\r\n  const classes = useStyles();\r\n  const recipe = props.recipe;\r\n\r\n  // SET IMAGE\r\n  let r_img = ( recipe.img !== undefined) ? recipe.img : 'temp_food1';\r\n  let img_src = ( recipe.img_url !== undefined) ? recipe.img_url : require('../assets/'+ r_img + '.jpg');\r\n  let image = <img src={img_src} className={classes.listimage} alt={recipe.title} alt={\"recipe img\"} />;\r\n\r\n  // RETURN JSX\r\n  return (\r\n    <React.Fragment>\r\n    {image}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nwindow.oncontextmenu = function(event) {\r\n     event.preventDefault();\r\n     event.stopPropagation();\r\n     return false;\r\n};\r\n\r\nfunction ListPage() {\r\n\r\n    const [listState, setlistState] = React.useState(undefined);\r\n    const [likes, setLikes] = React.useState(undefined);\r\n    const [recipes, setRecipes] = React.useState([]);\r\n    const [lists_by_user, setLists_by_user] = React.useState([]);\r\n    const [, updateState] = React.useState();\r\n    const forceUpdate = useCallback(() => updateState({}), []);\r\n    //const [isDragging, setisDragging] = React.useState(false);\r\n    // const [wasupdated, setwasupdated] = React.useState(false);\r\n\r\n    const store = useSelector(state => state.fireReducer);\r\n    const firestore = useFirestore();\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    // dragReducer\r\n    const dispatch = useDispatch(); // be able to dispatch\r\n\r\n    const dragDisp = (isDragging_val, draggableId_val = undefined) => {\r\n      dispatch({\r\n        type: \"SETISDRAGGING\",\r\n        isDragging: isDragging_val\r\n      })\r\n\r\n      dispatch({\r\n        type: \"SETDRAGGABLEID\",\r\n        draggableId: draggableId_val\r\n      })\r\n\r\n    }\r\n\r\n    let isDragging = false;\r\n\r\n\r\n    useEffect(() => {\r\n\r\n      if( !store.firestore_user) {\r\n        return;\r\n      }\r\n\r\n      let current_email = store.firestore_user.email;\r\n\r\n      // lists created by the user\r\n      getListDocsForUser(current_email, true).then((loadedDocs) => {\r\n        setLists_by_user(loadedDocs);\r\n      });\r\n\r\n      // lists likes for the user\r\n      getLikesDocsForUser(current_email).then((like_docs) => {\r\n\r\n        // if user has no liked recipes\r\n        if(!like_docs)\r\n          return;\r\n\r\n        setLikes(like_docs);\r\n\r\n        let liked_recipes_ids = like_docs.liked_recipes;\r\n        if ( liked_recipes_ids != undefined) {\r\n\r\n          let temp_recipes = [];\r\n          // previously liked recipes will persist in the firestore map but be false\r\n          Object.keys(liked_recipes_ids).forEach(function(key) {\r\n              if(liked_recipes_ids[key] === true)\r\n                temp_recipes.push(key)\r\n          });\r\n\r\n          recipe_fetcher(temp_recipes); // Object.keys(props.recipemap)\r\n        }\r\n\r\n      });\r\n\r\n    }, [store.firestore_user]);\r\n\r\n    let getLikesDocsForUser = function(current_email) {\r\n      return new Promise((resolve, reject) => {\r\n\r\n        let likesRef = firestore.collection('recipe_likes').doc(current_email);\r\n\r\n        likesRef.get().then(function(doc) {\r\n          let data = doc.data();\r\n          resolve(data);\r\n\r\n        });\r\n      });\r\n    }\r\n\r\n    // get list definitions\r\n    let getListDocsForUser = function(current_email, mine) {\r\n      return new Promise((resolve, reject) => {\r\n\r\n        let replaced_email = current_email.replace(/\\./g, ','); // replaces all dots\r\n        let listsRef = firestore.collection('recipe_lists').where('list_followers.' + replaced_email, '==', true);\r\n        let list_docs = [];\r\n\r\n        if (mine === true) {\r\n          listsRef = listsRef.where('created_by', '==', current_email);\r\n        }\r\n\r\n        let query = listsRef.get()\r\n          .then(snapshot => {\r\n\r\n            snapshot.forEach(doc => {\r\n\r\n              let data = doc.data();\r\n              // grab only lists of other users\r\n              if (mine === true || (mine === false && data.created_by != current_email)) {\r\n                data.id = doc.id;\r\n                list_docs.push(data);\r\n              }\r\n\r\n            });\r\n            resolve(list_docs);\r\n          })\r\n      });\r\n    }\r\n\r\n    // fetch by list of recipe ids\r\n    const recipe_fetcher = (recipe_id_list) => {\r\n\r\n      let temp_recipes = [];\r\n      let ref;\r\n      recipe_id_list.map( (recipe_id, idx) => {\r\n\r\n        ref = firestore.collection('recipes').doc(recipe_id);\r\n        ref.get().then(function(doc) {\r\n            if (doc.exists) {\r\n\r\n                let data = doc.data();\r\n                data.id = doc.id;\r\n                temp_recipes.push(data);\r\n                if (idx == recipe_id_list.length - 1) {\r\n                  setRecipes(temp_recipes);\r\n                  setlistState(temp_recipes);\r\n                }\r\n            }\r\n        }).catch(function(error) {\r\n            console.log(\"Error getting document:\", error);\r\n        });\r\n      })\r\n    }\r\n\r\n    const onDragStart = result => {\r\n\r\n      //setisDragging(true);\r\n      isDragging = true;\r\n\r\n      dragDisp(true, result.draggableId);\r\n    }\r\n\r\n    const onDragEnd = result => {\r\n        const { source, destination } = result;\r\n\r\n        // dropped outside the list\r\n        if (!destination) {\r\n            return;\r\n        }\r\n\r\n        // if added to list\r\n        if(destination.droppableId.substring(0, 4) === 'list') {\r\n\r\n          //listState.splice(source.index, 1); // remove from current list\r\n\r\n          //let listsRef = firestore.collection('recipe_lists').where('list_followers.' + replaced_email, '==', true);\r\n          // lists_by_user\r\n          let drop_id = result.destination.droppableId;\r\n          let list_index = drop_id.substring(drop_id.indexOf(\"_\")+1);\r\n\r\n          let list = lists_by_user[list_index];\r\n          let recipe_doc_id = result.draggableId;\r\n\r\n          let listsRef = firestore.collection('recipe_lists').doc(list.id);\r\n\r\n          listsRef.get().then(function(doc) {\r\n\r\n            let data = doc.data();\r\n            data.id = doc.id;\r\n            data.recipes[recipe_doc_id] = true; // add to list\r\n            firestore.collection(\"recipe_lists\").doc(doc.id).update(data).then(function(what) {\r\n              // history.go(0);\r\n            });\r\n\r\n            let updated_recipes = data.recipes[recipe_doc_id];\r\n            const nextState = lists_by_user.map(a => a.id === doc.id ? { ...a, [recipes]: updated_recipes } : a);\r\n            setLists_by_user(nextState);\r\n\r\n          });\r\n          }\r\n\r\n        //setisDragging(false);\r\n        isDragging = false;\r\n        dragDisp(false);\r\n\r\n        // if just reordered in same list\r\n        if (source.droppableId === destination.droppableId) {\r\n\r\n            const updated_items = reorder(\r\n                listState,\r\n                source.index,\r\n                destination.index\r\n            );\r\n\r\n            let temp_selected = updated_items;\r\n            setlistState(updated_items);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    let lists_by_user_jxs = lists_by_user.map((list_doc, i) =>\r\n      <Droppable key={\"list_\" + i} droppableId={\"list_\" + i} direction=\"horizontal\">\r\n          {(provided, snapshot) => {\r\n\r\n            return (\r\n              <div ref={provided.innerRef} >\r\n                <div\r\n                  style={getListStyle(snapshot.isDraggingOver)}\r\n                  className={isDragging ? null : classes.displayNone}>\r\n                    <p> {list_doc.listname} </p>\r\n                    <Spinner name=\"ball-scale-ripple\" color=\"white\" className={classes.spinner}/>\r\n                </div>\r\n\r\n                { !isDragging &&\r\n                <div>\r\n                    <ListContainer key={i}\r\n                       listdoc={list_doc}\r\n                       noheader={false} mine={true}\r\n                    />\r\n                </div>\r\n              }\r\n              </div>\r\n            );\r\n          }}\r\n      </Droppable>\r\n    );\r\n\r\n    //                  recipeDocs={list_doc.recipeDocs}\r\n    // className={isDragging ? classes.displayNone : null}\r\n\r\n    let starter_content = (<div>\r\n      <p> Du har inga gillade recept än</p>\r\n    </div>);\r\n\r\n    let loading_or_starting = (listState && listState.length < 1) ? starter_content : <p>spinner</p>;\r\n\r\n    return (listState && listState.length > 0) ? (\r\n      <div style={{margin: 10}}>\r\n        <h3>Gillade recept</h3>\r\n        <div>\r\n          {listState.map((item, index) => (\r\n            <DraggableRecipe recipe={item} key={index} className={classes.listimage}/>\r\n          ))}\r\n        </div>\r\n        <h3>Mina listor</h3>\r\n        <p>Kommer snart! 🥳 </p>\r\n      </div>\r\n    ) : <div><h3>Gillade recept</h3><p> Ledsen, du behöver logga in för att börja spara recept! 🍳 </p></div>;\r\n\r\n    /*\r\n    return (listState && listState.length > 0) ? (\r\n      <div style={{margin: 10}}>\r\n        <DragDropContext onDragEnd={onDragEnd} onDragStart={onDragStart}>\r\n\r\n            <h3>Gillade recept</h3>\r\n\r\n            <div className={classes.listDroppable}>\r\n                <Droppable droppableId=\"droppable\" direction=\"horizontal\">\r\n                    {(provided, snapshot) => (\r\n                        <div\r\n                            ref={provided.innerRef}\r\n                            style={getLikedListStyle(snapshot.isDraggingOver)}>\r\n                            {listState.map((item, index) => (\r\n                                <Draggable\r\n                                    key={item.id}\r\n                                    draggableId={item.id}\r\n                                    index={index}>\r\n                                    {(provided, snapshot) => (\r\n                                        <div\r\n                                            ref={provided.innerRef}\r\n                                            {...provided.draggableProps}\r\n                                            {...provided.dragHandleProps}\r\n                                            style={getReicipeStyle(\r\n                                                snapshot.isDragging,\r\n                                                provided.draggableProps\r\n                                                    .style\r\n                                            )}>\r\n                                            <DraggableRecipe recipe={item} isdragging={snapshot.isDragging}/>\r\n                                        </div>\r\n                                    )}\r\n                                </Draggable>\r\n                            ))}\r\n                            {provided.placeholder}\r\n                        </div>\r\n                    )}\r\n                </Droppable>\r\n            </div>\r\n\r\n\r\n        </DragDropContext>\r\n      </div>\r\n    ) : <div><h3>Gillade recept</h3><p> Ledsen, du behöver logga in för att börja spara recept! 🍳 </p></div>;\r\n    */\r\n}\r\n\r\n/*\r\n\r\n<h3>Mina listor</h3>\r\n\r\n  <div style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px', padding: '15px'}}\r\n       className=\"profilepageLists\"\r\n    >\r\n    {lists_by_user_jxs}\r\n  </div>\r\n\r\n<h3>Listor jag följer</h3>\r\n\r\n*/\r\n\r\nconst getListStyle = (isDraggingOver) => ({\r\n    background: isDraggingOver ? 'lightblue' : '#68bb8c', // '#eeeeee',\r\n    padding: grid,\r\n    width: '90%',\r\n    // display: 'flex',\r\n    overflow: 'auto',\r\n    borderRadius: 12,\r\n    height: '160px',\r\n    marginBottom: '10px',\r\n    textAlign: 'center',\r\n    fontSize: '18px',\r\n    color: 'white'\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  listDroppable: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    margin: 5\r\n  },\r\n  listimage: {\r\n    height: '120px',\r\n    width: '120px',\r\n    objectFit: 'cover',\r\n    borderRadius: 10,\r\n    margin: '5px'\r\n  },\r\n  draggingClass: {\r\n    height: '50px',\r\n    width: '50px',\r\n    objectFit: 'cover',\r\n    borderRadius: 10\r\n  },\r\n  spinner: {\r\n    color: 'white',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n    width: 'fit-content'\r\n  },\r\n  displayNone: {\r\n    display: 'none'\r\n  }\r\n});\r\n\r\n\r\n// Put the things into the DOM!\r\nexport default ListPage\r\n","import React, {useState} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useFirebase } from \"react-redux-firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst LOGIN_STATE = \"login\";\r\nconst SIGNUP_STATE = \"signup\";\r\n\r\nfunction LoginPage() {\r\n\r\n  const [state, setState] = useState(SIGNUP_STATE);\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const loginRoute = () => {\r\n\r\n    console.log(\"go to homepage\");\r\n    history.push(\"/home\");\r\n  }\r\n\r\n  // render one container and the opposite banner\r\n  return (\r\n\r\n    <div>\r\n\r\n      { // either login container..\r\n        state === LOGIN_STATE &&\r\n        <div>\r\n          <LoginContainer onLogin={loginRoute}/>\r\n          <SignupBanner onAction={() => setState(SIGNUP_STATE)} />\r\n        </div>\r\n      }\r\n\r\n\r\n      { // ..or signup container\r\n        state === SIGNUP_STATE &&\r\n        <div>\r\n          <SignUpContainer onLogin={loginRoute}/>\r\n          <LogInBanner onAction={() => setState(LOGIN_STATE)}/>\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nfunction SignUpContainer(props) {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [username, setUsername] = useState({value: \"\", isValid: false});\r\n  // const [validUsername, setValidUsername] = useState(\"\");\r\n\r\n\r\n  const [feedback, setFeedback] = useState({color: 'green', message: \"\"});\r\n\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n  const firebase = useFirebase();\r\n\r\n  const create_db_user_doc = () => {\r\n\r\n    const usersRef = firestore.collection('users').doc(email);\r\n    // connect to firebase and check if a user doc for this email exists\r\n    usersRef.get().then((docSnapshot) => {\r\n      if (docSnapshot.exists) {\r\n        // should not be possible\r\n      } else {\r\n\r\n        // prepare to create firestore doc as this user signed in for the first time\r\n        let userObj = {\r\n          email: email,\r\n          username: username.value,\r\n          university: \"\",\r\n          fullname: \"\",\r\n          bio: \"\",\r\n          profile_img_url: \"\"\r\n        };\r\n\r\n        console.log(\"create the document\")\r\n        usersRef.set(userObj); // create the document\r\n\r\n        // set redux state\r\n        dispatch({\r\n          type: \"SETFIREUSER\",\r\n          firestore_user: userObj\r\n        })\r\n\r\n      }\r\n\r\n      props.onLogin();\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * Handles the sign up button press.\r\n   */\r\n  function handleSignUp() {\r\n\r\n    if (email.length < 4 || password.length < 4) {\r\n      setFeedback({color: 'red', message: 'Mailadress/lösenord måste innehålla mer än 4 tecken.'});\r\n      return;\r\n    }\r\n\r\n    // Sign in with email and pass.\r\n    firebase.auth().createUserWithEmailAndPassword(email, password).then(function(value) {\r\n\r\n      setFeedback({color: 'green', message: \"Skapade ett konto för \" + email});\r\n      create_db_user_doc();\r\n\r\n    }).catch(function(error) {\r\n      // Handle Errors here.\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n\r\n      if (errorCode === 'auth/email-already-in-use')\r\n        setFeedback({color: 'red', message: 'Ett konto med denna email finns redan.'});\r\n      else if (errorCode === 'auth/weak-password')\r\n        setFeedback({color: 'red', message: 'Lösenordet är för svagt.'});\r\n    });\r\n  }\r\n\r\n  const handleUsername = () => {\r\n\r\n    let current_username = username.value;\r\n\r\n    if( current_username === \"\" ) {\r\n      setFeedback({color: 'orange', message: 'Skriv först in ett användarnamn.'});\r\n      return;\r\n    }\r\n\r\n    // not at every keypress..\r\n    usenameIsAvailableCheck(current_username).then((is_available) => {\r\n\r\n      setUsername({value: current_username, isValid: is_available});\r\n\r\n      if(is_available === false)\r\n        setFeedback({color: 'orange', message: 'Användarnamn upptaget.'});\r\n      else\r\n        setFeedback({color: 'green', message: 'Användarnamn ledigt.'});\r\n\r\n    })\r\n  }\r\n\r\n  // setUsername({value: evt.target.value, isValid: false})}\r\n  const editUsername = (username_textfield) => {\r\n\r\n    setUsername({value: username_textfield, isValid: false});\r\n    setFeedback({color: 'green', message: \"\"});\r\n  }\r\n\r\n  var usenameIsAvailableCheck = function(username_totry) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      // check if available\r\n      let is_available = true;\r\n      let query = firestore.collection('users').where('username', '==', username_totry).get()\r\n        .then(snapshot => {\r\n          snapshot.forEach(doc => {\r\n            is_available = false;\r\n          });\r\n          resolve(is_available)\r\n        })\r\n    });\r\n  }\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n    <h3> Skapa konto </h3>\r\n    <p>Ange email and lösenord för att skapa ett konto</p>\r\n\r\n         <input autoComplete=\"off\" value={email} type=\"email\" placeholder=\"Email\" onChange={evt => setEmail(evt.target.value)}/>\r\n         &nbsp;&nbsp;&nbsp;\r\n         <input autoComplete=\"off\" value={password} type=\"password\" placeholder=\"Password\" onChange={evt => setPassword(evt.target.value)}/>\r\n         <br/><br/>\r\n         <input autoComplete=\"off\" value={username.value} type=\"text\" placeholder=\"Usename\" onChange={evt => editUsername(evt.target.value)}/>\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color=\"primary\"\r\n           onClick={handleUsername}\r\n           style={{marginLeft: 20}}\r\n         >\r\n         Ledigt?\r\n         </Button>\r\n\r\n         <br/><br/>\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color=\"primary\"\r\n           onClick={handleSignUp}\r\n           disabled={!username.isValid}\r\n         >\r\n           Skapa konto\r\n         </Button>\r\n\r\n         <br/><br/>\r\n\r\n    <p style={{color: feedback.color}}> {feedback.message} </p>\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nfunction LoginContainer(props) {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [feedback, setFeedback] = useState({color: 'green', message: \"\"});\r\n  const [loginProblem, setLoginProblem] = useState(false);\r\n\r\n  const classes = useStyles();\r\n  const firebase = useFirebase();\r\n\r\n  /**\r\n   * Handles the sign in button press.\r\n   */\r\n  function toggleSignIn() {\r\n\r\n    // sign out if signed in\r\n    if (firebase.auth().currentUser) {\r\n      firebase.auth().signOut();\r\n    } else {\r\n\r\n      if (email.length < 4 || password.length < 4) {\r\n        setFeedback({color: 'red', message: 'Mailadress/lösenord måste innehålla mer än 4 tecken.'});\r\n        return;\r\n      }\r\n\r\n      // Sign in with email and pass.\r\n      firebase.auth().signInWithEmailAndPassword(email, password).then( () => {\r\n        setLoginProblem(false);\r\n        setFeedback({color: 'green', message: 'Välkommen tillbaka!'});\r\n        props.onLogin();\r\n\r\n      }).catch(function(error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n\r\n        if (errorCode === 'auth/wrong-password') {\r\n          setFeedback({color: 'red', message: 'Fel lösenord.'});\r\n          setLoginProblem(true);\r\n          //alert('fel lösenord.');\r\n        } else {\r\n          alert(errorMessage);\r\n        }\r\n        console.log(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  /* not used yet\r\n  function sendEmailVerification() {\r\n      firebase.auth().currentUser.sendEmailVerification().then(function() {\r\n        // Email Verification sent!\r\n        alert('Email Verification Sent!');\r\n      });\r\n  } */\r\n\r\n  function resetPassword() {\r\n\r\n      firebase.auth().sendPasswordResetEmail(email).then(function() {\r\n        alert(\"sent password reset to email: \" + email);\r\n      }).catch(function(error) {\r\n        // An error happened.\r\n        console.log(\"could not send reset email\")\r\n      });\r\n  }\r\n\r\n  let signText = (firebase.auth().currentUser) ? \"Logga ut\" : \"Logga in\";\r\n  let btn_color = (firebase.auth().currentUser) ? \"secondary\" : \"primary\";\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n    <h3> Logga in </h3>\r\n    <p>Ange email and lösenord för att logga in</p>\r\n\r\n         <input type=\"text\" name=\"email\" placeholder=\"Email\" onChange={evt => setEmail(evt.target.value)}/>\r\n         &nbsp;&nbsp;&nbsp;\r\n         <input type=\"password\" name=\"password\" placeholder=\"Password\" onChange={evt => setPassword(evt.target.value)}/>\r\n\r\n         <br/><br/>\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color={btn_color}\r\n           onClick={toggleSignIn}\r\n         >\r\n           {signText}\r\n         </Button>\r\n\r\n         &nbsp;&nbsp;&nbsp;\r\n\r\n         { loginProblem === true &&\r\n         <Button\r\n           variant=\"contained\"\r\n           color=\"secondary\"\r\n           onClick={resetPassword}\r\n         >\r\n           Återställ lösenord\r\n         </Button>\r\n         }\r\n\r\n         <br/><br/>\r\n\r\n         <p style={{color: feedback.color}}> {feedback.message} </p>\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nfunction SignupBanner(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n      <h3> Ny på Campuskost? 🍼 </h3>\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={props.onAction}\r\n      >\r\n        Skapa konto\r\n      </Button>\r\n\r\n      <p className={classes.info_font}>\r\n        Det är gratis att ha ett konto på Campuskost. <br/>\r\n        Läs mer om vilkor och användardata <a>här</a>.\r\n      </p>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nfunction LogInBanner(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n      <h3> Har du redan ett konto? </h3>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={props.onAction}\r\n      >\r\n        Logga in\r\n      </Button>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  login_div: {\r\n    background: '#f5f5f5',\r\n    padding: '1em',\r\n    margin: '0.5em',\r\n    borderRadius: '15px'\r\n },\r\n info_font: {\r\n    fontStyle: 'italic',\r\n    fontSize: 'small'\r\n}\r\n});\r\n\r\n// <span id=\"quickstart-sign-in-status\"> &nbsp; {signedInStatus} </span>\r\n// <button onClick={sendEmailVerification} name=\"verify\">Verifiera konto</button>\r\n\r\n/*\r\n\r\n<!--\r\n<button id=\"quickstart-verify-email\" onClick={handleChange} name=\"verify-email\">Send Email Verification</button>\r\n&nbsp;&nbsp;&nbsp;\r\n<button id=\"quickstart-password-reset\" onClick={handleChange} name=\"verify-email\">Send Password Reset Email</button> --> */\r\n\r\nexport default LoginPage;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction LoadSpinner(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.spinner}>\r\n      <Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\nexport default LoadSpinner;\r\n","import Avatar from '@material-ui/core/Avatar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport LoadSpinner from '../components/loadspinner';\r\n\r\n\r\nconst B = (props) => <span style={{fontWeight: 'bold'}}>{props.children}</span>\r\n\r\n\r\nfunction NoticeListItem(props) {\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  let noticeText;\r\n\r\n  const userClick = () => {\r\n    history.push(\"/profile/\" + props.user );\r\n  };\r\n\r\n  const recipeClick = () => {\r\n\r\n    // let recipe_title = props.recipe.substring(0, props.recipe.indexOf(\"-\"));\r\n    history.push(\"/recipe/\" + recipe_id_to_title(props.recipe) + \"/\" + props.recipe );\r\n  };\r\n\r\n  const recipe_id_to_title = (recipe_id) => {\r\n    let recipe_title = props.recipe.substring(0, props.recipe.indexOf(\"-\"));\r\n    return recipe_title;\r\n  }\r\n\r\n  switch (props.type) {\r\n    case \"FOLLOWS\":\r\n      noticeText = <div>\r\n                   <span className={classes.pointer} onClick={userClick}><B>{props.user}</B></span>\r\n                   <span> följer nu dig. </span>\r\n                   </div>;\r\n      break;\r\n    case \"TIPS\":\r\n      noticeText = <div>\r\n                  <span className={classes.pointer} onClick={userClick}><B>{props.user}</B></span>\r\n                  <span> tipsar dig om att laga </span>\r\n                  <span className={classes.pointer} onClick={recipeClick}><B>{recipe_id_to_title(props.recipe)}</B>.</span>\r\n                  </div>;\r\n      break;\r\n    case \"TESTED\":\r\n      noticeText = <div>\r\n                    <span className={classes.pointer} onClick={userClick}><B>{props.user}</B></span>\r\n                    <span> har testat ditt recept </span>\r\n                    <span className={classes.pointer} onClick={recipeClick}><B>{recipe_id_to_title(props.recipe)}</B>.</span>\r\n                  </div>;\r\n    default:\r\n\r\n  }\r\n\r\n  // if(props.type === \"FOLLOWS\")\r\n  //  noticeText = <span><B>{props.user}</B> följer nu dig.</span>;\r\n\r\n\r\n  let user_avatar = undefined;\r\n\r\n  if(props.eventimg != undefined) {\r\n    user_avatar = <img src={props.eventimg} className={classes.smallprofileimage + ' ' + classes.pointer } alt={\"profile-img\"} />; //\r\n  } else {\r\n    user_avatar = (\r\n      <Avatar>\r\n          <PersonIcon />\r\n      </Avatar>\r\n    );\r\n  }\r\n  /*\r\n  user_avatar = (\r\n    <Avatar>\r\n        <PersonIcon />\r\n    </Avatar>\r\n  ); */\r\n\r\n  return (\r\n\r\n    <ListItem>\r\n      <ListItemAvatar>\r\n        {user_avatar}\r\n      </ListItemAvatar>\r\n\r\n      <ListItemText\r\n        primary= { noticeText }\r\n        secondary={true ? props.time : null}\r\n      />\r\n\r\n\r\n    </ListItem>\r\n\r\n  );\r\n\r\n  /*\r\n\r\n  <ListItemSecondaryAction>\r\n    <IconButton edge=\"end\" aria-label=\"delete\">\r\n      <ForwardIcon />\r\n    </IconButton>\r\n  </ListItemSecondaryAction>\r\n\r\n  */\r\n\r\n}\r\n\r\nfunction NoticePage(props) {\r\n\r\n  const [eventList, setEventList] = useState(undefined);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    if(store.firestore_user === undefined) {\r\n      setEventList([]);\r\n      return;\r\n    }\r\n\r\n    // get email of user\r\n    events_promise(store.firestore_user.email).then((loadedDocs) => {\r\n      setEventList(loadedDocs);\r\n      //setUser(loadedDoc)\r\n    });\r\n\r\n  }, [store.firestore_user]);\r\n\r\n  var events_promise = function(email) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      firestore.collection('events').where('email', '==', email).get()\r\n        .then(snapshot => {\r\n\r\n          let doc_data = [];\r\n          snapshot.forEach(doc => {\r\n            let temp_data = doc.data();\r\n            doc_data.push(temp_data);\r\n          });\r\n\r\n          resolve(doc_data)\r\n        })\r\n    });\r\n  }\r\n\r\n  let spinnerjsx = <LoadSpinner/>\r\n  let eventListjsx = (eventList) ? eventList.map( (event, idx) =>\r\n    <NoticeListItem key={idx} type={event.type} user={event.other_username} recipe={event.recipe || undefined} time=\"\" eventimg={event.event_image_url}/>\r\n  ) : spinnerjsx;\r\n\r\n  /*\r\n  { !eventList &&\r\n    <div className={classes.spinner}><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>\r\n  }\r\n  */\r\n\r\n  return (\r\n\r\n    <div>\r\n    <h3>Dina notiser</h3>\r\n\r\n\r\n\r\n    { (true || eventList) &&\r\n      <List dense={true}>\r\n        {eventListjsx}\r\n      </List>\r\n    }\r\n    { (eventList && eventList.length < 1) &&\r\n      <p> Ledsen, inga händelser än. Börja interagera med dina kockvänner! 🍳 </p>\r\n    }\r\n\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  smallprofileimage: {\r\n    width: '40px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  },\r\n  pointer: {\r\n   cursor: 'pointer'\r\n  }\r\n});\r\n\r\n/*\r\n\r\n<List dense={true}>\r\n  <NoticeListItem type=\"FOLLOWS\" user=\"Vegokocken\" time=\"1 h\"/>\r\n  <NoticeListItem type=\"TIPS\" user=\"DelicatoKing\" recipe=\"Linsgryta\" time=\"3 h\"/>\r\n  <NoticeListItem type=\"TESTED\" user=\"PastaMaster\" recipe=\"Korvstroganoff\" time=\"2 dgr\"/>\r\n</List>\r\n\r\n*/\r\n\r\n\r\n/*\r\n\r\n<ListItem>\r\n  <ListItemAvatar>\r\n    <Avatar>\r\n        <PersonIcon />\r\n    </Avatar>\r\n  </ListItemAvatar>\r\n  <ListItemText\r\n    primary=\"Single-line item\"\r\n    secondary={true ? 'Secondary text' : null}\r\n  />\r\n  <ListItemSecondaryAction>\r\n    <IconButton edge=\"end\" aria-label=\"delete\">\r\n      <ForwardIcon />\r\n    </IconButton>\r\n  </ListItemSecondaryAction>\r\n</ListItem>\r\n\r\n*/\r\n\r\n\r\nexport default NoticePage;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\n\r\nfunction FollowerListItem(props) {\r\n\r\n  const classes = useStyles();\r\n  let user = props.user;\r\n\r\n  let user_avatar = undefined;\r\n  if(user.profile_img_url != undefined && user.profile_img_url != \"\") {\r\n    user_avatar = <img src={user.profile_img_url} className={classes.smallprofileimage} alt={\"profile-img\"} />; //\r\n  } else {\r\n    user_avatar = (\r\n      <Avatar>\r\n          <PersonIcon />\r\n      </Avatar>\r\n    );\r\n  }\r\n\r\n  return (\r\n\r\n    <ListItem className={classes.pointer}>\r\n      <ListItemAvatar>\r\n        {user_avatar}\r\n      </ListItemAvatar>\r\n\r\n      <ListItemText\r\n        primary= { user.username }\r\n        secondary={ user.fullname }\r\n        onClick={() => props.handleChange(user.username)}\r\n      />\r\n\r\n      { (false && props.showFollowIcon) &&\r\n      <ListItemSecondaryAction>\r\n        <IconButton edge=\"end\" aria-label=\"follows\">\r\n          <CheckCircleIcon className={(user.follows ? classes.followColor : classes.notfollowColor)}/>\r\n        </IconButton>\r\n      </ListItemSecondaryAction>\r\n      }\r\n    </ListItem>\r\n\r\n  );\r\n\r\n}\r\n\r\n// className={(user.follows ? 'followColor' : 'notfollowColor')}\r\n\r\nfunction FollowerList(props) {\r\n\r\n  const [followData, setFollowData] = useState([]);\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleUserClick = (user) => {\r\n    history.push(\"/profile/\" + user );\r\n  };\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    setFollowData(props.followerData);\r\n\r\n  }, [props.followerData]);\r\n\r\n\r\n  if (false && props.followerData.length < 1) {\r\n\r\n    return (\r\n      <p>sad, no followers</p>\r\n    );\r\n  }\r\n\r\n  let followersjsx = followData.map((user, idx) =>\r\n    <FollowerListItem key={idx} user={user} handleChange={handleUserClick} showFollowIcon={props.showFollowIcon}/>\r\n  );\r\n\r\n  return (\r\n    <List dense={true} className={classes.followerlist}>\r\n      {followersjsx}\r\n    </List>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  followerlist: {\r\n   marginTop: '20px',\r\n },\r\n   followColor: {\r\n     color: '#39A4B3'\r\n   },\r\n   notfollowColor: {\r\n     color: '#e8e8e8'\r\n   },\r\n   smallprofileimage: {\r\n     width: '40px'\r\n   },\r\n   pointer: {\r\n    cursor: 'pointer'\r\n   }\r\n});\r\n\r\nexport default FollowerList;\r\n","import AppBar from '@material-ui/core/AppBar';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <Typography\r\n      component=\"div\"\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    'aria-controls': `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nexport default function SimpleTabs(props) {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\">\r\n          <Tab label=\"Recept\" {...a11yProps(0)} />\r\n          <Tab label=\"Listor\" {...a11yProps(1)} />\r\n          <Tab label=\"Följare\" {...a11yProps(2)} />\r\n          <Tab label=\"Följer\" {...a11yProps(3)} />\r\n        </Tabs>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        {props.children[0]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        {props.children[1]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        {props.children[2]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        {props.children[3]}\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n","import Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport 'firebase/auth';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useParams } from \"react-router\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport userchef from '../assets/userchef.png';\r\nimport FollowerList from '../components/followerlist';\r\nimport RecipeGridList from '../components/recipegridlist';\r\nimport SimpleTabs from '../components/userpagetabs';\r\n// import FavoritePage from '../pages/favoritepage';\r\nimport ListPage from '../pages/listpage';\r\n\r\n\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\n// () =>\r\nfunction ProfilePage(props) {\r\n\r\n  const { username_url } = useParams();\r\n  // const [user, setUser] = useState(url_user); // props.match.params.url_user\r\n  const [user, setUser] = useState(undefined);\r\n  const [ifUser, setIfUser] = useState(false);\r\n  const [recipes, setRecipes] = useState(undefined);\r\n  //const [signedIn, setSignedIn] = useState(false);\r\n  const [followInfo, setFollowInfo] = useState([]);\r\n  const [followingInfo, setFollowingInfo] = useState([]);\r\n  const [following_this_user, setFollowing_this_user] = useState({following: false, email: \"\"});\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n  const history = useHistory();\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    // CLEAN UP - can be done better\r\n\r\n    recipeFetcher_new(username_url);\r\n\r\n    if(store.firestore_user && username_url === store.firestore_user.username) {\r\n\r\n      setIfUser(true)\r\n      followFetcher(username_url, store.firestore_user.email, \"followers\");\r\n      followFetcher(username_url, store.firestore_user.email, \"following\");\r\n    } else if ( store.firestore_user && username_url !== store.firestore_user.username ) {\r\n\r\n      getEmail(username_url) // fetches followers etc as well..\r\n      setIfUser(false)\r\n    }\r\n\r\n    // get email of user\r\n    email_promise(username_url).then((loadedDoc) => {\r\n\r\n      setUser(loadedDoc)\r\n    });\r\n\r\n  }, [store.firestore_user, username_url]);\r\n\r\n  var email_promise = function(url_username) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      firestore.collection('users').where('username', '==', url_username).get()\r\n        .then(snapshot => {\r\n\r\n          let doc_data;\r\n          snapshot.forEach(doc => {\r\n\r\n            doc_data = doc.data();\r\n          });\r\n          resolve(doc_data)\r\n        })\r\n    });\r\n  }\r\n\r\n  const followUser = () => {\r\n\r\n    let firebase_event_id = store.firestore_user.email + \"-follows-\" + following_this_user.email;\r\n\r\n    // in following, remove from following list\r\n    if(following_this_user.following) {\r\n      firestore.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\").doc(following_this_user.email).delete();\r\n      firestore.collection(\"followers\").doc(following_this_user.email).collection(\"followers\").doc(store.firestore_user.email).delete();\r\n      firestore.collection('events').doc(firebase_event_id).delete();\r\n\r\n    } else {\r\n      firestore.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\").doc(following_this_user.email).set({});\r\n      firestore.collection(\"followers\").doc(following_this_user.email).collection(\"followers\").doc(store.firestore_user.email).set({});\r\n\r\n      let date = new Date();\r\n\r\n      let event_follow_object = {\r\n        email: following_this_user.email,\r\n        event_image_url: store.firestore_user.profile_img_url,\r\n        other_username: store.firestore_user.username,\r\n        timestamp: date,\r\n        type: \"FOLLOWS\",\r\n        seen: false\r\n      };\r\n\r\n      firestore.collection('events').doc(firebase_event_id).set(event_follow_object);\r\n\r\n    }\r\n\r\n    setFollowing_this_user({following: !following_this_user.following, email: following_this_user.email});\r\n\r\n  }\r\n\r\n  // get email correspoding to username\r\n  function getEmail(url_user) {\r\n\r\n    // loop through all users to find email of user with this username\r\n    firestore.collection(\"users\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let doc_email = \"\";\r\n          if(doc.data().username === url_user) {\r\n            doc_email = doc.id;\r\n\r\n            followFetcher(username_url, doc_email, \"followers\");\r\n            followFetcher(username_url, doc_email, \"following\");\r\n          }\r\n\r\n          let found = false;\r\n          // check if user signed in is following the user of this profile page\r\n          firestore.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\")\r\n          .onSnapshot(function(querySnapshot) {\r\n\r\n              querySnapshot.forEach( doc => {\r\n\r\n                if(doc.id === doc_email) {\r\n\r\n                  found = true;\r\n                  setFollowing_this_user({following: true, email: doc_email});\r\n                }\r\n              })\r\n          });\r\n\r\n          if(found === false) // && doc_email !== \"\"\r\n          {\r\n            setFollowing_this_user({following: false, email: doc_email});\r\n          }\r\n\r\n        });\r\n\r\n    });\r\n  }\r\n\r\n  // get email of followers for the user profile in view\r\n  const followFetcher = (current_username, current_user_email, collection) => {\r\n\r\n    let follow_docs = [];\r\n\r\n    firestore.collection(\"followers\").doc(current_user_email).collection(collection)\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let data = {}; //  = doc.data(); // currently no other data\r\n          data.email = doc.id;\r\n          follow_docs.push(data);\r\n\r\n        })\r\n        followBuilder(current_username, follow_docs, collection);\r\n    });\r\n  }\r\n\r\n  // when all followers (emails) are collected\r\n  // function callback (current_username, follow_docs, collection) {\r\n  //  followBuilder(current_username, follow_docs, collection);\r\n  //}\r\n\r\n  // from emails, get further user info\r\n  const followBuilder = (current_username, follow_docs, collection) => {\r\n\r\n    let followers = [];\r\n    follow_docs.forEach((item, i) => {\r\n\r\n      firestore.collection(\"users\").doc(item.email)\r\n      .onSnapshot(function(doc) {\r\n          let data = doc.data();\r\n          followers.push({username: data.username, fullname: data.fullname, profile_img_url: data.profile_img_url, follows: false});\r\n      })\r\n    });\r\n\r\n    // callback2(followers, collection);\r\n    if(collection === \"followers\")\r\n      setFollowInfo(followers);\r\n    else if(collection === \"following\")\r\n      setFollowingInfo(followers);\r\n\r\n  }\r\n\r\n  // fetch recipes for the user profile in view\r\n  const recipeFetcher_new = (current_username) => {\r\n    firestore.collection(\"recipes\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        let recipe_docs = [];\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let data = doc.data();\r\n          if( data.user == current_username )\r\n          {\r\n            data.id = doc.id;\r\n            recipe_docs.push(data);\r\n          }\r\n        });\r\n        setRecipes(recipe_docs);\r\n    });\r\n  }\r\n\r\n  // fetch user correspoding to the url, compare to user signed in\r\n  /*\r\n  const userFetcher = () => {\r\n\r\n    // Create a reference to the cities collection\r\n    let usersRef = firestore.collection('users');\r\n\r\n    // Create a query against the collection\r\n    let queryRef = usersRef.where('username', '==', user);\r\n    let inSnapshot = false;\r\n\r\n    queryRef.onSnapshot(function(querySnapshot) {\r\n\r\n          inSnapshot = true;\r\n          querySnapshot.forEach( doc => {\r\n            let data = doc.data();\r\n\r\n            if(data.username === user) {\r\n              setIfUser(true);\r\n            }\r\n          });\r\n    });\r\n\r\n    if(inSnapshot === false)\r\n    {\r\n      setIfUser(false);\r\n    }\r\n  }\r\n  */\r\n  /*\r\n  <Button onClick={ () => firebase.auth().signOut()} variant=\"contained\" color=\"primary\">\r\n    Logga ut\r\n  </Button>\r\n  <button onClick={ () => firebase.auth().signOut() } name=\"signout\"> Logga ut </button>*/\r\n  let spinner_jsx = <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>;\r\n  let recipeContent = (recipes != undefined) ? <RecipeGridList recipes={recipes}/> : spinner_jsx;\r\n\r\n  let followBtn;\r\n  if (store.firestore_user && !ifUser && following_this_user.following == true) {\r\n\r\n    followBtn = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<RemoveIcon />}\r\n      onClick={() => followUser()}\r\n    >\r\n      Sluta följ\r\n    </Button>);\r\n\r\n  } else if (store.firestore_user && !ifUser) {\r\n\r\n    followBtn = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<AddIcon />}\r\n      onClick={() => followUser()}\r\n    >\r\n      Följ\r\n    </Button>);\r\n  }\r\n\r\n  // let followBtn =\r\n\r\n  let uni = (store.firestore_user != undefined) ? store.firestore_user.university : undefined;\r\n  let fullname = (store.firestore_user != undefined) ? store.firestore_user.fullname : undefined;\r\n  //let img_src = (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : userchef;\r\n\r\n  let img_src = userchef; // default user image\r\n  if (ifUser && store.firestore_user && store.firestore_user.profile_img_url) {\r\n    img_src = store.firestore_user.profile_img_url; // page shows profile for this user\r\n  } else if (!ifUser && user && user.profile_img_url) {\r\n    img_src = user.profile_img_url\r\n  }\r\n\r\n  return (\r\n\r\n    <React.Fragment>\r\n\r\n      <Grid\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n        className={classes.userinfo}\r\n      >\r\n\r\n        <Grid item xs={6}>\r\n          <span className={classes.username}>{username_url}</span>\r\n\r\n          { user != undefined &&\r\n            <span className={classes.university}> | {user.fullname}</span>\r\n          }\r\n\r\n          { (user != undefined && user.university != \"\") &&\r\n            <p className={classes.university}>🎓{user.university}</p>\r\n          }\r\n\r\n          { (user != undefined && user.bio != undefined ) &&\r\n            <p className={classes.bio}><i>{user.bio}</i></p>\r\n          }\r\n\r\n          <br/>\r\n\r\n          {ifUser && <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<SettingsIcon />}\r\n            onClick={() => history.push(\"/settings\")}\r\n\r\n          >\r\n            Inställningar\r\n          </Button>}\r\n          {followBtn}\r\n        </Grid>\r\n        <Grid item xs={3}>\r\n          <img src={img_src} alt=\"user-profile-img\"/>\r\n        </Grid>\r\n\r\n      </Grid>\r\n\r\n      <SimpleTabs value={0}>\r\n        <div style={{paddingTop: '15px'}}>\r\n        { recipeContent }\r\n        </div>\r\n        <div>\r\n        <ListPage/>\r\n        </div>\r\n        <div>\r\n        <FollowerList followerData={followInfo} showFollowIcon={true}/>\r\n        </div>\r\n        <div>\r\n        <FollowerList followerData={followingInfo} showFollowIcon={true}/>\r\n        </div>\r\n      </SimpleTabs>\r\n\r\n   </React.Fragment>\r\n\r\n  );\r\n// followInfo.length > 0 &&\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  userinfo: {\r\n   marginBottom: '20px',\r\n },\r\n spinner: {\r\n   display: 'flex',\r\n   justifyContent: 'center',\r\n   marginTop: 100\r\n },\r\n username: {\r\n   fontWeight: 'bold',\r\n   margin: '10px 0px'\r\n },\r\n university: {\r\n   margin: '10px 0px'\r\n },\r\n bio: {\r\n   fontSize: '13px',\r\n   maxWidth: '300px'\r\n }\r\n});\r\n\r\n\r\nexport default ProfilePage;\r\n","import Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\n\r\n\r\n// const emails = ['username@gmail.com', 'user02@gmail.com'];\r\nconst useStyles = makeStyles({\r\n  avatar: {\r\n    backgroundColor: blue[100],\r\n    color: blue[600],\r\n  },\r\n});\r\n\r\nfunction SimpleDialog(props) {\r\n  const classes = useStyles();\r\n  const { onClose, selectedValue, open } = props;\r\n  const [myFriends, setMyFriends] = useState(undefined);\r\n\r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    if(store.firestore_user) {\r\n      followFetcher(store.firestore_user.email, \"following\");\r\n    }\r\n\r\n  }, [store.firestore_user]);\r\n\r\n  const handleClose = () => {\r\n    onClose(selectedValue);\r\n  };\r\n\r\n  const handleListItemClick = (friend) => {\r\n\r\n    onClose(friend.email);\r\n\r\n    let date = new Date();\r\n\r\n    let event_tips_object = {\r\n      email: friend.email,\r\n      event_image_url: store.firestore_user.profile_img_url, // change to recipe image\r\n      other_username: store.firestore_user.username,\r\n      recipe: props.recipeId,\r\n      timestamp: date,\r\n      type: \"TIPS\",\r\n      seen: false\r\n    };\r\n\r\n    let firebase_event_id = store.firestore_user.email + \"-tips-\" + friend.email + \"-\" + props.recipeId;\r\n\r\n    firestore.collection('events').doc(firebase_event_id).set(event_tips_object);\r\n  };\r\n\r\n  // get email of followers for the user profile in view\r\n  const followFetcher = (current_user_email, collection) => {\r\n\r\n    let follow_docs = [];\r\n    let follow_data = [];\r\n\r\n    firestore.collection(\"followers\").doc(current_user_email).collection(collection)\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        querySnapshot.forEach( doc => {\r\n\r\n          firestore.collection(\"users\").doc(doc.id)\r\n          .onSnapshot(function(doc) {\r\n              let data = doc.data();\r\n              follow_data.push({email: doc.id, username: data.username, fullname: data.fullname, profile_img_url: data.profile_img_url, follows: false});\r\n          })\r\n\r\n        })\r\n        //followBuilder(current_username, follow_docs, collection);\r\n\r\n        setMyFriends(follow_data);\r\n    });\r\n  }\r\n\r\n  let email_jsx = (myFriends != undefined) ? myFriends.map((friend) => (\r\n    <ListItem button onClick={() => handleListItemClick(friend)} key={friend.email}>\r\n      <ListItemAvatar>\r\n        <Avatar className={classes.avatar}>\r\n          <PersonIcon />\r\n        </Avatar>\r\n      </ListItemAvatar>\r\n      <ListItemText primary={friend.username} />\r\n    </ListItem>\r\n  )) : null;\r\n\r\n  //\r\n  return (\r\n    <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={open}>\r\n      <DialogTitle id=\"simple-dialog-title\">Tipsa vän</DialogTitle>\r\n      <List>\r\n        {email_jsx}\r\n      </List>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nSimpleDialog.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  selectedValue: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default function PickUserDialog(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [selectedValue, setSelectedValue] = React.useState(\"temp\"); // emails[1]);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n    // props.handleClickOpen();\r\n  };\r\n\r\n  const handleClose = (value) => {\r\n    setOpen(false);\r\n    setSelectedValue(value);\r\n  };\r\n\r\n  // variant=\"outlined\" color=\"primary\"\r\n\r\n  return (\r\n    <div>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={handleClickOpen}>\r\n        Tipsa en vän\r\n      </Button>\r\n      <SimpleDialog recipeId={props.recipeId} selectedValue={selectedValue} open={open} onClose={handleClose} />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { FacebookIcon, FacebookShareButton } from \"react-share\";\r\n\r\nexport default function ReactShare(props) {\r\n\r\n  let full_path = 'https://campuskost.se/#' + props.location;\r\n  let shareUrl = full_path; // 'https://campuskost.se/recipe/Bananbr%C3%B6d/Bananbr%C3%B6d-Sporkis';\r\n  let title = 'Spana in det här receptet på Campuskost! Låter gott med ' + props.title;\r\n\r\n  console.log(shareUrl)\r\n\r\n  return (\r\n\r\n      <FacebookShareButton\r\n        url={shareUrl}\r\n        quote={title}\r\n        className=\"Demo__some-network__share-button\"\r\n        >\r\n\r\n        <div style={{marginTop: 10}}>\r\n          \r\n            <FacebookIcon size={32} round />\r\n          \r\n        </div>\r\n\r\n        </FacebookShareButton>\r\n\r\n  );\r\n}\r\n\r\n/*\r\n\r\n<FacebookMessengerShareButton\r\n  url={shareUrl}\r\n  quote={title}\r\n  className=\"Demo__some-network__share-button\"\r\n  >\r\n  <FacebookIcon size={32} round />\r\n  </FacebookMessengerShareButton>\r\n\r\n*/\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\n// import axios from \"axios\";\r\n\r\nconst dataFetchReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_INIT\":\r\n      return { ...state, isLoading: true, isError: false };\r\n    case \"FETCH_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        hasErrored: false,\r\n        errorMessage: \"\",\r\n        data: action.payload\r\n      };\r\n    case \"FETCH_FAILURE\":\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        hasErrored: true,\r\n        errorMessage: \"Data Retrieve Failure\"\r\n      };\r\n    case \"REPLACE_DATA\":\r\n      // The record passed (state.data) must have the attribute \"id\"\r\n      const newData = state.data.map(rec => {\r\n        return rec.id === action.replacerecord.id ? action.replacerecord : rec;\r\n      });\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        hasErrored: false,\r\n        errorMessage: \"\",\r\n        data: newData\r\n      };\r\n    default:\r\n      throw new Error();\r\n  }\r\n};\r\n\r\nconst useFirebaseFetch = (firebaseRef, initialData) => {\r\n  const [db_Ref] = useState(firebaseRef);\r\n\r\n  const [state, dispatch] = useReducer(dataFetchReducer, {\r\n    isLoading: false,\r\n    hasErrored: false,\r\n    errorMessage: \"\",\r\n    data: initialData\r\n  });\r\n\r\n  useEffect(() => {\r\n    let didCancel = false;\r\n\r\n    const fetchData = async () => {\r\n      dispatch({ type: \"FETCH_INIT\" });\r\n\r\n      db_Ref.get().then(function(doc) {\r\n\r\n        if (doc.exists) {\r\n  \r\n          if (!didCancel) {\r\n            dispatch({ type: \"FETCH_SUCCESS\", payload: doc.data() });\r\n          }\r\n  \r\n        } else {\r\n            if (!didCancel) {\r\n                dispatch({ type: \"FETCH_FAILURE\" });\r\n            }\r\n        }\r\n\r\n      })\r\n      .catch(err => {\r\n        if (!didCancel) {\r\n            dispatch({ type: \"FETCH_FAILURE\" });\r\n        }\r\n      });\r\n\r\n    };\r\n\r\n    fetchData();\r\n\r\n    // component is unmounted\r\n    return () => {\r\n      didCancel = true;\r\n    };\r\n\r\n  }, [db_Ref]);\r\n\r\n  const updateDataRecord = record => {\r\n    dispatch({\r\n      type: \"REPLACE_DATA\",\r\n      replacerecord: record\r\n    });\r\n  };\r\n\r\n  return { ...state, updateDataRecord };\r\n};\r\n\r\nexport default useFirebaseFetch;","import Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useParams } from \"react-router\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport PickUserDialog from '../components/pickuserdialog';\r\nimport ReactShare from '../components/ReactShare';\r\nimport useFirebaseFetch from \"../reducers/useFirebaseFetch\";\r\n\r\nfunction RecipePage(props) {\r\n\r\n  const [ ifUser, setIfUser] = useState(false);\r\n  const [ recipe, setRecipe] = useState(undefined);\r\n  const [ saved, setSaved ] = useState({likes: false, doc_id: undefined});\r\n  const [ tried, setTried ] = useState(false);\r\n  const { recipetitle, id } = useParams();\r\n  \r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const fireUser = useSelector(state => state.fireReducer.firestore_user);\r\n\r\n  let init_recipe_ref = firestore.collection('recipes').doc(id);\r\n\r\n  const {data, isLoading, hasErrored, errorMessage, updateDataRecord\r\n  } = useFirebaseFetch(init_recipe_ref, []);\r\n\r\n  // console.log(recipe_data)\r\n\r\n  /*\r\n  useEffect(() => {\r\n    console.log(isLoading)\r\n    console.log(hasErrored)\r\n\r\n    if(isLoading === false && hasErrored === false) {\r\n      console.log(data)\r\n    } \r\n\r\n  }, isLoading); */\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    let ref = firestore.collection('recipes').doc(id);\r\n    recipeFetcher(ref);\r\n    // likeFetcher();\r\n\r\n  }, []);\r\n\r\n  // know if recipe belongs to this user\r\n  useEffect(() => {\r\n    // exit funtion if undefined\r\n    if(!store.firestore_user || !recipe || !recipe.user_doc.username )\r\n      return;\r\n\r\n    if(recipe.user_doc.username == store.firestore_user.username) {\r\n      setIfUser(true);\r\n    }\r\n\r\n    //let queryRef = firestore.collection('likes').where('email', '==', store.firestore_user.email);\r\n    //likeFetcher(queryRef);\r\n    likeFetcher(store.firestore_user.email);\r\n\r\n  }, [store.firestore_user, recipe]);\r\n\r\n  const likeFetcher = (current_email) => {\r\n\r\n    // let recipe_likesRef = firestore.collection('recipe_likes');\r\n    let likesRef = firestore.collection('recipe_likes').doc(current_email);\r\n\r\n    likesRef.get().then(function(doc) {\r\n\r\n      let isliked;\r\n\r\n      if (doc.exists) {\r\n\r\n        let data = doc.data();\r\n        isliked = ( data.liked_recipes[recipe.id] !== undefined ) ? data.liked_recipes[recipe.id] : false;\r\n\r\n      } else {\r\n        firestore.collection('recipe_likes').doc(current_email).set({liked_recipes: {}});\r\n        isliked = false;\r\n      }\r\n\r\n      // if (isliked)\r\n      setSaved({likes: isliked, doc_id: current_email});\r\n\r\n    })\r\n    .catch(err => {\r\n      console.log('Error getting documents', err);\r\n    });\r\n\r\n  }\r\n\r\n  const likeRecipe = () => {\r\n\r\n    if(!store.firestore_user) {\r\n      console.log(\"user not loaded yet..\")\r\n      return;\r\n    }\r\n\r\n    let likesRef = firestore.collection('recipe_likes').doc(store.firestore_user.email);\r\n\r\n    likesRef.get().then(function(doc) {\r\n\r\n      let data;\r\n\r\n      // add or remove like\r\n      if (doc.exists) {\r\n\r\n        data = doc.data();\r\n        data.liked_recipes[recipe.id] = (saved.likes) ? false : true;\r\n        firestore.collection(\"recipe_likes\").doc(doc.id).update(data);\r\n      }\r\n\r\n    });\r\n\r\n    setSaved({likes: !saved.likes, doc_id: saved.doc_id});\r\n\r\n  };\r\n\r\n  const tryRecipe = () => {\r\n    setTried( !tried );\r\n  };\r\n\r\n  const recipeToFriend = () => {\r\n    //setTried( !tried );\r\n  };\r\n\r\n  const editRecipe = () => {\r\n\r\n    dispatch({\r\n      type: \"SETDESCRIPTIONS\",\r\n      descriptions: recipe.description\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETINGREDIENTS\",\r\n      ingredients: recipe.ingredients\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETTITLE\",\r\n      title: recipe.title\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETEDITMODE\",\r\n      editmode: true,\r\n      recipe_id: id\r\n    })\r\n\r\n    history.push(\"/upload\" );\r\n  }\r\n\r\n  const removeRecipe = () => {\r\n\r\n    firestore.collection('recipes').doc(id).delete();\r\n    history.push(\"/home\");\r\n\r\n  }\r\n\r\n  const handleUserClick = () => {\r\n    history.push(\"/profile/\" + recipe.user_doc.username );\r\n  };\r\n\r\n\r\n  var user_promise = function(user_ref) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      // reject();\r\n\r\n      user_ref.get().then(function(doc) {\r\n\r\n          if (!doc.exists)\r\n            reject();\r\n\r\n          let doc_data = doc.data(); // append to recipe data\r\n          resolve(doc_data);\r\n\r\n        });\r\n    });\r\n  }\r\n\r\n  const recipeFetcher = (ref) => {\r\n    ref.get().then(function(doc) {\r\n      if (doc.exists) {\r\n          let data = doc.data()\r\n          data.id = doc.id;\r\n\r\n          user_promise(data.user_ref).then((extended_data) => {\r\n\r\n            data.user_doc = extended_data;\r\n            setRecipe(data);\r\n\r\n          }).catch(() => {\r\n            console.log(\"Could not get user data for recipe owner\")\r\n          })\r\n\r\n      }\r\n    }).catch(function(error) {\r\n        console.log(\"Error getting document:\", error);\r\n    });\r\n\r\n  }\r\n\r\n  let icon = (saved.likes === true) ? <FavoriteIcon/> : <FavoriteBorderIcon/>;\r\n  let r_img = ( recipe !== undefined) ? recipe.img : 'temp_food1';\r\n  let triedbyNum = 3;\r\n  // , zIndex: '-1'\r\n\r\n  /*\r\n\r\n  <h2 style={{display: 'inline'}}>\r\n    <Button disableTouchRipple onClick={likeRecipe}\r\n    style={{display: 'inline', backgroundColor: 'transparent'}}>\r\n      {icon}\r\n    </Button>\r\n    { recipetitle + ' | ' }\r\n\r\n  </h2>\r\n  <h2 onClick={ handleUserClick} style={{display: 'inline'}}>\r\n    { recipe.user }\r\n  </h2>\r\n\r\n  */\r\n\r\n  let img_src;\r\n\r\n  if  ( recipe !== undefined && recipe.img_url !== undefined) {\r\n    img_src = recipe.img_url;\r\n  } else {\r\n    img_src = require('../assets/'+ r_img + '.jpg');\r\n  }\r\n\r\n\r\n  return (\r\n\r\n    <div>\r\n\r\n\r\n\r\n      { recipe !== undefined &&\r\n        <div>\r\n\r\n          <div className={classes.recipeheader}>\r\n          <span>\r\n            <Button disableTouchRipple onClick={likeRecipe}\r\n            style={{display: 'inline', backgroundColor: 'transparent'}}>\r\n              {icon}\r\n            </Button>\r\n            { recipetitle + ' | ' }\r\n\r\n          </span>\r\n          <span>\r\n\r\n            <Button disableTouchRipple onClick={handleUserClick}\r\n            style={{display: 'inline', backgroundColor: 'transparent', textTransform: 'none'}}>\r\n              { recipe.user_doc.username }\r\n            </Button>\r\n          </span>\r\n          </div>\r\n\r\n        <Grid\r\n          container\r\n          spacing={1}\r\n          justify=\"center\"\r\n\r\n        >\r\n          <Grid item xs={6} >\r\n            <img src={img_src} className={classes.listimage} alt={\"recipe img\"} />\r\n          </Grid>\r\n          <Grid item xs={4} className={classes.imagesidebar}>\r\n            <div onClick={recipeToFriend}>\r\n              <PickUserDialog recipeId={recipe.id}/>\r\n            </div>\r\n\r\n            <ReactShare location={history.location.pathname} title={recipetitle}/>\r\n\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <IngredientsList ingredients={recipe.ingredients}/>\r\n        <RecipeDecsList description={recipe.description}/>\r\n\r\n        {ifUser &&\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<EditIcon />}\r\n            onClick={editRecipe}\r\n          >\r\n            Ändra recept\r\n          </Button>\r\n        }\r\n\r\n        &nbsp; &nbsp; &nbsp;\r\n\r\n        {ifUser &&\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<EditIcon />}\r\n            onClick={removeRecipe}\r\n          >\r\n            Ta bort recept\r\n          </Button>\r\n        }\r\n\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n\r\n  ); // style={{display: 'inline', backgroundColor: 'transparent', textTransform: 'none'}}\r\n\r\n  /*\r\n\r\n  // className={classes.triedby}\r\n\r\n  { tried === true &&\r\n  <div className={classes.triedby} >\r\n    <span className={classes.triedbyText}> Testat av </span>\r\n    <span className={classes.triedbyNum}> {triedbyNum} </span>\r\n    <span className={classes.triedbyText}> { triedbyNum > 1 ? \"kockar\" : \"kock\" }! </span>\r\n  </div>\r\n  }\r\n  { tried === false &&\r\n  <div className={classes.triedby} onClick={tryRecipe}>\r\n    <span className={classes.triedbyText}>\r\n      Bli den första att testa detta recept!\r\n    </span>\r\n  </div>\r\n  }\r\n\r\n  */\r\n\r\n}\r\n\r\n\r\n\r\nfunction IngredientsList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n\r\n  let temp_ingredients = [\r\n  {name: 'mjöl (default data)', quantity: \"2\", measure: \"dl\"},\r\n  {name: 'salt', quantity: \"1\", measure: \"tsk\"},\r\n  {name: 'mjölk', quantity: \"4\", measure: \"dl\"},\r\n  {name: 'ägg', quantity: \"2\", measure: \"\"}\r\n];\r\n\r\n  let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n\r\n  let ingredientsjsx = ingredients.map((ingred, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem>\r\n      <ListItemText\r\n        primary={ ingred.quantity + \" \" + ingred.measure + \" \" + ingred.name }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < ingredients.length - 1 && <Divider component=\"li\" /> }\r\n  </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h3> Ingredienser </h3>\r\n      <List dense={true} className={classes.ingredientslist}>\r\n        {ingredientsjsx}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nfunction RecipeDecsList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  let temp_description = [\r\n  {order: 0, text: \"Knäck äggen i en bunke (default data)\"},\r\n  {order: 2, text: \"Stek i pannan meed smör eller kokosolja\"},\r\n  {order: 1, text: \"Vispa i mjöl, mjölk och salt\"}\r\n  ];\r\n\r\n  let description = (props.description != undefined) ? props.description : temp_description;\r\n\r\n  // sort by order\r\n  description.sort( (desc1, desc2) => desc1.order - desc2.order );\r\n\r\n  let descjsx = description.map((desc, idx) =>\r\n    <RecipeDecsListItem idx={idx} key={idx} desc={desc.text} len={description.length}/>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h3> Gör så här </h3>\r\n      <List dense={true} className={classes.ingredientslist}>\r\n        {descjsx}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RecipeDecsListItem(props) {\r\n\r\n  const [checked, setChecked] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  let idx = props.idx;\r\n\r\n  const onIngredClick = (idx) => {\r\n    setChecked(!checked);\r\n  }\r\n\r\n  let icon = (checked === true ) ? <CheckBoxIcon className={classes.checkIcon}/> : <CheckBoxOutlineBlankIcon className={classes.checkIcon}/> ;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListItem\r\n        onClick={() => onIngredClick(idx)}\r\n      >\r\n        {icon}\r\n        <ListItemText primary={ props.desc }/>\r\n      </ListItem>\r\n      { idx < props.len - 1 && <Divider component=\"li\" /> }\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  listimage: {\r\n    maxHeight: '100%',\r\n    maxWidth: '100%',\r\n    borderRadius: '4px',\r\n    objectFit: 'cover',\r\n    minHeight: '150px',\r\n    maxWidth: '150px'\r\n  },\r\n  imagesidebar: {\r\n    padding: 5\r\n  },\r\n  triedby: {\r\n    background: '#f1f1f1',\r\n    borderRadius: '4px',\r\n    padding: 5,\r\n    textAlign: 'center',\r\n    marginTop: 5\r\n  },\r\n  triedbyText: {\r\n    margin: '0',\r\n  },\r\n  triedbyNum: {\r\n    fontWeight: 'bold',\r\n    display: 'block',\r\n    fontSize: '2em'\r\n  },\r\n  ingredientslist: {\r\n   marginTop: '20px',\r\n },\r\n checkIcon: {\r\n   marginRight: '10px',\r\n   color: '#68bb8c'\r\n },\r\n recipeheader: {\r\n   margin: '20px 0px',\r\n   fontWeight: 'bold'\r\n }\r\n});\r\n\r\nexport default RecipePage;\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport FollowerList from '../components/followerlist';\r\nimport RecipeGridList from '../components/recipegridlist';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction SearchPage(props) {\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const [recipes, setRecipes] = useState(undefined);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n\r\n  const history = useHistory();\r\n\r\n  let searchstring = \"\";\r\n\r\n  useEffect(() => {\r\n    userFetcher('users');\r\n    userFetcher('recipes');\r\n  }, []);\r\n\r\n  const userFetcher = (collection_name) => {\r\n\r\n    firestore.collection(collection_name).onSnapshot(function(querySnapshot) {\r\n\r\n          let temp_users = [];\r\n          querySnapshot.forEach( doc => {\r\n            let data = doc.data();\r\n            data.id = doc.id;\r\n            temp_users.push(data);\r\n          });\r\n\r\n          if (collection_name === 'users')\r\n            setUsers(temp_users);\r\n          if (collection_name === 'recipes')\r\n            setRecipes(temp_users);\r\n      });\r\n  }\r\n\r\n  let followingInfo = users.map( user => {\r\n    let obj = {username: user.username, fullname: user.fullname, profile_img_url: user.profile_img_url, follows: false};\r\n    return obj;\r\n  });\r\n\r\n  \r\n  // Sök specifikt recept eller användare ovan\r\n\r\n  return (\r\n\r\n    <div>\r\n      <h3>Sökresultat</h3>\r\n\r\n\r\n\r\n      { searchstring === \"\" && <p> Sökfunktionen kommer snart! Tills dess visas alla användare och recept nedan </p> }\r\n\r\n      { users.length <= 0 && <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div> }\r\n      { users.length > 0 && <React.Fragment>\r\n      <b> Alla användare: </b>\r\n      <div>\r\n      <FollowerList followerData={followingInfo}/>\r\n      </div>\r\n      <b> Alla recept: </b>\r\n      <div style={{paddingTop: '15px'}}>\r\n      { recipes != undefined && <RecipeGridList recipes={recipes}/> }\r\n\r\n      </div>\r\n      </React.Fragment> }\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\nexport default SearchPage;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function AlertDialog(props) {\r\n\r\n  const handleClose = (chosedYes) => {\r\n    props.onAlertClose(chosedYes);\r\n  };\r\n\r\n  return (\r\n\r\n      <Dialog\r\n        open={props.open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {props.message}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose(false)} color=\"primary\">\r\n            {props.NoOptionText}\r\n          </Button>\r\n          <Button onClick={() => handleClose(true)} color=\"primary\" autoFocus>\r\n            {props.yesOptionText}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n  );\r\n}\r\n","import Button from '@material-ui/core/Button';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\nimport React, { useState } from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AlertDialog from '../components/AlertDialog';\r\n\r\nfunction Settings(props) {\r\n\r\n  const [username_textfield, setUsername_textfield] = useState(\"\");\r\n  const [fullname_textfield, setFullname_textfield] = useState(\"\");\r\n  const [bio_textfield, setBio_textfield] = useState(\"\");\r\n  const [imageUrl, setImageUrl] = useState(undefined);\r\n\r\n  const [has_changed, setHas_changed] = useState(false);\r\n  const [labelWidth, setLabelWidth] = useState(0);\r\n  const [in_editmode, setIn_editmode] = useState(false);\r\n  const [isAvailable, setIsAvailable] = useState(true);\r\n  const labelRef = React.useRef(null);\r\n  const [openSetting, setOpenSetting] = useState(\"\");\r\n\r\n  const [openAlert, setOpenAlert] = useState(false);\r\n\r\n  const [imageUrlList, setImageUrlList] = useState([]);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    setLabelWidth(labelRef.current.offsetWidth);\r\n\r\n    const storageRef = firebase.storage().ref().child('profileimages');\r\n    const available_images = [];\r\n\r\n    // Find all the prefixes and items.\r\n    storageRef.listAll().then(function(res) {\r\n      res.items.forEach(function(itemRef) {\r\n        itemRef.getDownloadURL().then((url) => { available_images.push(url); });\r\n      });\r\n      setImageUrlList(available_images);\r\n\r\n    }).catch(function(error) {\r\n      console.log(\"could not get storage list\")\r\n    });\r\n\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n\r\n    if(store.firestore_user && (username_textfield !== store.firestore_user.username ||\r\n      imageUrl !== store.firestore_user.profile_img_url ||\r\n      fullname_textfield !== store.firestore_user.fullname ||\r\n      (!store.firestore_user.bio || (store.firestore_user.bio && bio_textfield !== store.firestore_user.bio)) )) {\r\n      setHas_changed(true);\r\n    } else {\r\n      setHas_changed(false);\r\n    }\r\n  }, [username_textfield, fullname_textfield, bio_textfield, imageUrl]);\r\n\r\n  // when information about user signed in arrives, set textfield value\r\n  React.useEffect(() => {\r\n    if(store.firestore_user) {\r\n      setUsername_textfield(store.firestore_user.username)\r\n      setFullname_textfield(store.firestore_user.fullname)\r\n\r\n      if (store.firestore_user.profile_img_url !== undefined)\r\n        setImageUrl(store.firestore_user.profile_img_url);\r\n\r\n      if (store.firestore_user.bio !== undefined)\r\n        setBio_textfield(store.firestore_user.bio);\r\n    }\r\n  }, [store.firestore_user]);\r\n\r\n\r\n  // exit edit mode\r\n  function cancel_edit() {\r\n\r\n    setIn_editmode(false);\r\n    if(has_changed) {\r\n      setUsername_textfield(store.firestore_user.username);\r\n      setFullname_textfield(store.firestore_user.fullname);\r\n      setBio_textfield(store.firestore_user.bio);\r\n      setImageUrl(store.firestore_user.profile_img_url);\r\n    }\r\n  }\r\n\r\n  function signOut() {\r\n\r\n    // sign out if signed in\r\n    if (firebase.auth().currentUser) {\r\n      firebase.auth().signOut();\r\n      history.push(\"/login\");\r\n    }\r\n  }\r\n\r\n  const editUsername = (new_value) => {\r\n    setUsername_textfield(new_value);\r\n    setIsAvailable(true);\r\n  }\r\n\r\n  var toChangePromise = function(current_username) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let listsRef = firestore.collection('recipes');\r\n      let list_ids = [];\r\n\r\n      let query = listsRef.where('user', '==', current_username).get()\r\n        .then(snapshot => {\r\n\r\n          snapshot.forEach(doc => {\r\n            list_ids.push(doc.id);\r\n          });\r\n          resolve(list_ids)\r\n        })\r\n    });\r\n  }\r\n\r\n  var isAvailableCheck = function() {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      // check if available\r\n      let is_available = true;\r\n      let query = firestore.collection('users').where('username', '==', username_textfield).get()\r\n        .then(snapshot => {\r\n          snapshot.forEach(doc => {\r\n            is_available = false;\r\n          });\r\n          resolve(is_available)\r\n        })\r\n    });\r\n  }\r\n\r\n  // update in Firebase\r\n  function save_fullname() {\r\n\r\n    // Set the 'username' field of the user\r\n    firestore.collection('users').doc(store.firestore_user.email).update({fullname: fullname_textfield});\r\n    setIn_editmode(false);\r\n  }\r\n\r\n  // update in Firebase\r\n  function save_bio() {\r\n\r\n    // Set the 'username' field of the user\r\n    firestore.collection('users').doc(store.firestore_user.email).update({bio: bio_textfield});\r\n    setIn_editmode(false);\r\n  }\r\n\r\n  // update in Firebase\r\n  function save_username() {\r\n\r\n    isAvailableCheck().then((is_available) => {\r\n\r\n      if(is_available === false)\r\n      {\r\n        setIsAvailable(false);\r\n        return;\r\n      }\r\n\r\n      // Set the 'username' field of the user\r\n      firestore.collection('users').doc(store.firestore_user.email).update({username: username_textfield});\r\n      setIn_editmode(false);\r\n\r\n      // update other docs (recipe docs) with this username\r\n      toChangePromise(store.firestore_user.username).then((loadedIds) => {\r\n\r\n        loadedIds.map( _id => {\r\n          firestore.collection('recipes').doc(_id).update({user: username_textfield});\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  // update in Firebase\r\n  function save_img() {\r\n\r\n    // Set the 'username' field of the user\r\n    firestore.collection('users').doc(store.firestore_user.email).update({profile_img_url: imageUrl});\r\n  }\r\n\r\n  function newName() {\r\n\r\n    let preNames = [\"Master\", \"Lill\", \"Pro\"];\r\n    let postNames = [\"Chef\", \"Sleven\", \"Pasta\", \"Vego\"];\r\n\r\n    let rand1 = Math.floor(Math.random() * preNames.length);\r\n    let rand2 = Math.floor(Math.random() * postNames.length);\r\n\r\n    let pre_n = preNames[rand1];\r\n    let post_n = postNames[rand2];\r\n\r\n    // props\r\n    return pre_n + post_n;\r\n  }\r\n\r\n  const randomName = () => {\r\n    let temp_username = newName();\r\n    setUsername_textfield(temp_username);\r\n  }\r\n\r\n  const randomImg = () => {\r\n\r\n    let continue_search = true;\r\n    let img_index, temp_url;\r\n    do {\r\n\r\n      img_index = Math.floor(Math.random() * imageUrlList.length);\r\n      temp_url = imageUrlList[img_index];\r\n\r\n      if(temp_url !== imageUrl) {\r\n        continue_search = false;\r\n        setImageUrl(temp_url);\r\n      }\r\n\r\n    } while(continue_search);\r\n  }\r\n\r\n  const onExpand = (e, expanded, id) => {\r\n    let openval = expanded ? id : \"\";\r\n    setOpenSetting(openval);\r\n    cancel_edit();\r\n  }\r\n\r\n  const removeAccount = () => {\r\n    setOpenAlert(true);\r\n  }\r\n\r\n  const onDeleteAccChoice = (chosedDelete) => {\r\n\r\n    console.log(chosedDelete);\r\n    setOpenAlert(false);\r\n\r\n    firestore.collection('users').doc(store.firestore_user.email).delete();\r\n    history.push(\"/home\");\r\n\r\n  }\r\n\r\n\r\n  //let signText = (firebase.auth().currentUser) ? \"Logga ut\" : \"Logga in\";\r\n\r\n  // let username = (store.firestore_user) ? store.firestore_user.username : \"unset\";\r\n\r\n  // fix if undefined\r\n  // style={{display: 'inline-block'}}\r\n\r\n  let img_src = imageUrl; // (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : undefined;\r\n\r\n  return (\r\n\r\n    <div>\r\n      <div className={classes.login_div}>\r\n        <h3>Inställningar</h3>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"username\")}\r\n          expanded={openSetting === \"username\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Användarnamn</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n\r\n            <FormControl variant=\"outlined\">\r\n              <InputLabel ref={labelRef} htmlFor=\"component-outlined\"> Användarnamn </InputLabel>\r\n              <OutlinedInput\r\n                value={username_textfield}\r\n                onChange={(e) => editUsername(e.target.value)}\r\n                labelWidth={labelWidth}\r\n                disabled={!in_editmode}\r\n              />\r\n            </FormControl>\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra användarnamn\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => randomName()}\r\n                className={`${classes.buttons} ${classes.rainbow}`}\r\n              >\r\n                Slumpa 🤪\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_username()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara nytt användarnamn\r\n              </Button>\r\n              { !isAvailable &&\r\n              <Typography className={classes.available_text} >Namnet är upptaget</Typography>\r\n              }\r\n            </React.Fragment>\r\n            }\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"fullname\")}\r\n          expanded={openSetting === \"fullname\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Namn</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n\r\n            <FormControl variant=\"outlined\">\r\n              <InputLabel ref={labelRef} htmlFor=\"component-outlined\"> Namn </InputLabel>\r\n              <OutlinedInput\r\n                value={fullname_textfield}\r\n                onChange={(e) => setFullname_textfield(e.target.value)}\r\n                labelWidth={labelWidth}\r\n                disabled={!in_editmode}\r\n              />\r\n            </FormControl>\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra namn\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_fullname()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara namn\r\n              </Button>\r\n            </React.Fragment>\r\n            }\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"bio\")}\r\n          expanded={openSetting === \"bio\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Biografi</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n\r\n            <FormControl variant=\"outlined\">\r\n\r\n              <TextareaAutosize\r\n                value={bio_textfield}\r\n                onChange={(e) => setBio_textfield(e.target.value)}\r\n                disabled={!in_editmode}\r\n              />\r\n            </FormControl>\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra biografi\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_bio()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara biografi\r\n              </Button>\r\n            </React.Fragment>\r\n            }\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"profileimage\")}\r\n          expanded={openSetting === \"profileimage\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Profilbild</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails style={{display: 'flex', flexWrap: 'wrap'}}>\r\n\r\n            { img_src &&\r\n            <div className={classes.fullrow}>\r\n              <img src={img_src} className={classes.profileimage}  alt={\"profile img\"} />\r\n            </div>\r\n            }\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra bild\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => randomImg()}\r\n                className={`${classes.buttons} ${classes.rainbow}`}\r\n              >\r\n                Slumpa 🤪\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_img()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara ny profilbild\r\n              </Button>\r\n            </React.Fragment>\r\n            }\r\n\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n      </div>\r\n\r\n      <div style={{display: 'flex'}}>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => signOut()}\r\n        className={classes.center_btn}\r\n      >\r\n        Logga ut\r\n      </Button>\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"secondary\"\r\n        onClick={() => removeAccount()}\r\n        className={classes.center_btn}\r\n      >\r\n        Radera konto\r\n      </Button>\r\n      </div>\r\n\r\n      <AlertDialog\r\n      open={openAlert}\r\n      onAlertClose={onDeleteAccChoice}\r\n      title=\"Är du säker?\"\r\n      message=\"Är du säker på att du vill radera ditt konto på Campuskost?\"\r\n      yesOptionText=\"Ja\"\r\n      NoOptionText=\"Oj, nej!\"/>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  login_div: {\r\n    background: '#f5f5f5',\r\n    padding: '1em',\r\n    margin: '0.5em',\r\n    borderRadius: '15px'\r\n },\r\n buttons: {\r\n   margin: '5px'\r\n },\r\n rainbow: {\r\n   backgroundImage: 'linear-gradient(to bottom right, #ff49e0 , #26ffa7)',\r\n   fontWeight: 'bold'\r\n },\r\n center_btn: {\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    marginTop: '20px',\r\n    display: 'flex'\r\n },\r\n available_text: {\r\n    fontSize: '13px',\r\n    color: '#f50057',\r\n    margin: '8px'\r\n},\r\nprofileimage: {\r\n  marginLeft: 'auto',\r\n  marginRight: 'auto',\r\n  marginBottom: '15px'\r\n},\r\nfullrow: {\r\n  flex: '0 0 100%',\r\n  display: 'flex'\r\n}\r\n});\r\n\r\nexport default Settings;\r\n","\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport '../style/GlobalCssButton.css';\r\n\r\n\r\nfunction DescriptionList(props) {\r\n\r\n  const [editObject, setEditObject] = useState(undefined);\r\n  const [order, setOrder] = useState(-2);\r\n  const [text, setText] = useState(\"\");\r\n\r\n  const [descriptions, setDescriptions] = useState(() => initiate_descriptions());\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n\r\n  const ingredientsDisp = () => {\r\n    dispatch({\r\n      type: \"SETDESCRIPTIONS\",\r\n      descriptions: descriptions\r\n    })\r\n  }\r\n\r\n  function initiate_descriptions() {\r\n    return (props.description !== undefined) ? props.description : [];\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    let existing_descriptions = upload_store.descriptions;  // in in edit mode\r\n    if(existing_descriptions !== undefined)\r\n    {\r\n      setDescriptions(existing_descriptions);\r\n    }\r\n\r\n  }, []);\r\n\r\n\r\n  const addDescription = () => {\r\n\r\n    let temp_list = descriptions.slice(0);\r\n    let new_obj = {order: descriptions.length + 1, text: \"\"};\r\n    temp_list.push(new_obj);\r\n    setEditObject(new_obj);\r\n    setDescriptions(temp_list);\r\n\r\n    setOrder(descriptions.length + 1);\r\n    ingredientsDisp();\r\n  }\r\n\r\n  const removeDescription = () => {\r\n\r\n    let temp_list = descriptions.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n    temp_list.splice(ind, 1);\r\n\r\n    setDescriptions(temp_list);\r\n    setEditObject(undefined);\r\n\r\n    setText(\"\");\r\n    setOrder(-321); //\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const listClick = (object) => {\r\n\r\n    setEditObject(object);\r\n\r\n    // first letter to toUpperCase\r\n    object.text = (object.text.length > 0) ? object.text[0].toUpperCase() + object.text.slice(1) : \"\";\r\n\r\n    setText(object.text);\r\n    // setOrder(object.order);\r\n\r\n  }\r\n\r\n  const saveEdited = () => {\r\n\r\n\r\n    let temp_list = descriptions.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n\r\n    let obj_copy = editObject;\r\n    obj_copy.text = (text.length > 0) ? text[0].toUpperCase() + text.slice(1) : \"\";\r\n    //obj_copy.text = text[0].toUpperCase() + text.slice(1);\r\n    // obj_copy.order = order;\r\n\r\n    temp_list[ind] = obj_copy;\r\n\r\n    if(text.length < 1) {\r\n      console.log(\"not relevant to save\")\r\n    }\r\n\r\n    setDescriptions(temp_list);\r\n\r\n    setEditObject(undefined);\r\n    setText(\"\");\r\n    setOrder(-123)\r\n\r\n    props.handleAdd(temp_list.length);\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const enterPress = (ev) => {\r\n\r\n    if (ev.key === 'Enter') {\r\n\r\n      saveEdited();\r\n      ev.preventDefault();\r\n    }\r\n\r\n  }\r\n\r\n  // let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n  // idx < ingredients.length - 1\r\n\r\n\r\n  let descriptionjsx = descriptions.map((desc, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem onClick={() => listClick(desc)} className={(descriptions.indexOf(editObject) === idx ? 'testis' : '')} style={{minHeight: 40}}>\r\n      <ListItemText\r\n        primary={ desc.order + \". \" + desc.text }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < descriptions.length - 1 && <Divider component=\"li\" /> }\r\n\r\n  </React.Fragment>\r\n  );\r\n\r\n\r\n\r\n  return (\r\n    <div >\r\n\r\n      <Grid className=\"test\"\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n      <Grid item xs={12}>\r\n        <List dense={true} className={classes.ingredientslist}>\r\n\r\n          {descriptionjsx}\r\n\r\n          { editObject === undefined &&\r\n\r\n            <ListItem alignItems=\"center\" onClick={() => addDescription()} className={classes.newListItem}>\r\n              <ListItemText\r\n                primary=\"Lägg till beskrivning\"\r\n              />\r\n            </ListItem>\r\n          }\r\n\r\n\r\n        </List>\r\n      </Grid>\r\n\r\n      { (editObject !== undefined  ) &&\r\n\r\n        <React.Fragment>\r\n\r\n        <Grid item xs={10}>\r\n          <TextField variant=\"outlined\" label=\"steg\" InputLabelProps={{shrink: true}} value={text} onChange={ event => setText(event.target.value)} onKeyPress={(ev) => enterPress(ev)}/>\r\n        </Grid>\r\n\r\n        <Grid item xs={1}>\r\n          <SaveIcon onClick={saveEdited} className={classes.greenicon} />\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <DeleteForeverIcon onClick={removeDescription} className={classes.redicon} />\r\n        </Grid>\r\n\r\n        </React.Fragment>\r\n\r\n      }\r\n\r\n      </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n// .toLowerCase()\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#3f51b5',\r\n    color: 'white',\r\n    borderRadius: '5px',\r\n    width: '200px'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  }\r\n}));\r\n\r\nexport default DescriptionList;\r\n","import React from \"react\";\r\n\r\nconst noop = () => {};\r\n\r\nconst FileInput = ({ value, onChange = noop, ...rest }) => (\r\n  <div>\r\n    {Boolean(value.length) && (\r\n      <div>Selected files: {value.map(f => f.name).join(\", \")}</div>\r\n    )}\r\n    <label style={{\r\n\r\n      padding: '6px 16px',\r\n      fontSize: '0.875rem',\r\n      minWidth: '64px',\r\n      boxSizing: 'border-box',\r\n      transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n      fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n      fontWeight: '500',\r\n      lineHeight: '1.75',\r\n      borderRadius: '4px',\r\n      letterSpacing: '0.02857em',\r\n      backgroundColor: '#3f51b5',\r\n      color: 'white',\r\n      boxShadow: '0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12)'\r\n\r\n    }}>\r\n\r\n     Välj bild\r\n\r\n      <input\r\n        {...rest}\r\n        style={{ display: \"none\" }}\r\n        type=\"file\"\r\n        onChange={e => {\r\n          onChange([...e.target.files]);\r\n        }}\r\n      />\r\n    </label>\r\n  </div>\r\n);\r\n\r\n/*\r\n\r\n<Button\r\n  variant=\"contained\"\r\n  color=\"primary\"\r\n  startIcon={<PhotoCamera />}\r\n  style={{ textTransform: 'unset' }}\r\n>\r\n  Välj bild\r\n</Button>\r\n\r\n*/\r\n\r\nexport default FileInput;\r\n","\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport '../style/GlobalCssButton.css';\r\n\r\nfunction IngredientsList(props) {\r\n\r\n  const [editObject, setEditObject] = useState(undefined);\r\n  const [quantity, setQuantity] = useState(\"\");\r\n  const [measure, setMeasure] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [ingredients, setIngredients] = useState(() => initiate_ingredients());\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n\r\n  const ingredientsDisp = () => {\r\n    dispatch({\r\n      type: \"SETINGREDIENTS\",\r\n      ingredients: ingredients\r\n    })\r\n  }\r\n\r\n  function initiate_ingredients() {\r\n    let temp_ingredients = [\r\n    {name: \"mjöl (default data)\", quantity: \"2\", measure: \"dl\"},\r\n    {name: \"salt\", quantity: \"1\", measure: \"tsk\"},\r\n    {name: \"mjölk\", quantity: \"4\", measure: \"dl\"},\r\n    {name: \"ägg\", quantity: \"2\", measure: \"\"}\r\n    ];\r\n\r\n    temp_ingredients = [];\r\n\r\n    return (props.ingredients !== undefined) ? props.ingredients : temp_ingredients;\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    let temp_ingredients = upload_store.ingredients;\r\n    if(temp_ingredients !== undefined)\r\n    {\r\n      setIngredients(temp_ingredients);\r\n      // props.handleAdd(temp_ingredients.length);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const addIngredient = () => {\r\n\r\n    let temp_list = ingredients.slice(0);\r\n    let new_obj = {name: \"\", quantity: \"\", measure: \"\"};\r\n    temp_list.push(new_obj);\r\n    setEditObject(new_obj);\r\n    setIngredients(temp_list);\r\n\r\n    ingredientsDisp();\r\n  }\r\n\r\n  const removeIngredient = () => {\r\n\r\n    let temp_list = ingredients.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n    temp_list.splice(ind, 1);\r\n\r\n    setIngredients(temp_list);\r\n    setEditObject(undefined);\r\n\r\n    setQuantity(\"\");\r\n    setMeasure(\"\");\r\n    setName(\"\");\r\n\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const listClick = (object) => {\r\n\r\n    setEditObject(object);\r\n\r\n    setQuantity(object.quantity);\r\n    setMeasure(object.measure);\r\n    setName(object.name);\r\n  }\r\n\r\n  const saveEdited = () => {\r\n\r\n    let temp_list = ingredients.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n\r\n    let obj_copy = editObject;\r\n    obj_copy.quantity = quantity;\r\n    obj_copy.measure = measure;\r\n    obj_copy.name = name;\r\n\r\n    temp_list[ind] = obj_copy;\r\n\r\n    setIngredients(temp_list);\r\n\r\n    setEditObject(undefined);\r\n    setQuantity(\"\");\r\n    setMeasure(\"\");\r\n    setName(\"\");\r\n\r\n    props.handleAdd(temp_list.length);\r\n\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const enterPress = (ev) => {\r\n\r\n    if (ev.key === 'Enter') {\r\n      saveEdited();\r\n      ev.preventDefault();\r\n    }\r\n\r\n  }\r\n\r\n  // let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n  // idx < ingredients.length - 1\r\n\r\n  let ingredientsjsx = ingredients.map((ingred, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem onClick={() => listClick(ingred)} className={(ingredients.indexOf(editObject) === idx ? 'testis' : '')} style={{minHeight: 40}}>\r\n      <ListItemText\r\n        primary={ ingred.quantity + \" \" + ingred.measure + \" \" + ingred.name }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < ingredients.length - 1 && <Divider component=\"li\" /> }\r\n\r\n  </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n\r\n      <Grid className=\"test\"\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n      <Grid item xs={12}>\r\n        <List dense={true} className={classes.ingredientslist}>\r\n\r\n          {ingredientsjsx}\r\n\r\n          { editObject === undefined &&\r\n\r\n            <ListItem alignItems=\"center\" onClick={() => addIngredient()} className={classes.newListItem}>\r\n              <ListItemText\r\n                primary=\"Lägg till ingrediens\"\r\n              />\r\n            </ListItem>\r\n          }\r\n\r\n        </List>\r\n      </Grid>\r\n\r\n      { (editObject !== undefined  ) &&\r\n\r\n        <React.Fragment>\r\n\r\n        <Grid item xs={3}>\r\n          <TextField required variant=\"outlined\" label=\"mängd\" InputLabelProps={{shrink: true}} value={quantity} onChange={ event => setQuantity(event.target.value.toLowerCase())}/>\r\n        </Grid>\r\n        <Grid item xs={2}>\r\n          <TextField variant=\"outlined\" label=\"mått\" InputLabelProps={{shrink: true}} value={measure} onChange={ event => setMeasure(event.target.value.toLowerCase())}/>\r\n        </Grid>\r\n        <Grid item xs={5}>\r\n          <TextField required variant=\"outlined\" label=\"ingrediens\" InputLabelProps={{shrink: true}} value={name} onChange={ event => setName(event.target.value.toLowerCase())} onKeyPress={(ev) => enterPress(ev)}/>\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <CheckCircleIcon onClick={saveEdited} className={classes.greenicon} />\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <DeleteForeverIcon onClick={removeIngredient} className={classes.redicon} />\r\n        </Grid>\r\n\r\n        </React.Fragment>\r\n\r\n      }\r\n\r\n      </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#3f51b5',\r\n    color: 'white',\r\n    borderRadius: '5px',\r\n    width: '200px'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  }\r\n}));\r\n\r\nexport default IngredientsList;\r\n","/*\r\n\r\nComponent: Page where recipes are uplaoded or edited.\r\nTODO: refactor - a lot of code right now!\r\nTODO: it should be possible to reorder ingredients (use Draggable?)\r\nTODO: let the user add extra information, as time to cook or num portions\r\n\r\n*/\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport firebase from 'firebase'; // REFACTOR\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useFirestore } from \"react-redux-firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport DescriptionList from '../components/descriptionlist';\r\nimport FileInput from '../components/fileinput';\r\nimport IngredientsList from '../components/ingredientslist';\r\n// import { useFirebase } from \"react-redux-firebase\";\r\nimport '../style/GlobalCssButton.css';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction UploadPage(props) {\r\n\r\n  const [title, setTitle] = React.useState('');\r\n  const [files, setFiles] = React.useState([]);\r\n  const [image, setImage] = React.useState(undefined);\r\n  const [id, setId] = React.useState(undefined);\r\n  const [upload_wait, setUpload_wait] = React.useState(false);\r\n  const [done, setDone] = React.useState(false);\r\n  const [labelWidth, setLabelWidth] = React.useState(0);\r\n  const labelRef = React.useRef(null);\r\n  const [url, setUrl] = React.useState(\"temp\");\r\n\r\n  // const firebase = useFirebase();\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const store = useSelector(state => state.fireReducer);\r\n  const firestore = useFirestore();\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n  const history = useHistory();\r\n\r\n\r\n  // remove these\r\n  const [valid, setValid] = React.useState({\r\n    title: false,\r\n    ingredients: false,\r\n    desc: false,\r\n    image: false\r\n  });\r\n\r\n  const imageDisp = img => {\r\n    dispatch({\r\n      type: \"SETIMAGE\",\r\n      image: img\r\n    })\r\n  }\r\n\r\n  const allValid = () => {\r\n\r\n    return (valid.title && valid.ingredients && valid.desc && valid.image)\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setLabelWidth(labelRef.current.offsetWidth);\r\n    // getImage();\r\n    if(upload_store.title != undefined)\r\n    {\r\n      setTitle(upload_store.title);\r\n      setValid({ ...valid, [\"title\"]: true });\r\n    }\r\n\r\n    if(upload_store.descriptions != undefined)\r\n    {\r\n      handleDescriptionsAdd(upload_store.descriptions.length);\r\n    }\r\n\r\n    if(upload_store.ingredients != undefined)\r\n    {\r\n      handleIngredientsAdd(upload_store.ingredients.length);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const handleChange = event => {\r\n\r\n    let value = event.target.value;\r\n    setTitle(value);\r\n    setValid({ ...valid, [\"title\"]: value.length > 0 ? true : false });\r\n\r\n    dispatch({\r\n      type: \"SETTITLE\",\r\n      title: value\r\n    })\r\n  };\r\n\r\n  const handleIngredientsAdd = length => {\r\n    setValid({ ...valid, [\"ingredients\"]: length > 0 ? true : false });\r\n  };\r\n\r\n  const handleDescriptionsAdd = length => {\r\n    setValid({ ...valid, [\"desc\"]: length > 0 ? true : false });\r\n  };\r\n\r\n  const onFileAdd = (files) => {\r\n    setValid({ ...valid, [\"image\"]: true });\r\n    setFiles(files);\r\n\r\n    var reader = new FileReader();\r\n    reader.onload = function(e) {\r\n      setImage(e.target.result);\r\n      imageDisp(e.target.result);\r\n    }\r\n\r\n    reader.readAsDataURL(files[0]);\r\n    imageDisp();\r\n  };\r\n\r\n  const onFileRemove = () => {\r\n    setValid({ ...valid, [\"image\"]: false });\r\n    setFiles([]);\r\n    setImage(undefined);\r\n  };\r\n\r\n  // upload image and callback with download URL\r\n  const uploadImage = (callback) => {\r\n\r\n    // console.log(firebase)\r\n    // firebase.uploadFile('recept/' + title + '_image.jpg', image, 'testis', {metadata: {ye: \"hej\"}});\r\n    \r\n    setUpload_wait(true);\r\n    // Create a reference to the new image\r\n    let storageRef = firebase.storage(); // REFACTOR TO HOOKS\r\n    let newImageRef = storageRef.ref('recept/' + title + '_image.jpg'); // storageRef.ref('recept/' + title + '_image.jpg');\r\n\r\n    // Upload image as a Base64 formatted image string.\r\n    let uploadTask = newImageRef.putString(image, 'data_url');\r\n\r\n    uploadTask.on('state_changed', function(snapshot){\r\n    }, function(error) { // Handle unsuccessful uploads\r\n    }, function() { // Handle successful uploads on complete\r\n\r\n      uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\r\n        callback(downloadURL);\r\n      });\r\n    }); \r\n  }\r\n\r\n  const uploadAction = () => {\r\n\r\n    // make sure all valid\r\n    /*\r\n    if(!allValid())\r\n    {\r\n      return;\r\n    } */\r\n\r\n    // make sure signed in\r\n    if(store.firestore_user == undefined) {\r\n      alert(\"you have to sign in first\")\r\n      return;\r\n    }\r\n\r\n    // prepare data\r\n    let username = store.firestore_user.username;\r\n    let recipe_name = upload_store.title;\r\n\r\n    // const document = firestore.doc('recipes/' + recipe_name + '-' + username);\r\n    //const temp_doc = firestore.collection('recipes').doc();\r\n    //const _id = recipe_name + '-' + temp_doc.id;\r\n\r\n    const document = firestore.collection('recipes').doc();\r\n\r\n    let r_img = \"temp_food1\";\r\n    let ref_to_user = firestore.collection('users').doc(store.firestore_user.email);\r\n\r\n    // if upload or create new doc\r\n    if(upload_store.editmode == false)\r\n    {\r\n      // when image is uploaded, continue with uploading the rest\r\n      uploadImage(function(returnValue_downloadURL) {\r\n        // use the return value here instead of like a regular (non-evented) return value\r\n        let downloadURL = returnValue_downloadURL;\r\n\r\n        // Enter new data into the document.\r\n        document.set({\r\n          user: username,\r\n          title: recipe_name,\r\n          img: r_img,\r\n          img_url: downloadURL,\r\n          ingredients: upload_store.ingredients,\r\n          description: upload_store.descriptions,\r\n          user_ref: ref_to_user\r\n        }).then((test) => {\r\n          // Document created successfully.\r\n          console.log( \"Document created/updated successfully.\")\r\n          setUpload_wait(false);\r\n          setDone(true);\r\n        });\r\n\r\n        // to be able to direct to recipe page\r\n        setId(document.id);\r\n\r\n      }); // end of image upload callback\r\n\r\n    } else {\r\n\r\n      // UPDATE MODE\r\n      let update_data = {\r\n        title: recipe_name,\r\n        ingredients: upload_store.ingredients,\r\n        description: upload_store.descriptions,\r\n      };\r\n\r\n      // either upload with or without image\r\n      if (image == undefined) {\r\n\r\n        firestore.collection('recipes').doc(upload_store.recipe_id).update(update_data);\r\n        setUpload_wait(false);\r\n        setDone(true);\r\n\r\n      } else {\r\n        uploadImage(function(returnValue_downloadURL) {\r\n          // use the return value here instead of like a regular (non-evented) return value\r\n          update_data.img_url = returnValue_downloadURL;\r\n          firestore.collection('recipes').doc(upload_store.recipe_id).update(update_data);\r\n\r\n          setUpload_wait(false);\r\n          setDone(true);\r\n\r\n        }); // end of image upload callback\r\n      }\r\n\r\n      // to be able to direct to recipe page\r\n      setId(upload_store.recipe_id);\r\n    }\r\n\r\n\r\n  };\r\n\r\n  // when done, there's an option to go to recipe page\r\n  const goToRecipe = () => {\r\n    history.push(\"/recipe/\" + title + \"/\" + id );\r\n  };\r\n\r\n  // whether uploading new recipe or editing an existing\r\n  let upload_done_text = (upload_store.editmode) ? \"Ändring\" : \"Uppladding\";\r\n  let upload_button_text = (upload_store.editmode) ? \"Ändra recept\" : \"Ladda upp\";\r\n  let bottom_content;\r\n  let upload_disabled = !allValid();\r\n\r\n  // if working on recipe\r\n  if(upload_wait == false && done == false)\r\n  {\r\n    bottom_content = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<CloudUploadIcon />}\r\n      onClick={uploadAction}\r\n      disabled={upload_disabled}\r\n    >\r\n      {upload_button_text}\r\n    </Button> );\r\n  }\r\n  else if ( upload_wait == true ) // if waiting on upload\r\n  {\r\n    bottom_content = (<div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#ffffff\" fadeIn=\"none\"/></div>);\r\n  } else // done with upload\r\n  {\r\n    bottom_content = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={goToRecipe}\r\n    >\r\n      {upload_done_text} klar! Visa recept\r\n    </Button> );\r\n  }\r\n\r\n  let page_title = (upload_store.editmode) ? \"Ändra recept\" : \"Ladda upp recept\";\r\n\r\n  /*\r\n  let decs_valid = (valid.desc || (upload_store.descriptions && upload_store.descriptions.length > 1)) ? true : false;\r\n  let ingred_valid = (valid.ingredients || (upload_store.ingredients && upload_store.ingredients.length > 1)) ? true : false;\r\n  let title_valid = (title.length >= 3 );\r\n  */\r\n\r\n  return (\r\n\r\n\r\n    <div>\r\n      <h3>{page_title}</h3>\r\n\r\n      <form>\r\n\r\n      <Grid\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n        {/* TITLE*/}\r\n        <Grid item xs={12}>\r\n        <FormControl variant=\"outlined\">\r\n          <InputLabel ref={labelRef} htmlFor=\"component-outlined\"> Namn på recept </InputLabel>\r\n          <OutlinedInput\r\n            value={title}\r\n            onChange={handleChange}\r\n            labelWidth={labelWidth}\r\n          />\r\n        </FormControl>\r\n        </Grid>\r\n\r\n        {/* INGREDIENTS*/}\r\n        <Grid item xs={12}>\r\n        <ExpansionPanel style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n\r\n          <FormLabel component=\"legend\" className={classes.formlabel}>Ingredienser</FormLabel>\r\n\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <IngredientsList handleAdd={handleIngredientsAdd}/>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        </Grid>\r\n\r\n        {/* DESCTIPTION*/}\r\n        <Grid item xs={12}>\r\n        <ExpansionPanel style={{background: '#f7f6f6'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n          <FormLabel component=\"legend\" className={classes.formlabel}>Beskrivning</FormLabel>\r\n\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <DescriptionList handleAdd={handleDescriptionsAdd}/>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        </Grid>\r\n\r\n        {/* IMAGE */}\r\n        <Grid item xs={12}>\r\n        <ExpansionPanel style={{background: '#f7f6f6'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n          <FormLabel component=\"legend\" className={classes.formlabel}>Receptbild</FormLabel>\r\n\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n\r\n                  <Grid container spacing={1}>\r\n                    <Grid item xs={9} style={{\r\n                        display: 'flex',\r\n                        marginBottom: '10px'\r\n                    }}>\r\n                    <FileInput value={files} onChange={onFileAdd} />\r\n                    </Grid>\r\n\r\n                  </Grid>\r\n                  { image != undefined &&\r\n                  <React.Fragment>\r\n                    <Grid item xs={9}>\r\n                      <img src={image} alt={\"loadedimage\"} className={classes.loadedimage} />\r\n                    </Grid>\r\n                    <Grid item xs={3}>\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={onFileRemove}\r\n                        style={{lineHeight: '1.2'}}\r\n                      >\r\n                        Ta bort bild\r\n                      </Button>\r\n                    </Grid>\r\n                  </React.Fragment>\r\n\r\n          }\r\n\r\n\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        </Grid>\r\n\r\n      </Grid>\r\n\r\n\r\n\r\n      <div className={classes.uploaddiv} >\r\n        <Grid container justify=\"center\" alignItems=\"center\">\r\n        <Grid item xs={4}>\r\n        {bottom_content}\r\n        </Grid>\r\n        </Grid>\r\n      </div>\r\n\r\n      </form>\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\n// <RecipeCard/>\r\n\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px',\r\n    fontWeight: 'bold'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#f3f3f3'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n  }\r\n}));\r\n\r\nexport default UploadPage;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport let hasUpdates = false;\n\n/*\nexport function checkMyUpdate() {\n\n  return hasUpdates;\n}*/\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n\n        hasUpdates = true;\n        window.location.reload();\n\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n\n              // Sara added: Reload the page if new content is available\n              /*\n              navigator.serviceWorker.ready.then(registration => {\n                registration.unregister().then(() => {\n                  window.location.reload();\n                });\n              }); */\n\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        console.log(\"Service worker found. Proceed as normal.\")\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport HomeRoundedIcon from '@material-ui/icons/HomeRounded';\nimport LoyaltyRoundedIcon from '@material-ui/icons/LoyaltyRounded';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport PublishIcon from '@material-ui/icons/PublishRounded';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useFirestore } from \"react-redux-firebase\";\nimport { Route, Switch, useHistory } from \"react-router-dom\";\n// import our css\nimport './App.css';\nimport MySnackbar from './components/snackbar';\nimport TopMenuBar from './components/topmenubar';\n// import our page components\nimport FeedPage from './pages/feedpage';\nimport ListPage from './pages/listpage';\nimport Login from './pages/login';\nimport NoticePage from './pages/noticepage';\nimport ProfilePage from './pages/profilepage';\nimport RecipePage from './pages/recipepage';\nimport SearchPage from './pages/searchpage';\nimport Settings from './pages/settings';\nimport UploadPage from './pages/uploadpage';\n\nimport * as serviceWorker from './serviceWorker';\nimport './style/GlobalCssButton.css';\n\nrequire('dotenv').config(); // check if we need this\n\nconst API_KEY = process.env.REACT_APP_FIREBASE_API_KEY;\n\n// for PWA - needed?\nlet deferredPrompt;\nwindow.addEventListener('beforeinstallprompt', (e) => {\n  // Stash the event so it can be triggered later.\n  deferredPrompt = e;\n  deferredPrompt.prompt();\n\n  // Update UI notify the user they can add to home screen\n  deferredPrompt.userChoice\n    .then((choiceResult) => {\n      if (choiceResult.outcome === 'accepted') {\n        console.log('User accepted the A2HS prompt');\n      } else {\n        console.log('User dismissed the A2HS prompt');\n      }\n      deferredPrompt = null;\n  });\n\n});\n\n\n// main component of the app\nfunction App(props) {\n\n  const [value, setValue] = React.useState('default');\n  const [redirect, setRedirect] = React.useState(false);\n  const [openUpdateDialog, setOpenUpdateDialog] = React.useState(false);\n\n  const classes = useStyles();\n  const dispatch = useDispatch(); // be able to dispatch\n  const state_user = useSelector(state => state.userReducer); // subscribe to the redux store\n  const store = useSelector(state => state.fireReducer); // subscribe to the redux store\n\n  const firestore = useFirestore();\n\n  useEffect(() => {\n\n    // console.log(serviceWorker.hasUpdates)\n\n    if(serviceWorker.hasUpdates === true) {\n      setOpenUpdateDialog(true);\n    }\n\n  }, [serviceWorker.hasUpdates]); // end useEffect\n\n  // runs once on start\n  useEffect(() => {\n\n    // set listener for authentication changes\n    // either only set redux object or also create firestore instance\n    firebase.auth().onAuthStateChanged(user => {\n      // dispatch({ type: user ? \"SIGNIN\" : \"SIGNOUT\" })\n\n      // if user is signed in, set redux object\n      if( user ) {\n\n        const user_email = user.email;\n\n        const usersRef = firestore.collection('users').doc(user_email);\n        // connect to firebase and check if a user doc for this email exists\n        usersRef.get()\n        .then((docSnapshot) => {\n          if (docSnapshot.exists) {\n            usersRef.onSnapshot((doc) => {\n\n              console.log(\"user exists in firestore\")\n\n              // dispatch user doc info (such as username, other info set in the app)\n              dispatch({\n                type: \"SETFIREUSER\",\n                firestore_user: doc.data()\n              })\n\n            });\n          } else {\n            console.log(\"in app, user doc doesnt exist yet\")\n          }\n        });\n\n        // dispatch auth info (such as last time logged in etc)\n        dispatch({\n          type: \"SETUSER\",\n          auth_user: user\n        })\n\n      } // end if user\n      else {\n\n        // no user is signed in\n        dispatch({\n          type: \"SETUSER\",\n          user: undefined\n        })\n\n      }\n\n      dispatch({ type: user ? \"SIGNIN\" : \"SIGNOUT\" })\n\n    }); // end auth listener\n\n  }, []); // end useEffect\n  \n\n  const closeDialog = (action) => {\n    setOpenUpdateDialog(false);\n  };\n\n  // used in TopMenuBar, which needs to be refactored\n  const handleChange = (event = undefined, newValue) => {\n\n    console.log(\"heello\" + newValue + \".\")\n\n  };\n\n  let update_message = 'New content is available and will be used when all tabs for this page are closed';\n\n  // jsx code, looks like html\n  // renders top bar, page content and bottom bar.\n  // page content is based on url, defined with Route objects\n  return (\n    <div className=\"body\">\n\n      \n      <div>\n\n        <div className={classes.headerrow}>\n        <TopMenuBar signedIn={state_user.signedIn} handleChange={handleChange}/>\n        </div>\n\n        <div className={classes.mainContainer}>\n\n          <Switch>\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/settings\" component={Settings} />\n            <Route path=\"/profile/:username_url\" component={ProfilePage} />\n            <Route path=\"/upload\" component={UploadPage} />\n            <Route path=\"/notices\" component={NoticePage} />\n            <Route path=\"/saved\" component={ListPage} />\n            <Route path=\"/recipe/:recipetitle/:id\" component={RecipePage} />\n            <Route path=\"/search\" component={SearchPage} />\n            <Route path=\"/home\" component={FeedPage}/>\n            <Route path=\"/lists\" component={ListPage}/>\n            <Route component={FeedPage} />\n\n          </Switch>\n\n          <MySnackbar open={openUpdateDialog} handleClose={closeDialog} message={update_message} action={\"\"}/>\n\n        </div>\n        <div className={classes.footer}>\n          <BottomMenuBar/>\n        </div>\n\n      </div>\n      \n\n    </div>\n  );\n}\n\n// extract as individual component\nfunction BottomMenuBar() {\n\n  const [value, setValue] = React.useState('default');\n\n  const history = useHistory();\n  const classes = useStyles();\n  const upload_store = useSelector(state => state.uploadReducer);\n  const dispatch = useDispatch();\n\n  const handleMenuClick = (event = undefined, val) => {\n    setValue(val);\n    history.push(\"/\" + val);\n\n    // set as one dispatch instead..\n    dispatch({\n      type: \"SETDESCRIPTIONS\",\n      descriptions: undefined\n    })\n\n    dispatch({\n      type: \"SETINGREDIENTS\",\n      ingredients: undefined\n    })\n\n    dispatch({\n      type: \"SETTITLE\",\n      title: undefined\n    })\n\n    if(val != \"upload\" && upload_store.editmode == true) {\n      dispatch({\n        type: \"SETEDITMODE\",\n        editmode: false\n      })\n\n    }\n\n  };\n\n  return (\n\n    <BottomNavigation value={value} onChange={ (evt,value) => handleMenuClick(evt, value) } className={classes.bottomMenu}>\n      <BottomNavigationAction label=\"Flöde\" value=\"home\" icon={<HomeRoundedIcon />} />\n      <BottomNavigationAction label=\"Ladda upp\" value=\"upload\" icon={<PublishIcon />} />\n      <BottomNavigationAction label=\"Notiser\" value=\"notices\" icon={<NotificationsIcon />} />\n      <BottomNavigationAction label=\"Sparat\" value=\"saved\" icon={<LoyaltyRoundedIcon />} />\n    </BottomNavigation>\n\n  );\n\n  // <Badge badgeContent={3} color=\"secondary\"><NotificationsIcon /></Badge>\n\n}\n\nconst useStyles = makeStyles({\n  body: {\n    padding: 15,\n    paddingTop: '35px'\n  },\n  mainContainer: {\n    paddingTop: '80px',\n    paddingBottom: '50px'\n  },\n  footer: {\n    position: 'fixed',\n    left: 0,\n    bottom: 0,\n    width: 100 + '%',\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  headerrow: {\n    position: 'fixed',\n    left: 0,\n    top: 0,\n    width: 100 + '%',\n    zIndex: 10\n  },\n  profileBtn: {\n    color: 'green'\n  },\n  bottomMenu: {\n    width: 500,\n  }\n\n});\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as BrowserRouter } from \"react-router-dom\";\n\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\n// import reducer from \"./store.js\";\n\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport { ReactReduxFirebaseProvider } from \"react-redux-firebase\";\nimport { createFirestoreInstance } from \"redux-firestore\";\nimport { rootReducer } from \"./ducks/reducers\";\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst API_KEY = process.env.REACT_APP_FIREBASE_API_KEY;\nconst firebaseConfig = {\n  apiKey: API_KEY, // \"AIzaSyAq0vTBf0o5MckjHcCOJiJ_DRK8v_UZY88\",\n  authDomain: \"campuskost-firebase.firebaseapp.com\",\n  databaseURL: \"https://campuskost-firebase.firebaseio.com\",\n  projectId: \"campuskost-firebase\",\n  storageBucket: \"campuskost-firebase.appspot.com\",\n  messagingSenderId: \"477692438735\",\n  appId: \"1:477692438735:web:2e6dce163d7f7ce8baafba\",\n  measurementId: \"G-MDB52ZHJER\"\n};\n\nconst rrfConfig = {\n  userProfile: \"authusers\",\n  useFirestoreForProfile: true,\n};\n\nfirebase.initializeApp(firebaseConfig);\nfirebase.firestore();\n\nconst initialState = {};\nconst store = createStore(rootReducer, initialState);\n\n\nconst rrfProps = {\n  firebase,\n  config: rrfConfig,\n  dispatch: store.dispatch,\n  createFirestoreInstance, //since we are using Firestore\n};\n\n// wrapper for the provider to work properly\nconst AppWrapper = () => {\n\n // const store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n \n\n/*\n return (\n   <Provider store={store}>\n     <BrowserRouter>\n     <App />\n     </BrowserRouter>\n   </Provider>\n ) */\n\n  return (\n    <Provider store={store}>\n      <ReactReduxFirebaseProvider {...rrfProps}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </ReactReduxFirebaseProvider>\n    </Provider>\n\n  )\n\n}\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(\n\n  <AppWrapper/>,\n  rootElement\n);\n\n// ReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\nserviceWorker.register();\n"],"sourceRoot":""}