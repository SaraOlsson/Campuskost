{"version":3,"sources":["assets sync /^/.*/.jpg$","assets/temp_food1.jpg","assets/userchef.png","assets/temp_food2.jpg","assets/temp_food3.jpg","assets/temp_food4.jpg","assets/temp_food5.jpg","store.js","serviceWorker.js","components/snackbar.js","components/recipeitem.js","components/recipegrid.js","pages/feedpage.js","components/userpagetabs.js","components/followerlist.js","components/listcontainer.js","pages/listpage.js","pages/profilepage.js","pages/noticepage.js","pages/favoritepage.js","components/fileinput.js","components/validcheck.js","components/descriptionlist.js","components/ingredientslist.js","theme.js","pages/uploadpage.js","components/simpledialog.js","pages/recipepage.js","pages/login.js","pages/settings.js","pages/searchpage.js","components/topmenubar.js","App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","rootReducer","combineReducers","fireReducer","state","db","undefined","storage","auth_user","firestore_user","action","type","testReducers","num","url","step","uploadReducer","editmode","recipe_id","title","ingredients","descriptions","image","userReducer","signedIn","dragReducer","isDragging","draggableId","isLocalhost","Boolean","window","location","hostname","match","hasUpdates","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","reload","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","MySnackbar","props","useState","open","setOpen","useEffect","handleClose","event","reason","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","message","Fragment","Button","color","size","onClick","style","marginRight","IconButton","aria-label","fontSize","useStyles","makeStyles","listimage","maxHeight","maxWidth","minWidth","minHeight","objectFit","listtile_small","padding","listtile","RecipeItem","img_src","openDialog","setopenDialog","backspaceLongPress","callback","ms","startLongPress","setStartLongPress","timerId","setTimeout","clearTimeout","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","useLongPress","result","history","useHistory","classes","recipe","r_img","img","img_url","require","tile_jsx","handeRecipeClick","clicked_recipe","push","src","className","alt","smalltiles","GridListTile","key","GridListTileBar","subtitle","user","handleaction","root","display","flexWrap","justifyContent","overflow","icon","spinner","marginTop","RecipeGridList","images","setImages","images_temp","recipes","idx","GridList","length","Spinner","ScrollableRecipes","concat","Grid","container","spacing","justify","scrolldiv","item","xs","scrolltitle","scrollimage","scrolltext","NewsContainer","viral_header","alignItems","newscontainer","imageContainer","flexDirection","marginBottom","grid_background","backgroundColor","paddingTop","foodImg","height","width","margin","borderRadius","imagesidebar","triedby","background","textAlign","alignSelf","FeedPage","setRecipes","scrollview","store","useSelector","recpiesRef","collection","recipeFetcher","onSnapshot","querySnapshot","recipe_docs","forEach","doc","data","name","fadeIn","TabPanel","children","value","index","other","Typography","component","role","hidden","aria-labelledby","Box","p","a11yProps","theme","flexGrow","palette","paper","SimpleTabs","React","setValue","AppBar","position","Tabs","onChange","newValue","Tab","label","FollowerListItem","user_avatar","profile_img_url","smallprofileimage","Avatar","ListItem","ListItemAvatar","ListItemText","primary","username","secondary","fullname","handleChange","ListItemSecondaryAction","edge","follows","followColor","notfollowColor","followerlist","FollowerList","followData","setFollowData","handleUserClick","followerData","followersjsx","List","dense","listcontainer","list_header","ListContainer","list_doc","listdoc","recipeDocs","temp_recipes","recipe_fetcher","header","recipe_id_list","get","exists","spinner_jsx","recipeContent","update","noheader","listname","user_in_header","mine","createdby","split","getLikedListStyle","isDraggingOver","DraggableRecipe","oncontextmenu","preventDefault","stopPropagation","getListStyle","listDroppable","draggingClass","marginLeft","displayNone","ListPage","listState","setlistState","setLikes","lists_by_user","setLists_by_user","updateState","useCallback","dispatch","useDispatch","dragDisp","isDragging_val","draggableId_val","current_email","email","getListDocsForUser","loadedDocs","getLikesDocsForUser","like_docs","liked_recipes_ids","liked_recipes","Promise","reject","replaced_email","replace","listsRef","where","list_docs","snapshot","created_by","lists_by_user_jxs","i","droppableId","direction","provided","ref","innerRef","onDragEnd","source","destination","substring","drop_id","list_index","indexOf","list","recipe_doc_id","what","updated_recipes","nextState","a","updated_items","startIndex","endIndex","Array","from","splice","removed","reorder","onDragStart","draggableProps","dragHandleProps","draggableStyle","userSelect","isdragging","placeholder","userinfo","fontWeight","university","ProfilePage","username_url","useParams","setUser","ifUser","setIfUser","followInfo","setFollowInfo","followingInfo","setFollowingInfo","following","following_this_user","setFollowing_this_user","url_user","recipeFetcher_new","followFetcher","doc_email","found","email_promise","loadedDoc","followBtn","url_username","doc_data","followUser","firebase_event_id","delete","set","date","Date","event_follow_object","event_image_url","other_username","timestamp","seen","current_username","current_user_email","follow_docs","followBuilder","followers","callback2","variant","startIcon","uni","userchef","B","NoticeListItem","noticeText","userClick","recipeClick","recipe_id_to_title","eventimg","time","body","NoticePage","eventList","setEventList","events_promise","temp_data","eventListjsx","FavoritePage","noop","FileInput","rest","f","join","boxSizing","transition","fontFamily","lineHeight","letterSpacing","boxShadow","target","files","nomargin","ValidCheck","FormControlLabel","disabled","control","Checkbox","checked","buttontext","textTransform","input","loadedimage","formlabel","imagediv","uploaddiv","greenicon","redicon","newListItem","titlediv","DescriptionList","editObject","setEditObject","setOrder","text","setText","temp_description","description","initiate_descriptions","setDescriptions","upload_store","ingredientsDisp","temp_descriptions","saveEdited","temp_list","slice","ind","obj_copy","toUpperCase","handleAdd","descriptionjsx","desc","object","order","Divider","ingredientslist","new_obj","addDescription","TextField","InputLabelProps","shrink","onKeyPress","ev","enterPress","IngredientsList","quantity","setQuantity","measure","setMeasure","setName","temp_ingredients","initiate_ingredients","setIngredients","ingredientsjsx","ingred","addIngredient","required","toLowerCase","createMuiTheme","purple","green","status","danger","UploadPage","setTitle","setFiles","setImage","setId","upload_wait","setUpload_wait","done","setDone","labelWidth","setLabelWidth","labelRef","useRef","valid","setValid","imageDisp","current","offsetWidth","handleDescriptionsAdd","handleIngredientsAdd","bottom_content","uploadImage","uploadTask","firebase","putString","on","getDownloadURL","downloadURL","upload_done_text","upload_button_text","recipe_name","document","ref_to_user","returnValue_downloadURL","user_ref","test","update_data","alert","page_title","decs_valid","ingred_valid","title_valid","FormControl","InputLabel","htmlFor","OutlinedInput","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","reader","FileReader","onload","readAsDataURL","avatar","blue","SimpleDialog","RecipeDecsList","sort","desc1","desc2","descjsx","RecipeDecsListItem","len","setChecked","checkIcon","triedbyText","triedbyNum","recipeheader","RecipePage","setRecipe","likes","doc_id","saved","setSaved","tried","setTried","recipetitle","user_doc","likeFetcher","err","user_data","disableTouchRipple","login_div","Login","setEmail","password","setPassword","signText","auth","currentUser","btn_color","evt","signOut","signInWithEmailAndPassword","errorCode","errorMessage","createUserWithEmailAndPassword","sendPasswordResetEmail","buttons","rainbow","backgroundImage","center_btn","available_text","profileimage","fullrow","flex","Settings","username_textfield","setUsername_textfield","has_changed","setHas_changed","in_editmode","setIn_editmode","isAvailable","setIsAvailable","openSetting","setOpenSetting","imageUrl","setImageUrl","imageUrlList","setImageUrlList","cancel_edit","save_username","is_available","list_ids","loadedIds","_id","storageRef","child","available_images","listAll","res","items","itemRef","randomName","temp_username","preNames","postNames","rand1","Math","floor","random","rand2","newName","onExpand","expanded","heading","new_value","img_index","temp_url","continue_search","randomImg","SearchPage","users","setUsers","userFetcher","collection_name","temp_users","ProfileBtn","btn","buttonPad","icon_content","jsx_content","menuButton","grow","breakpoints","up","search","shape","fade","common","white","searchIcon","pointerEvents","inputRoot","inputInput","transitions","create","sectionDesktop","sectionMobile","whiteColor","TopMenuBar","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","isMobileMenuOpen","handleMobileMenuClose","handleMenuClose","renderMenu","Menu","keepMounted","transformOrigin","MenuItem","renderMobileMenu","Badge","badgeContent","currentTarget","aria-haspopup","Toolbar","goBack","noWrap","Link","to","textDecoration","InputBase","inputProps","onBlur","onFocus","pathname","deferredPrompt","addEventListener","prompt","userChoice","choiceResult","outcome","BottomMenuBar","BottomNavigation","val","handleMenuClick","bottomMenu","BottomNavigationAction","mainContainer","paddingBottom","footer","left","bottom","headerrow","top","zIndex","profileBtn","App","openUpdateDialog","setOpenUpdateDialog","state_user","onAuthStateChanged","uid","user_email","usersRef","docSnapshot","userObj","firebaseConfig","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","firestore","initFirebase","path","exact","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","rootElement","getElementById","ReactDOM","render","URL","href","origin","fetch","response","contentType","headers","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.5d109748.chunk.js","sourcesContent":["var map = {\n\t\"./temp_food1.jpg\": 117,\n\t\"./temp_food2.jpg\": 177,\n\t\"./temp_food3.jpg\": 178,\n\t\"./temp_food4.jpg\": 179,\n\t\"./temp_food5.jpg\": 180\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 100;","module.exports = __webpack_public_path__ + \"static/media/temp_food1.cd514d13.jpg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABrCAYAAACSY2d1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABVBSURBVHgB7V3pbxtnev/NcHiJhyjJoiTLhxTnsHNZWTdpcxRRsNsCW7RZB9h+KFAgCdAD7ZekQL8nRv+AuP3Wfom2WKAfkxTYNkEL1MnmviQ3lu1EliXrPnlJ4s2ZfZ7hUObNGc6QomL9gBEPvcOZeX/vc76XgEOGubm5EbvdPk5vA4IgnKcjoCjKCH8uOooRKRxUNkJl52VZvkOvU6Iozp84cWIKhwgCOhhETkCSpDGq6F9Q5Y5RJY+hkhCzYCKniMQp+v33stns1OjoaAQdio4jjEkiCXqFCPpFiwhqCCLwChH4q0wmc4XIm0cHoSMI00i6SCS9TCSNo4NQII9U5wQ6AAdKGBPlcrleowp5HQcgSQYxT8eVdDp96SCl7kAIW11dHSGS3qC3r+BwYuKgiGsrYSxRTqfzDVJ7r+PHgbYT1xbCWqn6BBGQJMBm40NQP4v0VLJCh5w/clkF2SygyGgFImR7Lw8NDV1CG9BywhYXF8fpgd6mtyOwEALduWQHnE4Boq1BYSIvR2RlUgoyGfqooBXg+O7VkydPXkEL0TLCzKg/lhgmgaVCzlX+n6XI7RZUwowiS4Ql4kpV0lhK+Tcz6bxkNgPyKi8fP378H9AitIQwzan4PxiQKpYYu4MrTFAJY8ik15LxPHEFiESWq+tumWbAv5ck0opJ4eu63fnGwMhRQ0mzRKbRDObJtr3QCtsmwmKsra2xrZqETrKYKKdLgNcvwOUuJUIU+bs8SYWy5WWaAZ/vdOV/r/g6QlFtsLS5u/L3xfcnGqupEYfDMbmysmK5c2WphNENvqVXBXJlOcj+OJx3K64W2O4k9hSVLC5vFVJJhQ4mhqW7/k2wNLK08TlGQPb7TSsdEksI0+zV20TWRT3l2U6wDRJ0tlq2N6kESYW7MblGwF5jkghzuaD7Xpg4Js2IqiS79m4qlXrVihyl6cdnskj82V6NNSprxv4waYKl+sDc7xakzYBzMkV27SWzds1UFRhxLlj9FduNHwOakDbTzkjT1aeXrIJTYaXt6TSkU3nidMZ3pkhrijC9apBVYJdHR2D7IwBLW3xXt4qc0kgzbNOacuvJwXgHjcgikjzee4Mshto4vbrd/zGtDo1fBwahue7jdX9UI0uwPMrrbDBZHp++Rsp1yHUJgzBUpWS3GqaaOJ7x0k2bdS6S5G9HIlGkUsZSDXxeOBxBKm3sPL5OOBxVzzcDfm5+fs7aNALXpdHgWne1ak7GXKNy/oA1buDq6jqlh3IULLvQ19ND0tr4d+n+sLUVAtkHVts41ter6zyqOGyHwkgmkhRy2DA4OAArEIvo80Lo+k/oHQykS8KKPMKGyGasSYUzWQzFQKDDFa9orhqTJ+vsT1HP066TzeZgBTjJrBcUWL/DjpyesroI03qHR/SUVfudcG+D20xxwloHRrhnQ0/BhoQtLS29AgNd+Wp/U2s6Cg8N5Bz3uxlrtmzPFhYWGqb26hLGqpDEVRfz+xfm/FwC9zRSKaGpRmuz2d5qpBrrEkasv4Ymeoq5S577ku5F8HObsOMNVWNNwli6mh0swzqc0zX3mmosPLe531Be5+Hotf5fkzDN0Wj+wrg3YcVzc1dVrf9VJYwHzuDwjhk89OAsiMZBBaoSRsbPlHQdwTxqcVBBmGa7xnGEA0UtKasgzKztOoJ14MkhFd8Vf2DpwpHt6iRcLI/LSgij/N04jtBJ4AmNJaFVCWFGsxpHaD14YmPJ58IbyhlyD/IIjtBpGCt2PvYJI6/kFXQQhCZ6QNVzCqcJJn6j8zBeeLNPGIne8+ggdHf74XK54PV6dXVCMugZ4Pf5tPM86me95/F13NRZytftNBSrRbUm9PYmGwGP5/CaGNdR6IhspsVz56UoGr8wX9OMhPEt7+4oLcmhUi96D4+yUp+qE71DrrhmK68ZsgrX7FTwpH1+VZ+MbrSj1OERKlHgqDDKveG4+Oag3Ftp+9Y+6zj/EbRRvGFYDDGZRs/n1yGmDIxGOeSQnXaEf/8cZHdrxqWzHRN5aSAc4VCA7NiISLrxiLDDgzGRXNlOX4HmCBp47S3ygMXzOMKhAHHVLWnrDcJqZDMpzMx+DTkez3/RqimUZbDZJQRPnsTG4iJyGWOjOc1C7OpC4MIZipVa43TwupCStjik5ciohH2FdCxauFrLCfP1BPDIc0/DN9qNcGYFC5PXENsOoaXgtIaWznH4AxjLXCS6fGgFSLhGTC6g0AAsuJr0UsIGQoviFFGy4fiZM3j4mT+At7dHzVjc9/hj6D9xAtc+/hSrs7cNjdE3jIKGUlofdDJhI2gDBIvXcOGEsK+nB71DQ7jv/OPoGSqbcUKk+fp68fSLf4rI2jpmJicRWlnFXjQGK02AYvmT1UWLJcxiUMwIO2Xiu/uP4fSjDyMwEEQXZedFW50ZdFSbASLzQvCPsBuJILa5jTvXphHe2EA2nUEua87OtTv72NGEsWpzUTeJNxCA/9gxkqZB9B0fgifQDaNgUv19fepx4uyD2A2HsU0SF15dQ3Rrm8iMIrW3B0Xp7FxaWwhzeTxqRWQzGVJlImxkc1hlSZIdkt2e72wkFWe3O4iMAHy9eYK8RIzkcPAYPdjotdksfDV4SZ3ycfLsQ5CzOWSzGWRSKeyEwkRmBMm9OB27iMdidN95KeRyuVx231axdLLUZ+k1FW/PDJCWEubp68HgmdPwUeULNhFyLqdWulr5RFh3dzc8JEHMGJMiOR1t7+JgyRO1a3PD8vX2lvyfScmk02qDk4m4DC/KoTlT3AC54YVDIfJGt5GImxxYrwPC8vIyd1yOwEokd5G7cw1CbAv1Uti9fj8o8VzxfTSeRJIqKujztJVAmUjYjO3BRbFcd5dL3znkfUZICtOqLaR77T0O8eQ58vHdaAHmrZewbBry4g0ia7NhUdFWqeKWQzH8ywefI0wq5u9/+hTGRobQLkwvbeCt//4Ux6ih/OOfPItgt6fxSSVjR6hxhlYg06t46jHompluEJz8nYeFUDbmSUTWdZUVqowf2NzZwxezS/hhdRtfzS2jnfj81hJub4TxJV1/JRLTdY7Ibn3JmBMiLbIOZWsBVoN3tRB5WwtYBVIPytqsZQFkMmPNBHH912ui746HMpSPeJdzUNZvw+oeTRKuKGfrLdu2QolH2UrrL9/hLrQeqCsQVCOGUnOmZ/eVgbcbYZVo3WYxWWOLkihVhhfZyIuUNNs24NdhQyzEgN+rvvL1bTpDCNVhrJX2iutTq3rBm/2w02EZYYLkNKQEeE3fcjw42Ie/Gr+AnWQaz58bgR6kKT5ai+zA63Ki13vXO9ul32Cvb7iXvFGp8XpCP3v0DLZ24hgMeHGqT19wzo1OrqUpXNY2ON6RydoxHXIWuckPIOhMtPoo7vG4zbu//zU1g3//eBKj/T34u58+iVPHAvh+dQsTH01ibjOMl58bw8/HHkQrkKXYMkxufWEhmH2IFN9d+DmsTF7xmA6JBydSLDYPK2IxUYIYHM0bXB32KVucx0tnocxRV0iybI0oiomEkT6gq/aa59/ML5OE7aoHe3p+twOxRHrfRk4trNUnjAJeZZ7abHn/mYsC+VEKpB21o5/iVXT2Qd6vMHAGFmca1W2yJO2iH3JfCyyAEDyVdz7UoLk+uHUWRukq0SSUpVB1x4rIUkmrgV8++QgWt6KYWQ+pFRjVMg4cH430d+PPfvIQ6kFZ34GyUsX34vru74LQ6615Lje6CpXopS6egVFYDNV0FZrOFTpehhVweiGcfgzKne+Ane26ksZk5bR0FTwkQS46EmWuNbVuwV8/63BuuB//9Oc/w39O3sR1Cn7ZDnHw+zB9/+JPzmKgUQDsd+elKF0mYSSpgrN+8JtIFXmCHFcGBiAOn7U8aGahUi/Bf1oxNjG1tY613/wavoBP7RJhqFn2Mu+rxI5xhZU7Iup66TZdvdVZagBpit3YCWFPz0UkSHq8PUW7dnnj4oC4jjpMUnZ/lbL9OYrf4tTPthvbxclf/jWcfUFYDbJfo7zsrHo3mh1jkbNsyFs6voeV6zcgJ+OUkaeMu8OOB56l7vtgf0m5JLXQfcIc5jJlTI7kFNHlNLjHB7cFp/FrL/9wCzc++4KycWk1SWz3+jBAGf4WEDZVWCN4v/mRenoPFiK7E4VCLY+7JNKJBBLUAjdnZ6GUeVMZetB0+vCNDuaumBV6nlQ8vt8JKtMrP7fVIG4+LLwv1hdXYCFSsbDanVKMzbkFJHd2K8rGk4mqQXQnY2tpGdtLKyXfcWPk57Ya5DxNFN7vE6Zto2RNEE22ILGxBqVslUdWHas3v6+wFSmSxHSbh6SZAUvX7anvKoYXyNRXpj63tQN+SrYuLrHIVqlFVg2pUHW3fmN2DpHylkkE7pJqkeXDIWUL165ja6V6TwI/t9zklkjVQHVzqfhzCWEUU1xGfpNqU8ilkthbqd69wB7Vnav/XyFlHJOVuMgdCpau77/+Btkai0fH15apwVpnk3lr4uLPJYSxt8ibT8PsRcjwJtZXa/5/d2sby9M3SlSHKmXkJqczneuAsEr/7spvkahihwuIry4hs2tZ0neifAeJiiCFKm4CJhGbvUkGuL5NWia1srO5WSJp/C62u5cfK9FhYHU9f20aCzdu1i3Hz70zfwtWgDdELf+ugjB2PnizaZhAZOZ6wzKZZBIzH3+OvVCpV5WlB46SpMkd5jUuUEx547MvdY1jjN68BrMgwam6S3vVNACliy6hSWQTe0hu6RsikNzZwdXfvI8oZQuKJY1jszDFbdncwXuOLO0zX3+Lb97/HzWe1IP4xrJqx82g3NkooCphZqRMVoNlA73OpGpmPvkM65Q1KLZpTFqUbEU2195hAsXgsYnX6d6mP/7U0Hnq+EVzhE3U2q22ZqKNCHsVTUCUJHWwqBGkyG7NffUtQtO3KXYrJS0cJQeG1Ge7hxNkdtO4+eGXuPXtlOHh3Pz8gomNOqvZrgJq1uzQ0BDvS/zPMAibuwueoRO6yvLwFYfowLB7GE/4n8Dgsgeua7uwRe9WUI6kLkY2bYeObLYNKpLaixIVIG26cO7Uc3j6yYs4OXwObpdP97QHd3AQEm+s2czlqc5H6+wtVrcZUAW9SVl8XjZnBDrBQ9f6f+8ZrH/xUcOy/c4gRjwj6HYUzdpdS6mEZUbdyA67oNgEVbriJGUscZwo5n1VWjG8VIkLvO85sCeoLqvD4cLgwH0YpE7ZrdASrt/8BFvbS3V/Q7BJCF54puoQPh2Y12Lh2r+PBuDdCmw2m6G9rjjSv/Uf/4aNLz+pmiOUBAkP+B7EcZIssc6DKZR5z452ITfogOy6OybDTurG09VFCXbj6rfyInTE6YWJiot1R6bJcg6zc5NE3Mf5MfZl4HsJPvks7v+Lv4HYRH8YNcxXKQ01Ua+Mroa6uLh4mToZX4NekESkQhv44df/iuit0gDZZXPhPs8ZHO8a1qdiqIjst0MZciIz4IRiF1Sp472XJZuNVJULTofD2FJHTEqWfofDvR0iiePgnL5zuQHOUefs9I3fUhbirmMhiDb47z+Lh/7yb6l7pandkSaGh4cb+g267lLr4NS9mXYBqfA2Fj54BxtffAiZsgQsWY/4H0XQ3eR2T0SS0utArltCLuiA4pMgi/mNsx2SHQ67PT+pgme7lM8Z40V5UkQqb7PB064TdGKTJpFV9J3FaVz97n9VSWNpGnjmBZz644twBHqb+Und+2LqNgW8ACa14EkYBOfVEhurCF39Gv7JOxjI+Y1ctjrYxEhU4TZWm/Snm4jq80IMeFU3itUsz46xKURcxqZO1VVkOokjBFmwZEAuZz7ubM0iGvSg5/wFuI4NkIdssONUQ6E3WU9ZQzVHpL1OpBneBpAhffs9pPc/56gcloKIcQz108FTmtq74aZiExEbux/pY8YnGBZAxF+imOtNveUNWWwyiJebcfWF7SjEL65ZTpbIc7rOnIJzONh2shhCTobn+0WIyeZyn1yXRshiGHax6AKvG82C2Ei6xJC1w5ZtHjdcI8Ow9/h1DdBpFaS9JJzrxpeW4Fwh1yUMoimfOJVKvQS9vdPJNGxTP1SOhjIBm88D9wOnYev2AgfHVR7kgLgX1o3axSnq53oJTaApwtSlTEWRLzjfsLBkg3z+gbpFknQX22Sv98QGz83zoIO9cN9/CoKjOQOvG3Qjma0wErMLyEZ36hZN9weMNBz2CF9qZtNthqn2qXd7e4bt6gykDychRCs7/zbsCtIcV1FrDWYoxqrBmiPYB8eJAcrTtd5eKZks4jduQ05S5sXbha6Hz1SWsUvYO3McidO6wxRT29ozTA0E5HwjkfYCkdZw5/QcSZl8egjSR5MqecWQtWajoL6ECV3OUrJ4YjjZxvRWSB2g6jo5CNGlb50nJiK9tK5m1h3HApCO9VSUKQT8SpWdZ9M9Puw+Noqc/sUsm97Ovhim11Fg0vhGyBF5t1FZheKkzIt/qB5KtxdGUa4OuEIzmyHkSGpz4Rgy2/rrIhvZRSYURS62i9TKhu7zmKDYE/cj+tRZ3WRx3VhBFsOSSenajbxEKaw3yba90ag8SxsfqrRNkbQldnRdp1L6hPxw6sInsUlVqSNRy+ovfmoAydNByHb91aa57k1tTVkNlvtYWnDNpOlaOFOglh6/NoPE9Ay931FtmK3W/LiR4+R0lM5iyZFqy25G1InhHEBD56YE1G9DEhkm1ZiGvS8A0VM6T41t2N70LUp9Ccg98zjkpx42RBSBBzRd4tgVFqIlTrERZ6QY6e9m4PlsGrYacY2TCHME+9AOpLs92KP0V+7R+6C4DGfeTTsXtdDSKMZwll8DS5305TTEm3dKvMpWE5YjhyU5fAyZXp96NANWgdyPaIW9qoaWh528Mw+R9jaanOEprIUg3llVjy7uobZwbxS2S+kecoR6/UgFA2aXL+ce+ldrjcWwCm3LE2gOCUubqUWhpZ04xAR11cT2YEtQjETvBXK7hUwOtmTlyOGc5uZn/W7K8Nvo1aN6d1mf26r15SOaVF1ulVQVo62JHbZtuVzuTXJKrJntecBotfqrhgPJxP0IiJvgkU2tcCoa4UBTp0XEPQ+rV5SzHm1VfbVw0LnufVD89gq9vEzkjaODwN0g9PIryq6/e5BEFdAxhBWgSd04Do48Dni56+g9ImmiE0gqRscRVgwe/KNt5nORyDuv7RNj9dYjKkF0XKX375LKm+o0korR0YRVAw8GIlsywuRRmHBa2yghwDtcIE9mOaFc+UxKRFsbMqKRE+HJcgfhOJjB7wBCYfPNumc1MQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/temp_food2.03e2fd15.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food3.c3c706f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food4.af2bb629.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food5.758c2926.jpg\";","import { createStore, combineReducers, compose } from 'redux'\r\n\r\nfunction testreducer(state = { num: 0, url: \"hey\" }, action) {\r\n  switch (action.type) {\r\n    case \"INCREMENT\":\r\n      return {\r\n        ...state,\r\n        num: state.num + action.step\r\n      };\r\n    case \"DECREMENT\":\r\n      return {\r\n        ...state,\r\n        num: state.num - action.step\r\n      };\r\n    default:\r\n      return state;\r\n    case \"SETURL\":\r\n      return {\r\n        ...state,\r\n        url: state.url\r\n      };\r\n  }\r\n}\r\n\r\nfunction uploadReducer(state = { editmode: false, recipe_id: undefined, title: undefined, ingredients: undefined, descriptions: undefined, image: undefined }, action) {\r\n  switch (action.type) {\r\n      case \"SETTITLE\":\r\n        return {\r\n          ...state,\r\n          title: action.title\r\n        };\r\n      case \"SETINGREDIENTS\":\r\n        return {\r\n          ...state,\r\n          ingredients: action.ingredients\r\n        };\r\n      case \"SETDESCRIPTIONS\":\r\n        return {\r\n          ...state,\r\n          descriptions: action.descriptions\r\n        };\r\n      case \"SETIMAGE\":\r\n        return {\r\n          ...state,\r\n          image: action.image\r\n        };\r\n      case \"SETEDITMODE\":\r\n        return {\r\n          ...state,\r\n          editmode: action.editmode,\r\n          recipe_id: action.recipe_id,\r\n        };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction userReducer(state = { signedIn: false }, action) {\r\n  switch (action.type) {\r\n    case \"SIGNIN\":\r\n      return {\r\n        ...state,\r\n        signedIn: true\r\n      };\r\n    case \"SIGNOUT\":\r\n      return {\r\n        ...state,\r\n        signedIn: false\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction fireReducer(state = { db: undefined, storage: undefined, auth_user: undefined, firestore_user: undefined }, action) {\r\n  switch (action.type) {\r\n    case \"SETDB\":\r\n      return {\r\n        ...state,\r\n        db: action.db\r\n      };\r\n    case \"SETSTORAGE\":\r\n      return {\r\n        ...state,\r\n        storage: action.storage\r\n      };\r\n    case \"SETUSER\":\r\n      return {\r\n        ...state,\r\n        auth_user: action.auth_user\r\n      };\r\n    case \"SETFIREUSER\":\r\n      return {\r\n        ...state,\r\n        firestore_user: action.firestore_user\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction dragReducer(state = { isDragging: false, draggableId: undefined }, action) {\r\n  switch (action.type) {\r\n    case \"SETISDRAGGING\":\r\n      return {\r\n        ...state,\r\n        isDragging: action.isDragging\r\n      };\r\n    case \"SETDRAGGABLEID\":\r\n      return {\r\n        ...state,\r\n        draggableId: action.draggableId\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// export default reducer;\r\n//  firestore: firestoreReducer,\r\n\r\nconst rootReducer = combineReducers({\r\n  fireReducer: fireReducer,\r\n  testReducers: testreducer,\r\n  uploadReducer: uploadReducer,\r\n  userReducer: userReducer,\r\n  dragReducer: dragReducer\r\n});\r\n\r\n export default rootReducer;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport let hasUpdates = false;\n\n/*\nexport function checkMyUpdate() {\n\n  return hasUpdates;\n}*/\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n\n        hasUpdates = true;\n        window.location.reload();\n\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n\n              // Sara added: Reload the page if new content is available\n              /*\n              navigator.serviceWorker.ready.then(registration => {\n                registration.unregister().then(() => {\n                  window.location.reload();\n                });\n              }); */\n\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        console.log(\"Service worker found. Proceed as normal.\")\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, {useState, useEffect} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nexport default function MySnackbar(props) {\r\n\r\n  const [open, setOpen] = useState(props.open);\r\n\r\n  useEffect(() => {\r\n    setOpen(props.open);\r\n  }, [props.open]);\r\n\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n\r\n    console.log(\"reason: \" + reason)\r\n\r\n    setOpen(false);\r\n    props.handleClose();\r\n  };\r\n\r\n  const handleAction = () => {\r\n    console.log(\"handleAction\")\r\n    setOpen(false);\r\n    props.handleClose(\"remove\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n        message={props.message}\r\n        action={\r\n          <React.Fragment>\r\n            <Button color=\"secondary\" size=\"small\" onClick={handleAction} style={{marginRight: '25px'}}>\r\n              {props.action}\r\n            </Button>\r\n            <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </React.Fragment>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, {useState, useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport GridListTile from '@material-ui/core/GridListTile';\r\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\r\nimport MyDialog from '../components/dialog';\r\nimport MySnackbar from '../components/snackbar';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { blue } from '@material-ui/core/colors';\r\n\r\nfunction useLongPress(callback = () => {}, ms = 300) {\r\n  const [startLongPress, setStartLongPress] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let timerId;\r\n    if (startLongPress) {\r\n      timerId = setTimeout(callback, ms);\r\n    } else {\r\n      clearTimeout(timerId);\r\n    }\r\n\r\n    return () => {\r\n      clearTimeout(timerId);\r\n    };\r\n  }, [startLongPress]);\r\n\r\n  return {\r\n    onMouseDown: () => setStartLongPress(true),\r\n    onMouseUp: () => setStartLongPress(false),\r\n    onMouseLeave: () => setStartLongPress(false),\r\n    onTouchStart: () => setStartLongPress(true),\r\n    onTouchEnd: () => setStartLongPress(false),\r\n  };\r\n}\r\n\r\n\r\n\r\nfunction RecipeItem(props) {\r\n\r\n  const [openDialog, setopenDialog] = useState(false);\r\n\r\n  const onLongPress = result => {\r\n    console.log(\"pressss\")\r\n    setopenDialog(true);\r\n  }\r\n\r\n  const handleClose = (action) => {\r\n    console.log(\"close\")\r\n    setopenDialog(false);\r\n\r\n    if(action === \"remove\")\r\n      props.handleaction(props.recipe.id);\r\n  }\r\n\r\n  const backspaceLongPress = useLongPress(onLongPress, 500);\r\n\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const recipe = props.recipe;\r\n\r\n\r\n  let r_img = ( recipe.img !== undefined) ? recipe.img : 'temp_food1';\r\n  let img_src;\r\n\r\n  if  ( recipe.img_url !== undefined) {\r\n    img_src = recipe.img_url;\r\n  } else {\r\n    img_src = require('../assets/'+ r_img + '.jpg');\r\n  }\r\n\r\n  const handeRecipeClick = (clicked_recipe) => {\r\n    history.push(\"/recipe/\" + clicked_recipe.title + \"/\" + clicked_recipe.id );\r\n  };\r\n\r\n  let image = <div {...backspaceLongPress}> <img src={img_src} className={classes.listimage} alt={recipe.title} alt={\"recipe img\"} /> </div> ;\r\n\r\n  let tile_jsx;\r\n  // if feed or list\r\n  if( props.smalltiles !== undefined && props.smalltiles === false) {\r\n    tile_jsx = (\r\n    <GridListTile key={r_img} className={classes.listtile} onClick={() => handeRecipeClick(recipe)}>\r\n      {image}\r\n      <GridListTileBar\r\n        title={recipe.title}\r\n        subtitle={<span>Av: {recipe.user}</span>}\r\n      />\r\n    </GridListTile>);\r\n  } else // LIST\r\n  {\r\n    tile_jsx = (\r\n    <React.Fragment>\r\n      <GridListTile key={r_img} className={classes.listtile_small} onClick={() => handeRecipeClick(recipe)}>\r\n        {image}\r\n      </GridListTile>\r\n    </React.Fragment>);\r\n  }\r\n\r\n  return (\r\n\r\n    <React.Fragment>\r\n        {tile_jsx}\r\n\r\n      <MySnackbar open={openDialog} handleClose={handleClose} message={recipe.title} action={\"ta bort från lista\"}/>\r\n    </React.Fragment>\r\n\r\n  );\r\n}\r\n\r\n// <MyDialog open={openDialog}/>\r\n\r\nconst useStyles = makeStyles({\r\n  listimage: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    minWidth: '150px',\r\n    minHeight: '150px',\r\n    objectFit: 'cover'\r\n  },\r\n  listtile_small: {\r\n    maxHeight: '100px',\r\n    maxWidth: '100px',\r\n    padding: '2px',\r\n  },\r\n  listtile: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    padding: '5px',\r\n  }\r\n});\r\n\r\n\r\nexport default RecipeItem;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport GridList from '@material-ui/core/GridList';\r\nimport RecipeItem from '../components/recipeitem';\r\n\r\nfunction RecipeGridList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  const [images, setImages] = useState([]);\r\n  let smalltiles = (props.smalltiles) ? props.smalltiles : false;\r\n\r\n  useEffect(() => {\r\n\r\n    let images_temp = props.recipes.map((recipe, idx) =>\r\n      <RecipeItem recipe={recipe} key={idx} smalltiles={smalltiles} id={idx} handleaction={props.handleaction}/>\r\n    );\r\n\r\n    setImages(images_temp);\r\n\r\n  }, []);\r\n\r\n  // console.log(\"images.length: \" + images.length)\r\n\r\n  // oh loading in parent component is what is taking time\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <GridList>\r\n      {images.length > 0 && images }\r\n      </GridList>\r\n    </div>\r\n  );\r\n}\r\n//    backgroundColor: '#f1f1f1',\r\n//    padding: '10px'\r\nconst useStyles = makeStyles({\r\n  root: {\r\n   display: 'flex',\r\n   flexWrap: 'wrap',\r\n   justifyContent: 'center',\r\n   overflow: 'hidden'\r\n  },\r\n  icon: {\r\n    color: 'rgba(255, 255, 255, 0.54)',\r\n  },\r\n  listimage: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    padding: '5px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\nexport default RecipeGridList;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { BrowserRouter as Link} from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n//import { useFirebaseConnect, isLoaded, isEmpty } from 'react-redux-firebase';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport RecipeGridList from '../components/recipegrid';\r\nimport RecipeItem from '../components/recipeitem';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport GridList from '@material-ui/core/GridList';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction FeedPage() {\r\n\r\n  // const [images, setImages] = useState();\r\n  const [recipes, setRecipes] = useState(undefined);\r\n  //const [docs, setDocs] = useState(undefined);\r\n  const [scrollview, setScrollview] = useState(true);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  useEffect(() => {\r\n    // someFetcher();\r\n    //usersRef.on('value', function(snap) { console.log(snap.val()); })\r\n    let recpiesRef = store.db.collection('recipes');\r\n    recipeFetcher(recpiesRef);\r\n\r\n  }, []);\r\n\r\n  const recipeFetcher = (recpiesRef) => {\r\n    store.db.collection(\"recipes\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        let recipe_docs = [];\r\n        querySnapshot.forEach( doc => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          recipe_docs.push(data);\r\n        });\r\n\r\n        setRecipes(recipe_docs);\r\n    });\r\n  }\r\n\r\n  // <div className={classes.imageContainer}>{images}</div>\r\n  // recipeData.PastaMaster.recipes\r\n// { recipes != undefined && <RecipeGridList imageData={recipes}/> }\r\n  if(scrollview === false )\r\n  {\r\n    return (\r\n\r\n      <div>\r\n\r\n      { recipes !== undefined && <ScrollableRecipes recipes={recipes}/> }\r\n\r\n       </div>\r\n\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <NewsContainer recipes={recipes}/>\r\n      { recipes !== undefined && <div className={classes.grid_background}><RecipeGridList recipes={recipes}/></div> }\r\n      { recipes === undefined && <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div> }\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nfunction ScrollableRecipes(props) {\r\n\r\n  const classes = useStyles();\r\n  // className={classes.userinfo}\r\n\r\n  let recipes = props.recipes.concat(props.recipes);\r\n  recipes = recipes.concat(recipes);\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={1}\r\n      justify=\"center\"\r\n\r\n    >\r\n      {\r\n        recipes.map((recipe, idx) =>\r\n        <div className={classes.scrolldiv} key={idx}>\r\n        <Grid item xs={12}>\r\n        <h3 className={classes.scrolltitle}>\r\n          { recipe.title + ' | ' + recipe.user }\r\n        </h3>\r\n        </Grid>\r\n        <Grid item xs={12} >\r\n          <img src={require('../assets/'+ 'temp_food1' + '.jpg')} className={classes.scrollimage} alt={\"recipe img\"} />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n        <p className={classes.scrolltext}>\r\n          { 'Some text' }\r\n        </p>\r\n        </Grid>\r\n        </div>\r\n      )\r\n\r\n      }\r\n    </Grid>\r\n  );\r\n}\r\n\r\n// component above the feed at start page\r\nfunction NewsContainer(props) {\r\n\r\n  const classes = useStyles();\r\n  // className={classes.userinfo}\r\n\r\n  if(props.recipes === undefined || props.recipes.length < 1 )\r\n    return null; // <p style={{margin: 15}}>Sorry chefs, an issue! probably no internet connection.</p>\r\n\r\n  //console.log(props.recipes)\r\n  let viral_header = (props.recipes !== undefined && props.recipes[1] !== undefined ) ? props.recipes[0].title : \"Veckans favvo: \";\r\n\r\n  return (\r\n    <div>\r\n    <h3>Senaste recepten</h3>\r\n    <Grid\r\n      container\r\n      spacing={1}\r\n      justify=\"center\"\r\n      alignItems=\"center\"\r\n      className={classes.newscontainer}\r\n    >\r\n\r\n      <Grid item xs={5}>\r\n\r\n        {props.recipes !== undefined &&\r\n          <GridList><RecipeItem recipe={props.recipes[1]} /></GridList>\r\n        }\r\n\r\n      </Grid>\r\n      <Grid item xs={7}>\r\n        <h3>{viral_header}</h3>\r\n        <h5>\"Bästa matlådan!\"</h5>\r\n      </Grid>\r\n\r\n    </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n// used before for testing\r\n/*\r\nfunction ImageContainer(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Link to={\"/recipe/\" + props.data.title } >\r\n      <div>\r\n      <div className={classes.foodImg}></div>\r\n      {props.data.title}\r\n      </div>\r\n    </Link>\r\n  );\r\n} */\r\n\r\nconst useStyles = makeStyles({\r\n  imageContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    marginBottom: 50,\r\n  },\r\n  grid_background: {\r\n    backgroundColor: '#f1f1f1',\r\n    paddingTop: '10px'\r\n  },\r\n  foodImg: {\r\n    backgroundColor: 'pink',\r\n    height: 100,\r\n    width: 100,\r\n    margin: 5,\r\n    borderRadius: 20\r\n  },\r\n  newscontainer: {\r\n    borderRadius: 20,\r\n    backgroundColor: '#f1f1f1',\r\n    marginBottom: 15\r\n  },\r\n  listimage: {\r\n    maxHeight: '90px',\r\n    maxWidth: '90px',\r\n    padding: '5px',\r\n    margin: '15px',\r\n    borderRadius: '10px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  },\r\n  imagesidebar: {\r\n    padding: 5\r\n  },\r\n  triedby: {\r\n    background: '#f1f1f1',\r\n    borderRadius: '4px',\r\n    padding: 5,\r\n    textAlign: 'center'\r\n  },\r\n  scrollimage: {\r\n    maxWidth: '300px',\r\n  },\r\n  scrolltitle: {\r\n    alignSelf: 'flex-start'\r\n  },\r\n  scrolldiv: {\r\n    background: '#f2f2f2',\r\n    padding: '25px',\r\n    margin: '15px',\r\n    borderRadius: '12px'\r\n  },\r\n  scrolltext: {\r\n    color: 'black'\r\n  }\r\n});\r\n\r\nexport default FeedPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <Typography\r\n      component=\"div\"\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    'aria-controls': `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nexport default function SimpleTabs(props) {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n    //console.log(\"value: \" + value)\r\n  };\r\n\r\n  // console.log(props.children)\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\">\r\n          <Tab label=\"Recept\" {...a11yProps(0)} />\r\n          <Tab label=\"Listor\" {...a11yProps(1)} />\r\n          <Tab label=\"Följare\" {...a11yProps(2)} />\r\n          <Tab label=\"Följer\" {...a11yProps(3)} />\r\n        </Tabs>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        {props.children[0]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        {props.children[1]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        {props.children[2]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        {props.children[3]}\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\n\r\nfunction FollowerListItem(props) {\r\n\r\n  const classes = useStyles();\r\n  let user = props.user;\r\n\r\n  let user_avatar = undefined;\r\n  if(user.profile_img_url != undefined) {\r\n    user_avatar = <img src={user.profile_img_url} className={classes.smallprofileimage} alt={\"profile-img\"} />; //\r\n  } else {\r\n    user_avatar = (\r\n      <Avatar>\r\n          <PersonIcon />\r\n      </Avatar>\r\n    );\r\n  }\r\n\r\n  return (\r\n\r\n    <ListItem>\r\n      <ListItemAvatar>\r\n        {user_avatar}\r\n      </ListItemAvatar>\r\n\r\n      <ListItemText\r\n        primary= { user.username }\r\n        secondary={ user.fullname }\r\n        onClick={() => props.handleChange(user.username)}\r\n      />\r\n\r\n      <ListItemSecondaryAction>\r\n        <IconButton edge=\"end\" aria-label=\"follows\">\r\n          <CheckCircleIcon className={(user.follows ? classes.followColor : classes.notfollowColor)}/>\r\n        </IconButton>\r\n      </ListItemSecondaryAction>\r\n    </ListItem>\r\n\r\n  );\r\n\r\n}\r\n\r\n// className={(user.follows ? 'followColor' : 'notfollowColor')}\r\n\r\nfunction FollowerList(props) {\r\n\r\n  const [followData, setFollowData] = useState([]);\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleUserClick = (user) => {\r\n    history.push(\"/profile/\" + user );\r\n  };\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    //console.log(\"new props\")\r\n    setFollowData(props.followerData);\r\n\r\n  }, [props.followerData]);\r\n\r\n  //console.log(props.followerData)\r\n\r\n  if (false && props.followerData.length < 1) {\r\n    //console.log(\"sad\")\r\n    return (\r\n      <p>sad, no followers</p>\r\n    );\r\n  }\r\n\r\n  let followersjsx = followData.map((user, idx) =>\r\n    <FollowerListItem key={idx} user={user} handleChange={handleUserClick}/>\r\n  );\r\n\r\n  return (\r\n    <List dense={true} className={classes.followerlist}>\r\n      {followersjsx}\r\n    </List>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  followerlist: {\r\n   marginTop: '20px',\r\n },\r\n   followColor: {\r\n     color: '#39A4B3'\r\n   },\r\n   notfollowColor: {\r\n     color: '#e8e8e8'\r\n   },\r\n   smallprofileimage: {\r\n     width: '40px'\r\n   }\r\n});\r\n\r\nexport default FollowerList;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport RecipeGridList from '../components/recipegrid';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nvar Spinner = require('react-spinkit');\r\n// import RecipeGridList from '../components/recipegrid';\r\n\r\nfunction ListContainer(props) {\r\n\r\n  const [recipes, setRecipes] = React.useState([]);\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  const list_doc = props.listdoc;\r\n\r\n  useEffect(() => {\r\n\r\n    // now using\r\n    if(props.recipeDocs != undefined) {\r\n      console.log(\"what??\")\r\n      setRecipes(props.recipes);\r\n      return;\r\n    }\r\n\r\n    // using recipe ids\r\n    if (list_doc.recipes != undefined) {\r\n\r\n      let temp_recipes = [];\r\n\r\n      // previously liked recipes will persist in the firestore map but be false\r\n      Object.keys(list_doc.recipes).forEach(function(key) {\r\n          if(list_doc.recipes[key] === true)\r\n            temp_recipes.push(key)\r\n      });\r\n\r\n      recipe_fetcher(temp_recipes);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const handleaction = (recipe_id) => {\r\n\r\n    console.log(\"delete \" + recipe_id + \" from \" + list_doc.id )\r\n\r\n    let listsRef = store.db.collection('recipe_lists').doc(list_doc.id);\r\n\r\n    listsRef.get().then(function(doc) {\r\n\r\n      let data = doc.data();\r\n      data.id = doc.id;\r\n      data.recipes[recipe_id] = false; // remove from list // my_map.delete(key)\r\n      store.db.collection(\"recipe_lists\").doc(doc.id).update(data);\r\n\r\n      // console.log(data)\r\n\r\n      //let updated_recipes = data.recipes[recipe_id];\r\n      // const nextState = recipes.map(a => a.id === doc.id ? { ...a, [recipes]: updated_recipes } : a);\r\n      // setRecipes(nextState);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  // fetch by list of recipe ids\r\n  const recipe_fetcher = (recipe_id_list) => {\r\n\r\n    console.log(\"fetching..\")\r\n\r\n    let temp_recipes = [];\r\n    let ref;\r\n    recipe_id_list.map( (recipe_id, idx) => {\r\n\r\n      ref = store.db.collection('recipes').doc(recipe_id);\r\n      ref.get().then(function(doc) {\r\n          if (doc.exists) {\r\n\r\n              let data = doc.data();\r\n              data.id = doc.id;\r\n              temp_recipes.push(data);\r\n              if (idx == recipe_id_list.length - 1) {\r\n                setRecipes(temp_recipes);\r\n              }\r\n          } else {\r\n              console.log(\"No such document! recipe_id: \" + recipe_id);\r\n          }\r\n      }).catch(function(error) {\r\n          console.log(\"Error getting document:\", error);\r\n      });\r\n    })\r\n  }\r\n\r\n  // either spinner or recipe content is to be shown\r\n  let spinner_jsx = <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>;\r\n  let recipeContent = (recipes.length > 0) ? <RecipeGridList handleaction={handleaction} recipes={recipes} smalltiles={true}/> : spinner_jsx;\r\n\r\n  let header;\r\n  if (props.noheader == false) {\r\n    let listname = (list_doc.listname) ? list_doc.listname : \"<listname>\"; // \"Gillade recept\"\r\n    let user_in_header = (props.mine) ? \"\" : \"| \" + props.createdby.split(\"@\")[0];\r\n    header = <p className={classes.list_header}> {listname} <i>{user_in_header}</i> </p>;\r\n  }\r\n\r\n  let id = 5;\r\n\r\n  return (\r\n    <div style={{width: '100%'}}>\r\n      {header}\r\n      <div className={classes.listcontainer}>\r\n        {recipeContent}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  listcontainer: {\r\n    borderRadius: 20,\r\n    backgroundColor: '#f1f1f1',\r\n    marginBottom: 15,\r\n    minHeight: 50\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: '20px'\r\n  },\r\n  list_header: {\r\n    background: '#cab18e',\r\n    color: 'white',\r\n    padding: '3px 15px',\r\n    borderRadius: '5px'\r\n}\r\n});\r\n\r\nexport default ListContainer;\r\n","import React, {useState, useEffect, useCallback} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\n\r\nimport ListContainer from '../components/listcontainer';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\n// ********************************* */\r\n\r\n// a little function to help us with reordering the result\r\nconst reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n\r\n    return result;\r\n};\r\n\r\nlet grid = 15;\r\nconst getReicipeStyle = (isDragging, draggableStyle) => {\r\n\r\n  return {\r\n\r\n    userSelect: 'none',\r\n    margin: `0px 10px ${grid}px 0px`,\r\n    // background: isDragging ? 'lightgreen' : '#68bb8c', // 'lightgreen\r\n    borderRadius: 10,\r\n    width: '120px !important', // isDragging ? '50px !important' : '120px',\r\n    height: '120px !important', // isDragging ? '50px !important' : '120px',\r\n\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle\r\n}};\r\n\r\n\r\nconst getLikedListStyle = isDraggingOver => ({\r\n  background: isDraggingOver ? 'lightblue' : '#eeeeee',\r\n    background: '#eeeeee',\r\n    padding: grid,\r\n    width: '90%',\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    borderRadius: 12,\r\n});\r\n\r\nfunction DraggableRecipe(props) {\r\n\r\n  const classes = useStyles();\r\n  const recipe = props.recipe;\r\n\r\n  // SET IMAGE\r\n  let r_img = ( recipe.img !== undefined) ? recipe.img : 'temp_food1';\r\n  let img_src = ( recipe.img_url !== undefined) ? recipe.img_url : require('../assets/'+ r_img + '.jpg');\r\n  let image = <img src={img_src} className={classes.listimage} alt={recipe.title} alt={\"recipe img\"} />;\r\n\r\n  // RETURN JSX\r\n  return (\r\n    <React.Fragment>\r\n    {image}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nwindow.oncontextmenu = function(event) {\r\n     event.preventDefault();\r\n     event.stopPropagation();\r\n     return false;\r\n};\r\n\r\nfunction ListPage() {\r\n\r\n    const [listState, setlistState] = React.useState(undefined);\r\n    const [likes, setLikes] = React.useState(undefined);\r\n    const [recipes, setRecipes] = React.useState([]);\r\n    const [lists_by_user, setLists_by_user] = React.useState([]);\r\n    const [, updateState] = React.useState();\r\n    const forceUpdate = useCallback(() => updateState({}), []);\r\n    //const [isDragging, setisDragging] = React.useState(false);\r\n    // const [wasupdated, setwasupdated] = React.useState(false);\r\n\r\n    const store = useSelector(state => state.fireReducer);\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    // dragReducer\r\n    const dispatch = useDispatch(); // be able to dispatch\r\n\r\n    const dragDisp = (isDragging_val, draggableId_val = undefined) => {\r\n      dispatch({\r\n        type: \"SETISDRAGGING\",\r\n        isDragging: isDragging_val\r\n      })\r\n\r\n      dispatch({\r\n        type: \"SETDRAGGABLEID\",\r\n        draggableId: draggableId_val\r\n      })\r\n\r\n    }\r\n\r\n    let isDragging = false;\r\n\r\n    //console.log(lists_by_user)\r\n\r\n    useEffect(() => {\r\n\r\n      if( !store.firestore_user)\r\n        return;\r\n\r\n      let current_email = store.firestore_user.email;\r\n      console.log(\"list for firestore_user: \" + current_email)\r\n\r\n      // lists created by the user\r\n      getListDocsForUser(current_email, true).then((loadedDocs) => {\r\n        setLists_by_user(loadedDocs); //console.log(\"Woff! loaded \" + loadedDocs)\r\n      });\r\n\r\n      // lists likes for the user\r\n      getLikesDocsForUser(current_email).then((like_docs) => {\r\n\r\n        // if user has no liked recipes\r\n        if(!like_docs)\r\n          return;\r\n\r\n        setLikes(like_docs); // console.log(\"Mu! loaded \" + loadedDoc)\r\n\r\n        let liked_recipes_ids = like_docs.liked_recipes;\r\n        if ( liked_recipes_ids != undefined) {\r\n\r\n          let temp_recipes = [];\r\n          // previously liked recipes will persist in the firestore map but be false\r\n          Object.keys(liked_recipes_ids).forEach(function(key) {\r\n              if(liked_recipes_ids[key] === true)\r\n                temp_recipes.push(key)\r\n          });\r\n          //console.log(temp_recipes)\r\n          recipe_fetcher(temp_recipes); // Object.keys(props.recipemap)\r\n        }\r\n\r\n      });\r\n\r\n    }, [store.firestore_user]);\r\n\r\n    let getLikesDocsForUser = function(current_email) {\r\n      return new Promise((resolve, reject) => {\r\n\r\n        let likesRef = store.db.collection('recipe_likes').doc(current_email);\r\n\r\n        likesRef.get().then(function(doc) {\r\n          let data = doc.data();\r\n          //data.id = doc.id;\r\n          //console.log(data)\r\n          resolve(data);\r\n\r\n        });\r\n      });\r\n    }\r\n\r\n    // get list definitions\r\n    let getListDocsForUser = function(current_email, mine) {\r\n      return new Promise((resolve, reject) => {\r\n\r\n        let replaced_email = current_email.replace(/\\./g, ','); // replaces all dots\r\n        let listsRef = store.db.collection('recipe_lists').where('list_followers.' + replaced_email, '==', true);\r\n        let list_docs = [];\r\n\r\n        if (mine === true) {\r\n          listsRef = listsRef.where('created_by', '==', current_email);\r\n        }\r\n\r\n        let query = listsRef.get()\r\n          .then(snapshot => {\r\n\r\n            snapshot.forEach(doc => {\r\n\r\n              let data = doc.data();\r\n              // grab only lists of other users\r\n              if (mine === true || (mine === false && data.created_by != current_email)) {\r\n                data.id = doc.id;\r\n                list_docs.push(data);\r\n              }\r\n\r\n            });\r\n            resolve(list_docs);\r\n          })\r\n      });\r\n    }\r\n\r\n    // fetch by list of recipe ids\r\n    const recipe_fetcher = (recipe_id_list) => {\r\n\r\n      let temp_recipes = [];\r\n      let ref;\r\n      recipe_id_list.map( (recipe_id, idx) => {\r\n\r\n        ref = store.db.collection('recipes').doc(recipe_id);\r\n        ref.get().then(function(doc) {\r\n            if (doc.exists) {\r\n\r\n                let data = doc.data();\r\n                data.id = doc.id;\r\n                temp_recipes.push(data);\r\n                if (idx == recipe_id_list.length - 1) {\r\n                  setRecipes(temp_recipes);\r\n                  setlistState(temp_recipes);\r\n                  // console.log(temp_recipes)\r\n                }\r\n            } else {\r\n                console.log(\"No such document! recipe_id: \" + recipe_id);\r\n            }\r\n        }).catch(function(error) {\r\n            console.log(\"Error getting document:\", error);\r\n        });\r\n      })\r\n    }\r\n\r\n    const onDragStart = result => {\r\n      console.log(\"dragging\")\r\n      console.log(result)\r\n      //setisDragging(true);\r\n      isDragging = true;\r\n\r\n      dragDisp(true, result.draggableId);\r\n    }\r\n\r\n    const onDragEnd = result => {\r\n        const { source, destination } = result;\r\n\r\n        // dropped outside the list\r\n        if (!destination) {\r\n            return;\r\n        }\r\n\r\n        // if added to list\r\n        if(destination.droppableId.substring(0, 4) === 'list') {\r\n          console.log(\"add item: \" + result.draggableId + \" to list: \" + result.destination.droppableId )\r\n          //listState.splice(source.index, 1); // remove from current list\r\n\r\n          //let listsRef = store.db.collection('recipe_lists').where('list_followers.' + replaced_email, '==', true);\r\n          // lists_by_user\r\n          let drop_id = result.destination.droppableId;\r\n          let list_index = drop_id.substring(drop_id.indexOf(\"_\")+1);\r\n\r\n          let list = lists_by_user[list_index];\r\n          let recipe_doc_id = result.draggableId;\r\n          //console.log(list)\r\n\r\n          console.log(\"grabbing list.id: \" + list.id)\r\n\r\n          let listsRef = store.db.collection('recipe_lists').doc(list.id);\r\n\r\n          listsRef.get().then(function(doc) {\r\n\r\n            let data = doc.data();\r\n            data.id = doc.id;\r\n            data.recipes[recipe_doc_id] = true; // add to list\r\n            store.db.collection(\"recipe_lists\").doc(doc.id).update(data).then(function(what) {\r\n              // history.go(0);\r\n            });\r\n\r\n            console.log(data)\r\n\r\n            let updated_recipes = data.recipes[recipe_doc_id];\r\n            const nextState = lists_by_user.map(a => a.id === doc.id ? { ...a, [recipes]: updated_recipes } : a);\r\n            setLists_by_user(nextState);\r\n\r\n          });\r\n          }\r\n\r\n        //setisDragging(false);\r\n        isDragging = false;\r\n        dragDisp(false);\r\n\r\n        // if just reordered in same list\r\n        if (source.droppableId === destination.droppableId) {\r\n            console.log(\"in here\")\r\n            const updated_items = reorder(\r\n                listState,\r\n                source.index,\r\n                destination.index\r\n            );\r\n\r\n            let temp_selected = updated_items;\r\n            setlistState(updated_items);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    let lists_by_user_jxs = lists_by_user.map((list_doc, i) =>\r\n      <Droppable key={\"list_\" + i} droppableId={\"list_\" + i} direction=\"horizontal\">\r\n          {(provided, snapshot) => {\r\n\r\n            return (\r\n              <div ref={provided.innerRef} >\r\n                <div\r\n                  style={getListStyle(snapshot.isDraggingOver)}\r\n                  className={isDragging ? null : classes.displayNone}>\r\n                    <p> {list_doc.listname} </p>\r\n                    <Spinner name=\"ball-scale-ripple\" color=\"white\" className={classes.spinner}/>\r\n                </div>\r\n\r\n                { !isDragging &&\r\n                <div>\r\n                    <ListContainer key={i}\r\n                       listdoc={list_doc}\r\n                       noheader={false} mine={true}\r\n                    />\r\n                </div>\r\n              }\r\n              </div>\r\n            );\r\n          }}\r\n      </Droppable>\r\n    );\r\n\r\n    //                  recipeDocs={list_doc.recipeDocs}\r\n    // className={isDragging ? classes.displayNone : null}\r\n\r\n    let starter_content = (<div>\r\n      <p> Du har inga gillade recept än</p>\r\n    </div>);\r\n\r\n    let loading_or_starting = (listState && listState.length < 1) ? starter_content : <p>spinner</p>;\r\n\r\n    return (listState && listState.length > 0) ? (\r\n      <div style={{margin: 10}}>\r\n        <DragDropContext onDragEnd={onDragEnd} onDragStart={onDragStart}>\r\n\r\n            <h3>Gillade recept</h3>\r\n\r\n            <div className={classes.listDroppable}>\r\n                <Droppable droppableId=\"droppable\" direction=\"horizontal\">\r\n                    {(provided, snapshot) => (\r\n                        <div\r\n                            ref={provided.innerRef}\r\n                            style={getLikedListStyle(snapshot.isDraggingOver)}>\r\n                            {listState.map((item, index) => (\r\n                                <Draggable\r\n                                    key={item.id}\r\n                                    draggableId={item.id}\r\n                                    index={index}>\r\n                                    {(provided, snapshot) => (\r\n                                        <div\r\n                                            ref={provided.innerRef}\r\n                                            {...provided.draggableProps}\r\n                                            {...provided.dragHandleProps}\r\n                                            style={getReicipeStyle(\r\n                                                snapshot.isDragging,\r\n                                                provided.draggableProps\r\n                                                    .style\r\n                                            )}>\r\n                                            <DraggableRecipe recipe={item} isdragging={snapshot.isDragging}/>\r\n                                        </div>\r\n                                    )}\r\n                                </Draggable>\r\n                            ))}\r\n                            {provided.placeholder}\r\n                        </div>\r\n                    )}\r\n                </Droppable>\r\n            </div>\r\n\r\n            <h3>Mina listor</h3>\r\n\r\n              <div style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px', padding: '15px'}}\r\n                   className=\"profilepageLists\"\r\n                >\r\n                {lists_by_user_jxs}\r\n              </div>\r\n\r\n            <h3>Listor jag följer</h3>\r\n\r\n        </DragDropContext>\r\n      </div>\r\n    ) : null;\r\n\r\n}\r\n\r\nconst getListStyle = (isDraggingOver) => ({\r\n    background: isDraggingOver ? 'lightblue' : '#68bb8c', // '#eeeeee',\r\n    padding: grid,\r\n    width: '90%',\r\n    // display: 'flex',\r\n    overflow: 'auto',\r\n    borderRadius: 12,\r\n    height: '160px',\r\n    marginBottom: '10px',\r\n    textAlign: 'center',\r\n    fontSize: '18px',\r\n    color: 'white'\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  listDroppable: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    margin: 5\r\n  },\r\n  listimage: {\r\n    height: '120px',\r\n    width: '120px',\r\n    objectFit: 'cover',\r\n    borderRadius: 10\r\n  },\r\n  draggingClass: {\r\n    height: '50px',\r\n    width: '50px',\r\n    objectFit: 'cover',\r\n    borderRadius: 10\r\n  },\r\n  spinner: {\r\n    color: 'white',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n    width: 'fit-content'\r\n  },\r\n  displayNone: {\r\n    display: 'none'\r\n  }\r\n});\r\n\r\n\r\n// Put the things into the DOM!\r\nexport default ListPage\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useParams} from \"react-router\";\r\nimport { useHistory } from \"react-router-dom\";\r\n//import { BrowserRouter as Link, Redirect} from \"react-router-dom\";\r\n//import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\n\r\nimport SimpleTabs from '../components/userpagetabs';\r\nimport RecipeGridList from '../components/recipegrid';\r\nimport FollowerList from '../components/followerlist';\r\n// import FavoritePage from '../pages/favoritepage';\r\nimport ListPage from '../pages/listpage';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport userchef from '../assets/userchef.png';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\n// () =>\r\nfunction ProfilePage(props) {\r\n\r\n  const { username_url } = useParams();\r\n  // const [user, setUser] = useState(url_user); // props.match.params.url_user\r\n  const [user, setUser] = useState(undefined);\r\n  const [ifUser, setIfUser] = useState(false);\r\n  const [recipes, setRecipes] = useState(undefined);\r\n  //const [signedIn, setSignedIn] = useState(false);\n  const [followInfo, setFollowInfo] = useState([]);\n  const [followingInfo, setFollowingInfo] = useState([]);\n  const [following_this_user, setFollowing_this_user] = useState({following: false, email: \"\"});\n\n  const classes = useStyles();\n  const store = useSelector(state => state.fireReducer);\n  const history = useHistory();\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    // CLEAN UP - can be done better\r\n\r\n    recipeFetcher_new(username_url);\r\n\r\n    if(store.firestore_user && username_url === store.firestore_user.username) {\r\n      //console.log(\"firestore_user changed: \" + store.firestore_user.username)\r\n      //console.log(\"same as logged in\")\r\n      console.log(\"if\")\r\n\r\n      setIfUser(true)\r\n      followFetcher(username_url, store.firestore_user.email, \"followers\");\r\n      followFetcher(username_url, store.firestore_user.email, \"following\");\r\n    } else if ( store.firestore_user && username_url !== store.firestore_user.username ) {\r\n\r\n      console.log(\"else if\")\r\n\r\n      //console.log(\"someone else than firestore_user: \" + username_url)\r\n      getEmail(username_url)\r\n      setIfUser(false)\r\n    }\r\n\r\n    // get email of user\r\n    email_promise(username_url).then((loadedDoc) => {\r\n      //console.log(\"got email: \" + loadedDoc.email)\r\n      console.log(\"email_promise\")\r\n      setUser(loadedDoc)\r\n    });\r\n\r\n  }, [store.firestore_user, username_url]);\r\n\r\n  var email_promise = function(url_username) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      store.db.collection('users').where('username', '==', url_username).get()\r\n        .then(snapshot => {\r\n\r\n          let doc_data;\r\n          snapshot.forEach(doc => {\r\n            // console.log(doc.id, '=>', doc.data());\r\n            doc_data = doc.data();\r\n          });\r\n          resolve(doc_data)\r\n        })\r\n    });\r\n  }\r\n\r\n  const followUser = () => {\r\n\r\n    // console.log(store.firestore_user.username + \" will follow \" + username_url)\r\n    // console.log(following_this_user)\r\n\r\n    let firebase_event_id = store.firestore_user.email + \"-follows-\" + following_this_user.email;\r\n\r\n    // in following, remove from following list\r\n    if(following_this_user.following) {\r\n      store.db.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\").doc(following_this_user.email).delete();\r\n      store.db.collection(\"followers\").doc(following_this_user.email).collection(\"followers\").doc(store.firestore_user.email).delete();\r\n      store.db.collection('events').doc(firebase_event_id).delete();\r\n\r\n    } else {\r\n      store.db.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\").doc(following_this_user.email).set({});\r\n      store.db.collection(\"followers\").doc(following_this_user.email).collection(\"followers\").doc(store.firestore_user.email).set({});\r\n\r\n      let date = new Date();\r\n\r\n      let event_follow_object = {\r\n        email: following_this_user.email,\r\n        event_image_url: store.firestore_user.profile_img_url,\r\n        other_username: store.firestore_user.username,\r\n        timestamp: date,\r\n        type: \"FOLLOWS\",\r\n        seen: false\r\n      };\r\n\r\n      store.db.collection('events').doc(firebase_event_id).set(event_follow_object);\r\n\r\n    }\r\n\r\n    setFollowing_this_user({following: !following_this_user.following, email: following_this_user.email});\r\n\r\n  }\r\n\r\n  // get email correspoding to username\r\n  function getEmail(url_user) {\r\n\r\n    // loop through all users to find email of user with this username\r\n    store.db.collection(\"users\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let doc_email = \"\";\r\n          if(doc.data().username === url_user) {\r\n            doc_email = doc.id;\r\n            console.log(\"found other user email: \" + doc_email)\r\n\r\n            followFetcher(username_url, doc_email, \"followers\");\r\n            followFetcher(username_url, doc_email, \"following\");\r\n          }\r\n\r\n          let found = false;\r\n          // check if user signed in is following the user of this profile page\r\n          store.db.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\")\r\n          .onSnapshot(function(querySnapshot) {\r\n\r\n              querySnapshot.forEach( doc => {\r\n                // console.log(doc.id)\r\n                if(doc.id === doc_email) {\r\n                  console.log(\"following \" + doc_email)\r\n                  found = true;\r\n                  setFollowing_this_user({following: true, email: doc_email});\r\n                }\r\n              })\r\n          });\r\n\r\n          if(found === false && doc_email !== \"\") {\r\n            setFollowing_this_user({following: false, email: doc_email});\r\n          }\r\n\r\n        });\r\n\r\n    });\r\n  }\r\n\r\n  // get email of followers for the user profile in view\r\n  const followFetcher = (current_username, current_user_email, collection) => {\r\n\r\n    let follow_docs = [];\r\n\r\n    store.db.collection(\"followers\").doc(current_user_email).collection(collection)\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let data = doc.data();\r\n          data.email = doc.id;\r\n          follow_docs.push(data);\r\n          // console.log(querySnapshot)\r\n        })\r\n        callback(current_username, follow_docs, collection);\r\n    });\r\n  }\r\n\r\n  // when all followers (emails) are collected\r\n  function callback (current_username, follow_docs, collection) {\r\n    followBuilder(current_username, follow_docs, collection);\r\n  }\r\n\r\n  // from emails, get further user info\r\n  const followBuilder = (current_username, follow_docs, collection) => {\r\n\r\n    let followers = [];\r\n    follow_docs.forEach((item, i) => {\r\n\r\n      store.db.collection(\"users\").doc(item.email)\r\n      .onSnapshot(function(doc) {\r\n          let data = doc.data();\r\n          followers.push({username: data.username, fullname: data.fullname, profile_img_url: data.profile_img_url, follows: false});\r\n      })\r\n    });\r\n\r\n    callback2(followers, collection);\r\n  }\r\n\r\n  function callback2 (followers, collection) {\r\n    //console.log('setFollowInfo and setFollowingInfo');\r\n\r\n    if(collection === \"followers\")\r\n      setFollowInfo(followers);\r\n    else if(collection === \"following\")\r\n      setFollowingInfo(followers);\r\n  }\r\n\r\n\r\n  // fetch recipes for the user profile in view\r\n  const recipeFetcher_new = (current_username) => {\r\n    store.db.collection(\"recipes\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        let recipe_docs = [];\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let data = doc.data();\r\n          if( data.user == current_username )\r\n          {\r\n            data.id = doc.id;\r\n            recipe_docs.push(data);\r\n          }\r\n        });\r\n        setRecipes(recipe_docs);\r\n    });\r\n  }\r\n\r\n  // fetch user correspoding to the url, compare to user signed in\r\n  /*\r\n  const userFetcher = () => {\r\n\r\n    console.log('in userFetcher')\r\n    // Create a reference to the cities collection\r\n    let usersRef = store.db.collection('users');\r\n\r\n    // Create a query against the collection\r\n    let queryRef = usersRef.where('username', '==', user);\r\n    let inSnapshot = false;\r\n\r\n    //console.log(queryRef)\r\n    queryRef.onSnapshot(function(querySnapshot) {\r\n\r\n          inSnapshot = true;\r\n          querySnapshot.forEach( doc => {\r\n            let data = doc.data();\r\n\r\n            if(data.username === user) {\r\n              setIfUser(true);\r\n            }\r\n          });\r\n    });\r\n\r\n    if(inSnapshot === false)\r\n    {\r\n      setIfUser(false);\r\n      console.log( \"no snapshot\");\r\n    }\r\n  }\r\n  */\r\n  /*\r\n  <Button onClick={ () => firebase.auth().signOut()} variant=\"contained\" color=\"primary\">\r\n    Logga ut\r\n  </Button>\r\n  <button onClick={ () => firebase.auth().signOut() } name=\"signout\"> Logga ut </button>*/\r\n  let spinner_jsx = <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>;\r\n  let recipeContent = (recipes != undefined) ? <RecipeGridList recipes={recipes}/> : spinner_jsx;\r\n\r\n  let followBtn;\r\n  if (store.firestore_user && !ifUser && following_this_user.following == true) {\r\n\r\n    followBtn = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<RemoveIcon />}\r\n      onClick={() => followUser()}\r\n    >\r\n      Sluta följ\r\n    </Button>);\r\n\r\n  } else if (store.firestore_user && !ifUser) {\r\n\r\n    followBtn = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<AddIcon />}\r\n      onClick={() => followUser()}\r\n    >\r\n      Följ\r\n    </Button>);\r\n  }\r\n\r\n  // let followBtn =\r\n\r\n  let uni = (store.firestore_user != undefined) ? store.firestore_user.university : undefined;\r\n  //let img_src = (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : userchef;\r\n\r\n  let img_src = userchef; // default user image\r\n  if (ifUser && store.firestore_user && store.firestore_user.profile_img_url) {\r\n    img_src = store.firestore_user.profile_img_url; // page shows profile for this user\r\n  } else if (!ifUser && user && user.profile_img_url) {\r\n    img_src = user.profile_img_url\r\n  }\r\n\r\n  //console.log(\"rerender \")\r\n  return (\r\n\r\n    <React.Fragment>\r\n\r\n      <Grid\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n        className={classes.userinfo}\r\n      >\r\n\r\n        <Grid item xs={6}>\r\n          <p className={classes.username}>{username_url}</p>\r\n          <p className={classes.university}>{uni}</p>\r\n          {ifUser && <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<SettingsIcon />}\r\n            onClick={() => history.push(\"/settings\")}\r\n          >\r\n            Inställningar\r\n          </Button>}\r\n          {followBtn}\r\n        </Grid>\r\n        <Grid item xs={3}>\r\n          <img src={img_src} alt=\"user-profile-img\"/>\r\n        </Grid>\r\n\r\n      </Grid>\r\n\r\n      <SimpleTabs value={0}>\r\n        <div style={{paddingTop: '15px'}}>\r\n        { recipeContent }\r\n        </div>\r\n        <div>\r\n        <ListPage/>\r\n        </div>\r\n        <div>\r\n        <FollowerList followerData={followInfo}/>\r\n        </div>\r\n        <div>\r\n        <FollowerList followerData={followingInfo}/>\r\n        </div>\r\n      </SimpleTabs>\r\n\r\n   </React.Fragment>\r\n\r\n  );\r\n// followInfo.length > 0 &&\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  userinfo: {\r\n   marginBottom: '20px',\r\n },\r\n spinner: {\r\n   display: 'flex',\r\n   justifyContent: 'center',\r\n   marginTop: 100\r\n },\r\n username: {\r\n   fontWeight: 'bold',\r\n   margin: '10px 0px'\r\n },\r\n university: {\r\n   margin: '10px 0px'\r\n }\r\n});\r\n\r\n\r\nexport default ProfilePage;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useSelector } from \"react-redux\";\r\n\r\n// import '../style/GlobalCssButton.css';\r\n// import * as ui from '../meterialuiimports';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport FolderIcon from '@material-ui/icons/Folder';\r\nimport ForwardIcon from '@material-ui/icons/Forward';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction generate(element) {\r\n  return [0, 1, 2].map(value =>\r\n    React.cloneElement(element, {\r\n      key: value,\r\n    }),\r\n  );\r\n}\r\n\r\n/*\r\n\r\n<ListItemText\r\n  primary= { props.user + \" följer nu dig\" }\r\n  secondary={true ? props.time : null}\r\n/>*/\r\n\r\nconst B = (props) => <span style={{fontWeight: 'bold'}}>{props.children}</span>\r\n\r\n\r\nfunction NoticeListItem(props) {\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  let noticeText;\r\n\r\n  const userClick = () => {\r\n    console.log(\"well hello \" + props.user)\r\n    history.push(\"/profile/\" + props.user );\r\n  };\r\n\r\n  const recipeClick = () => {\r\n    console.log(\"well hello \" + props.recipe)\r\n    // let recipe_title = props.recipe.substring(0, props.recipe.indexOf(\"-\"));\r\n    history.push(\"/recipe/\" + recipe_id_to_title(props.recipe) + \"/\" + props.recipe );\r\n  };\r\n\r\n  const recipe_id_to_title = (recipe_id) => {\r\n    let recipe_title = props.recipe.substring(0, props.recipe.indexOf(\"-\"));\r\n    return recipe_title;\r\n  }\r\n\r\n  switch (props.type) {\r\n    case \"FOLLOWS\":\r\n      noticeText = <span onClick={userClick}><B>{props.user}</B> följer nu dig.</span>;\r\n      break;\r\n    case \"TIPS\":\r\n      noticeText = <div>\r\n                  <span onClick={userClick}><B>{props.user}</B></span> <span onClick={recipeClick}>tipsar dig om att laga <B>{recipe_id_to_title(props.recipe)}</B>.</span>\r\n                  </div>;\r\n      break;\r\n    case \"TESTED\":\r\n      noticeText = <div>\r\n                    <span onClick={userClick}><B>{props.user}</B></span> <span onClick={recipeClick}>har testat ditt recept <B>{recipe_id_to_title(props.recipe)}</B>.</span>\r\n                  </div>;\r\n    default:\r\n\r\n  }\r\n\r\n  // if(props.type === \"FOLLOWS\")\r\n  //  noticeText = <span><B>{props.user}</B> följer nu dig.</span>;\r\n\r\n\r\n  let user_avatar = undefined;\r\n\r\n  if(props.eventimg != undefined) {\r\n    user_avatar = <img src={props.eventimg} className={classes.smallprofileimage} alt={\"profile-img\"} />; //\r\n  } else {\r\n    user_avatar = (\r\n      <Avatar>\r\n          <PersonIcon />\r\n      </Avatar>\r\n    );\r\n  }\r\n  /*\r\n  user_avatar = (\r\n    <Avatar>\r\n        <PersonIcon />\r\n    </Avatar>\r\n  ); */\r\n\r\n  return (\r\n\r\n    <ListItem>\r\n      <ListItemAvatar>\r\n        {user_avatar}\r\n      </ListItemAvatar>\r\n\r\n      <ListItemText\r\n        primary= { noticeText }\r\n        secondary={true ? props.time : null}\r\n      />\r\n\r\n      <ListItemSecondaryAction>\r\n        <IconButton edge=\"end\" aria-label=\"delete\">\r\n          <ForwardIcon />\r\n        </IconButton>\r\n      </ListItemSecondaryAction>\r\n    </ListItem>\r\n\r\n  );\r\n\r\n}\r\n\r\nfunction NoticePage(props) {\r\n\r\n  const [eventList, setEventList] = useState(undefined);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    if(store.firestore_user === undefined)\r\n      return;\r\n\r\n    // get email of user\r\n    events_promise(store.firestore_user.email).then((loadedDocs) => {\r\n      // console.log(loadedDocs)\r\n      setEventList(loadedDocs)\r\n      //setUser(loadedDoc)\r\n    });\r\n\r\n  }, [store.firestore_user]);\r\n\r\n  var events_promise = function(email) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      store.db.collection('events').where('email', '==', email).get()\r\n        .then(snapshot => {\r\n\r\n          let doc_data = [];\r\n          snapshot.forEach(doc => {\r\n            let temp_data = doc.data();\r\n            doc_data.push(temp_data);\r\n          });\r\n          resolve(doc_data)\r\n        })\r\n    });\r\n  }\r\n\r\n\r\n  let eventListjsx = (eventList) ? eventList.map( (event, idx) =>\r\n    <NoticeListItem key={idx} type={event.type} user={event.other_username} recipe={event.recipe || undefined} time=\"2 dgr\" eventimg={event.event_image_url}/>\r\n  ) : null;\r\n\r\n  return (\r\n\r\n    <div>\r\n    <h3>Dina notiser</h3>\r\n\r\n    { !eventList &&\r\n      <div className={classes.spinner}><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>\r\n    }\r\n\r\n    { eventList &&\r\n      <List dense={true}>\r\n        {eventListjsx}\r\n      </List>\r\n    }\r\n    { (eventList && eventList.length < 1) &&\r\n      <p> Ledsen, inga händelsen än. Börja interagera med dina kockvänner! 🍳 </p>\r\n    }\r\n\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  smallprofileimage: {\r\n    width: '40px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\n/*\r\n\r\n<List dense={true}>\r\n  <NoticeListItem type=\"FOLLOWS\" user=\"Vegokocken\" time=\"1 h\"/>\r\n  <NoticeListItem type=\"TIPS\" user=\"DelicatoKing\" recipe=\"Linsgryta\" time=\"3 h\"/>\r\n  <NoticeListItem type=\"TESTED\" user=\"PastaMaster\" recipe=\"Korvstroganoff\" time=\"2 dgr\"/>\r\n</List>\r\n\r\n*/\r\n\r\n\r\n/*\r\n\r\n<ListItem>\r\n  <ListItemAvatar>\r\n    <Avatar>\r\n        <PersonIcon />\r\n    </Avatar>\r\n  </ListItemAvatar>\r\n  <ListItemText\r\n    primary=\"Single-line item\"\r\n    secondary={true ? 'Secondary text' : null}\r\n  />\r\n  <ListItemSecondaryAction>\r\n    <IconButton edge=\"end\" aria-label=\"delete\">\r\n      <ForwardIcon />\r\n    </IconButton>\r\n  </ListItemSecondaryAction>\r\n</ListItem>\r\n\r\n*/\r\n\r\n\r\nexport default NoticePage;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport firebase from 'firebase/app';\r\n// import _ from 'underscore';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\nimport ListContainer from '../components/listcontainer';\r\n\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nfunction FavoritePage(props) {\r\n\r\n  const [lists, setLists] = React.useState([]);\r\n  const [lists_by_user, setLists_by_user] = React.useState([]);\r\n  const [likes, setLikes] = React.useState(undefined);\r\n\r\n  const [myLists, setMyLists] = React.useState({});\r\n  const [refList, setRefList] = React.useState([]);\r\n\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  useEffect(() => {\r\n\r\n    if( !( props.otheruser || store.firestore_user))\r\n      return;\r\n\r\n    let current_email = (props.otheruser) ? props.otheruser.email : store.firestore_user.email;\r\n    console.log(\"list for firestore_user: \" + current_email)\r\n\r\n    // lists the user follows\r\n    getListDocsForUser(current_email, false).then((loadedDocs) => {\r\n      setLists(loadedDocs); //console.log(\"Mjau! loaded \" + loadedDocs)\r\n    });\r\n\r\n    // lists created by the user\r\n    getListDocsForUser(current_email, true).then((loadedDocs) => {\r\n      setLists_by_user(loadedDocs); //console.log(\"Woff! loaded \" + loadedDocs)\r\n    });\r\n\r\n    // lists likes for the user\r\n    getLikesDocsForUser(current_email).then((loadedDoc) => {\r\n      setLikes(loadedDoc); // console.log(\"Mu! loaded \" + loadedDoc)\r\n    });\r\n\r\n  }, [store.firestore_user]);\r\n\r\n  let getListDocsForUser = function(current_email, mine) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let replaced_email = current_email.replace(/\\./g, ','); // replaces all dots\r\n      let listsRef = store.db.collection('recipe_lists').where('list_followers.' + replaced_email, '==', true);\r\n      let list_docs = [];\r\n\r\n      if (mine === true) {\r\n        listsRef = listsRef.where('created_by', '==', current_email);\r\n      }\r\n\r\n      let query = listsRef.get()\r\n        .then(snapshot => {\r\n\r\n          snapshot.forEach(doc => {\r\n\r\n            let data = doc.data();\r\n            // grab only lists of other users\r\n            if (mine === true || (mine === false && data.created_by != current_email)) {\r\n              list_docs.push(data);\r\n            }\r\n\r\n          });\r\n          resolve(list_docs);\r\n        })\r\n    });\r\n  }\r\n\r\n  // fix not found\r\n  let getLikesDocsForUser = function(current_email) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let likesRef = store.db.collection('recipe_likes').doc(current_email);\r\n\r\n      likesRef.get().then(function(doc) {\r\n        let data = doc.data();\r\n        //data.id = doc.id;\r\n        resolve(data);\r\n      });\r\n    });\r\n  }\r\n\r\n  const onDragEnd = result => {\r\n      const { source, destination } = result;\r\n\r\n  }\r\n\r\n  // build jsx for lists this user follows\r\n  let lists_jxs = lists.map((item, i) =>\r\n    <ListContainer key={i} recipemap={item.recipes} listname={item.listname} createdby={item.created_by} noheader={false}/>\r\n  );\r\n\r\n  // build jsx for lists this user has created\r\n  let lists_by_user_jxs = lists_by_user.map((item, i) =>\r\n    <ListContainer key={i} recipemap={item.recipes} listname={item.listname} createdby={item.created_by} noheader={false} mine={true}/>\r\n  );\r\n\r\n  let likes_by_user_jxs = (likes != undefined) ? <ListContainer recipemap={likes.liked_recipes} noheader={true}/> : undefined;\r\n\r\n  // if user profile view, this prop will be available\r\n  let no_lists_text = (props.otheruser) ? props.otheruser + \" har ännu inga sparade listor\" : \"Inga sparade listor ännu\";\r\n  let liked_list_jsx = (refList.length >= 1) ? <ListContainer refs={refList} noheader={true}/> : <p> Gillade recept.. </p>\r\n\r\n  // <p> - kanske listor som <i>billig vecka, bra matlådemat</i> eller <i>att prova</i> ? </p>\r\n  // <p> Här kommer du se de listor skapade av andra använder som du följer 🍴💎 </p>\r\n  // { lists_I_follow.length < 1 && <p> {no_lists_text} </p>}\r\n // .body .MuiGridList-root\r\n\r\n const getListStyle = isDraggingOver => ({\r\n     background: isDraggingOver ? 'lightblue' : '#eeeeee',\r\n     padding: 8,\r\n     width: '90%',\r\n     display: 'flex',\r\n     overflow: 'auto',\r\n     borderRadius: 12,\r\n });\r\n\r\n  return (\r\n\r\n    <div>\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Droppable droppableId=\"list_test2\" direction=\"horizontal\">\r\n          {(provided, snapshot) => (\r\n              <div\r\n                  ref={provided.innerRef}\r\n                  style={getListStyle(snapshot.isDraggingOver)}>\r\n                  {provided.placeholder}\r\n              </div>\r\n          )}\r\n      </Droppable>\r\n    { !props.otheruser &&\r\n\r\n      <ExpansionPanel style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px'}}\r\n        defaultExpanded={true}>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography style={{fontWeight: 'bold'}}> Gillade recept</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails>\r\n\r\n          {likes_by_user_jxs}\r\n\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n\r\n    }\r\n    { !props.otheruser && <h3>Listor</h3> }\r\n\r\n    { props.otheruser &&\r\n\r\n      <div style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px', padding: '15px'}}\r\n           className=\"profilepageLists\"\r\n        >\r\n        {lists_by_user_jxs}\r\n      </div>\r\n\r\n    }\r\n    { !props.otheruser &&\r\n    <ExpansionPanel style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px'}}>\r\n      <ExpansionPanelSummary\r\n        expandIcon={<ExpandMoreIcon />}\r\n        aria-controls=\"panel1a-content\"\r\n        id=\"panel1a-header\"\r\n      >\r\n        <Typography style={{fontWeight: 'bold'}}> Dina listor</Typography>\r\n      </ExpansionPanelSummary>\r\n      <ExpansionPanelDetails>\r\n\r\n        {lists_by_user_jxs}\r\n\r\n      </ExpansionPanelDetails>\r\n    </ExpansionPanel>\r\n    }\r\n    { !props.otheruser &&\r\n\r\n      <ExpansionPanel style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px'}}>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography style={{fontWeight: 'bold'}}> Listor du följer</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails>\r\n\r\n          {lists_jxs}\r\n\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n\r\n    }\r\n    </DragDropContext>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default FavoritePage;\r\n","import React from \"react\";\r\n\r\nconst noop = () => {};\r\n\r\nconst FileInput = ({ value, onChange = noop, ...rest }) => (\r\n  <div>\r\n    {Boolean(value.length) && (\r\n      <div>Selected files: {value.map(f => f.name).join(\", \")}</div>\r\n    )}\r\n    <label style={{\r\n\r\n      padding: '6px 16px',\r\n      fontSize: '0.875rem',\r\n      minWidth: '64px',\r\n      boxSizing: 'border-box',\r\n      transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n      fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n      fontWeight: '500',\r\n      lineHeight: '1.75',\r\n      borderRadius: '4px',\r\n      letterSpacing: '0.02857em',\r\n      backgroundColor: '#3f51b5',\r\n      color: 'white',\r\n      boxShadow: '0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12)'\r\n\r\n    }}>\r\n\r\n     Välj bild\r\n\r\n      <input\r\n        {...rest}\r\n        style={{ display: \"none\" }}\r\n        type=\"file\"\r\n        onChange={e => {\r\n          onChange([...e.target.files]);\r\n        }}\r\n      />\r\n    </label>\r\n  </div>\r\n);\r\n\r\n/*\r\n\r\n<Button\r\n  variant=\"contained\"\r\n  color=\"primary\"\r\n  startIcon={<PhotoCamera />}\r\n  style={{ textTransform: 'unset' }}\r\n>\r\n  Välj bild\r\n</Button>\r\n\r\n*/\r\n\r\nexport default FileInput;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nfunction ValidCheck(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid item xs={props.xs}>\r\n    <FormControlLabel disabled\r\n      control={\r\n        <Checkbox\r\n          checked={props.checked}\r\n          color= \"primary\"\r\n          className= {classes.nomargin}\r\n        />}\r\n    />\r\n    </Grid>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  nomargin: {\r\n    margin: 0,\r\n    color: '#68BB8C !important'\r\n  }\r\n});\r\n\r\nexport default ValidCheck;\r\n","\r\nimport React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n//import { withStyles } from '@material-ui/core/styles';\r\n//import { createMuiTheme, makeStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport '../style/GlobalCssButton.css';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\n\r\nfunction DescriptionList(props) {\r\n\r\n  const [editObject, setEditObject] = useState(undefined);\r\n  const [order, setOrder] = useState(-2);\r\n  const [text, setText] = useState(\"\");\r\n\r\n  //console.log(\"order: \" + order)\r\n\r\n  const [descriptions, setDescriptions] = useState(() => initiate_descriptions());\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n\r\n  const ingredientsDisp = () => {\r\n    dispatch({\r\n      type: \"SETDESCRIPTIONS\",\r\n      descriptions: descriptions\r\n    })\r\n  }\r\n\r\n  function initiate_descriptions() {\r\n\r\n    let temp_description = [\r\n    {order: 1, text: \"Knäck äggen i en bunke (default data)\"},\r\n    {order: 2, text: \"Stek i pannan meed smör eller kokosolja\"},\r\n    {order: 3, text: \"Vispa i mjöl, mjölk och salt\"}\r\n    ];\r\n\r\n    temp_description = [];\r\n\r\n    return (props.description !== undefined) ? props.description : temp_description;\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    let temp_descriptions = upload_store.descriptions;\r\n    if(temp_descriptions !== undefined)\r\n    {\r\n      setDescriptions(temp_descriptions);\r\n      // props.handleAdd(temp_descriptions.length);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const addDescription = () => {\r\n    // console.log(\"okay add\")\r\n\r\n    let temp_list = descriptions.slice(0);\r\n    let new_obj = {order: descriptions.length + 1, text: \"\"};\r\n    temp_list.push(new_obj);\r\n    setEditObject(new_obj);\r\n    setDescriptions(temp_list);\r\n\r\n    setOrder(descriptions.length + 1);\r\n    ingredientsDisp();\r\n  }\r\n\r\n  const removeDescription = () => {\r\n    //console.log(\"okay remove\")\r\n    let temp_list = descriptions.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n    temp_list.splice(ind, 1);\r\n\r\n    setDescriptions(temp_list);\r\n    setEditObject(undefined);\r\n\r\n    setText(\"\");\r\n    setOrder(-321); //\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const listClick = (object) => {\r\n    console.log(\"edit descriptions\")\r\n    setEditObject(object);\r\n\r\n    // first letter to toUpperCase\r\n    object.text = (object.text.length > 0) ? object.text[0].toUpperCase() + object.text.slice(1) : \"\";\r\n\r\n    setText(object.text);\r\n    // setOrder(object.order);\r\n\r\n  }\r\n\r\n  const saveEdited = () => {\r\n    console.log(\"save values\")\r\n\r\n    let temp_list = descriptions.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n\r\n    //console.log(editObject)\r\n\r\n    let obj_copy = editObject;\r\n    obj_copy.text = (text.length > 0) ? text[0].toUpperCase() + text.slice(1) : \"\";\r\n    //obj_copy.text = text[0].toUpperCase() + text.slice(1);\r\n    // obj_copy.order = order;\r\n\r\n    temp_list[ind] = obj_copy;\r\n\r\n    //console.log(obj_copy)\r\n\r\n    if(text.length < 1) {\r\n      console.log(\"not relevant to save\")\r\n    }\r\n\r\n    setDescriptions(temp_list);\r\n\r\n    setEditObject(undefined);\r\n    setText(\"\");\r\n    setOrder(-123)\r\n\r\n    //console.log(\"temp_list.length\" + temp_list.length)\r\n\r\n    props.handleAdd(temp_list.length);\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const enterPress = (ev) => {\r\n\r\n    // console.log(`Pressed keyCode ${ev.key}`);\r\n    if (ev.key === 'Enter') {\r\n      // Do code here\r\n      console.log(`Pressed enter`);\r\n      saveEdited();\r\n      ev.preventDefault();\r\n    }\r\n\r\n  }\r\n\r\n  // let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n  // idx < ingredients.length - 1\r\n\r\n  //console.log(descriptions)\r\n\r\n  let descriptionjsx = descriptions.map((desc, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem onClick={() => listClick(desc)} className={(descriptions.indexOf(editObject) === idx ? 'testis' : '')} style={{minHeight: 40}}>\r\n      <ListItemText\r\n        primary={ desc.order + \". \" + desc.text }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < descriptions.length - 1 && <Divider component=\"li\" /> }\r\n\r\n  </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n\r\n      <Grid className=\"test\"\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n      <Grid item xs={12}>\r\n        <List dense={true} className={classes.ingredientslist}>\r\n\r\n          {descriptionjsx}\r\n\r\n          { editObject === undefined &&\r\n\r\n            <ListItem alignItems=\"center\" onClick={() => addDescription()} className={classes.newListItem}>\r\n              <ListItemText\r\n                primary=\"Lägg till\"\r\n              />\r\n            </ListItem>\r\n          }\r\n\r\n        </List>\r\n      </Grid>\r\n\r\n      { (editObject !== undefined  ) &&\r\n\r\n        <React.Fragment>\r\n\r\n        <Grid item xs={10}>\r\n          <TextField variant=\"outlined\" label=\"steg\" InputLabelProps={{shrink: true}} value={text} onChange={ event => setText(event.target.value)} onKeyPress={(ev) => enterPress(ev)}/>\r\n        </Grid>\r\n\r\n        <Grid item xs={1}>\r\n          <SaveIcon onClick={saveEdited} className={classes.greenicon} />\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <DeleteForeverIcon onClick={removeDescription} className={classes.redicon} />\r\n        </Grid>\r\n\r\n        </React.Fragment>\r\n\r\n      }\r\n\r\n      </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n// .toLowerCase()\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#f3f3f3'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  }\r\n}));\r\n\r\nexport default DescriptionList;\r\n","\r\nimport React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n//import { withStyles } from '@material-ui/core/styles';\r\n//import { createMuiTheme, makeStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport '../style/GlobalCssButton.css';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\n\r\nfunction IngredientsList(props) {\r\n\r\n  const [editObject, setEditObject] = useState(undefined);\r\n  const [quantity, setQuantity] = useState(\"\");\r\n  const [measure, setMeasure] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [ingredients, setIngredients] = useState(() => initiate_ingredients());\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n\r\n  const ingredientsDisp = () => {\r\n    dispatch({\r\n      type: \"SETINGREDIENTS\",\r\n      ingredients: ingredients\r\n    })\r\n  }\r\n\r\n  function initiate_ingredients() {\r\n    let temp_ingredients = [\r\n    {name: \"mjöl (default data)\", quantity: \"2\", measure: \"dl\"},\r\n    {name: \"salt\", quantity: \"1\", measure: \"tsk\"},\r\n    {name: \"mjölk\", quantity: \"4\", measure: \"dl\"},\r\n    {name: \"ägg\", quantity: \"2\", measure: \"\"}\r\n    ];\r\n\r\n    temp_ingredients = [];\r\n\r\n    return (props.ingredients !== undefined) ? props.ingredients : temp_ingredients;\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    let temp_ingredients = upload_store.ingredients;\r\n    if(temp_ingredients !== undefined)\r\n    {\r\n      setIngredients(temp_ingredients);\r\n      // props.handleAdd(temp_ingredients.length);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const addIngredient = () => {\r\n    //console.log(\"okay add\")\r\n\r\n    let temp_list = ingredients.slice(0);\r\n    let new_obj = {name: \"\", quantity: \"\", measure: \"\"};\r\n    temp_list.push(new_obj);\r\n    setEditObject(new_obj);\r\n    setIngredients(temp_list);\r\n\r\n    ingredientsDisp();\r\n  }\r\n\r\n  const removeIngredient = () => {\r\n    //console.log(\"okay remove\")\r\n    let temp_list = ingredients.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n    temp_list.splice(ind, 1);\r\n\r\n    setIngredients(temp_list);\r\n    setEditObject(undefined);\r\n\r\n    setQuantity(\"\");\r\n    setMeasure(\"\");\r\n    setName(\"\");\r\n\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const listClick = (object) => {\r\n    console.log(\"edit ingredient\")\r\n    setEditObject(object);\r\n\r\n    setQuantity(object.quantity);\r\n    setMeasure(object.measure);\r\n    setName(object.name);\r\n  }\r\n\r\n  const saveEdited = () => {\r\n    //console.log(\"save values\")\r\n\r\n    let temp_list = ingredients.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n\r\n    let obj_copy = editObject;\r\n    obj_copy.quantity = quantity;\r\n    obj_copy.measure = measure;\r\n    obj_copy.name = name;\r\n\r\n    temp_list[ind] = obj_copy;\r\n\r\n    setIngredients(temp_list);\r\n\r\n    setEditObject(undefined);\r\n    setQuantity(\"\");\r\n    setMeasure(\"\");\r\n    setName(\"\");\r\n\r\n    props.handleAdd(temp_list.length);\r\n\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const enterPress = (ev) => {\r\n\r\n    // console.log(`Pressed keyCode ${ev.key}`);\r\n    if (ev.key === 'Enter') {\r\n      // Do code here\r\n      // console.log(`Pressed enter`);\r\n      saveEdited();\r\n      ev.preventDefault();\r\n    }\r\n\r\n  }\r\n\r\n  // let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n  // idx < ingredients.length - 1\r\n\r\n  let ingredientsjsx = ingredients.map((ingred, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem onClick={() => listClick(ingred)} className={(ingredients.indexOf(editObject) === idx ? 'testis' : '')} style={{minHeight: 40}}>\r\n      <ListItemText\r\n        primary={ ingred.quantity + \" \" + ingred.measure + \" \" + ingred.name }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < ingredients.length - 1 && <Divider component=\"li\" /> }\r\n\r\n  </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n\r\n      <Grid className=\"test\"\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n      <Grid item xs={12}>\r\n        <List dense={true} className={classes.ingredientslist}>\r\n\r\n          {ingredientsjsx}\r\n\r\n          { editObject === undefined &&\r\n\r\n            <ListItem alignItems=\"center\" onClick={() => addIngredient()} className={classes.newListItem}>\r\n              <ListItemText\r\n                primary=\"Lägg till\"\r\n              />\r\n            </ListItem>\r\n          }\r\n\r\n        </List>\r\n      </Grid>\r\n\r\n      { (editObject !== undefined  ) &&\r\n\r\n        <React.Fragment>\r\n\r\n        <Grid item xs={2}>\r\n          <TextField required variant=\"outlined\" label=\"mängd\" InputLabelProps={{shrink: true}} value={quantity} onChange={ event => setQuantity(event.target.value.toLowerCase())}/>\r\n        </Grid>\r\n        <Grid item xs={3}>\r\n          <TextField variant=\"outlined\" label=\"mått\" InputLabelProps={{shrink: true}} value={measure} onChange={ event => setMeasure(event.target.value.toLowerCase())}/>\r\n        </Grid>\r\n        <Grid item xs={5}>\r\n          <TextField required variant=\"outlined\" label=\"ingrediens\" InputLabelProps={{shrink: true}} value={name} onChange={ event => setName(event.target.value.toLowerCase())} onKeyPress={(ev) => enterPress(ev)}/>\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <SaveIcon onClick={saveEdited} className={classes.greenicon} />\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <DeleteForeverIcon onClick={removeIngredient} className={classes.redicon} />\r\n        </Grid>\r\n\r\n        </React.Fragment>\r\n\r\n      }\r\n\r\n      </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#f3f3f3'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  }\r\n}));\r\n\r\nexport default IngredientsList;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport purple from '@material-ui/core/colors/purple';\r\nimport green from '@material-ui/core/colors/green';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: purple,\r\n    secondary: green,\r\n  },\r\n  status: {\r\n    danger: 'orange',\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","/*\r\n\r\nComponent: Page where recipes are uplaoded or edited.\r\nTODO: refactor - a lot of code right now!\r\nTODO: it should be possible to reorder ingredients (use Draggable?)\r\nTODO: let the user add extra information, as time to cook or num portions\r\n\r\n*/\r\n\r\nimport React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles, withStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport firebase from 'firebase'; // 'firebase/app';\r\n\r\nimport '../style/GlobalCssButton.css';\r\nimport FileInput from '../components/fileinput';\r\nimport ValidCheck from '../components/validcheck';\r\nimport DescriptionList from '../components/descriptionlist';\r\nimport IngredientsList from '../components/ingredientslist';\r\nimport theme from '../theme';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction UploadPage(props) {\r\n\r\n  const [title, setTitle] = React.useState('');\r\n  const [files, setFiles] = React.useState([]);\r\n  const [image, setImage] = React.useState(undefined);\r\n  const [id, setId] = React.useState(undefined);\r\n  const [upload_wait, setUpload_wait] = React.useState(false);\r\n  const [done, setDone] = React.useState(false);\r\n  const [labelWidth, setLabelWidth] = React.useState(0);\r\n  const labelRef = React.useRef(null);\r\n  const [url, setUrl] = React.useState(\"temp\");\r\n\r\n  // remove these\r\n  const [valid, setValid] = React.useState({\r\n    title: false,\r\n    ingredients: false,\r\n    desc: false,\r\n    image: false\r\n  });\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const store = useSelector(state => state.fireReducer);\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n  const history = useHistory();\r\n\r\n  const imageDisp = img => {\r\n    dispatch({\r\n      type: \"SETIMAGE\",\r\n      image: img\r\n    })\r\n  }\r\n\r\n  const allValid = () => {\r\n\r\n    return (valid.title && valid.ingredients && valid.desc && valid.image)\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setLabelWidth(labelRef.current.offsetWidth);\r\n    // getImage();\r\n    if(upload_store.title != undefined)\r\n    {\r\n      setTitle(upload_store.title);\r\n      setValid({ ...valid, [\"title\"]: true });\r\n    }\r\n\r\n    if(upload_store.descriptions != undefined)\r\n    {\r\n      handleDescriptionsAdd(upload_store.descriptions.length);\r\n    }\r\n\r\n    if(upload_store.ingredients != undefined)\r\n    {\r\n      handleIngredientsAdd(upload_store.ingredients.length);\r\n    }\r\n\r\n  }, []);\r\n\r\n  /*\r\n  const getImage = () => {\r\n\r\n    let storageRef = firebase.storage();\r\n    storageRef.ref('recept/bananbröd.jpg').getDownloadURL().then(function(url) {\r\n\r\n      setUrl(\"temp 1\")\r\n      console.log(\"url: \" + url)\r\n\r\n    }).catch(function(error) {\r\n      // Handle any errors\r\n    });\r\n\r\n  } */\r\n\r\n  const handleChange = event => {\r\n\r\n    let value = event.target.value;\r\n    setTitle(value);\r\n    setValid({ ...valid, [\"title\"]: value.length > 2 ? true : false });\r\n\r\n    dispatch({\r\n      type: \"SETTITLE\",\r\n      title: value\r\n    })\r\n  };\r\n\r\n  const handleIngredientsAdd = length => {\r\n    console.log(\"handleIngredientsAdd\")\r\n    setValid({ ...valid, [\"ingredients\"]: length > 1 ? true : false });\r\n  };\r\n\r\n  const handleDescriptionsAdd = length => {\r\n    console.log(\"handleDescriptionsAdd\")\r\n    setValid({ ...valid, [\"desc\"]: length > 1 ? true : false });\r\n  };\r\n\r\n  const onFileAdd = (files) => {\r\n    setValid({ ...valid, [\"image\"]: true });\r\n    setFiles(files);\r\n\r\n    var reader = new FileReader();\r\n    reader.onload = function(e) {\r\n      setImage(e.target.result);\r\n      imageDisp(e.target.result);\r\n    }\r\n\r\n    reader.readAsDataURL(files[0]);\r\n    imageDisp();\r\n  };\r\n\r\n  const onFileRemove = () => {\r\n    setValid({ ...valid, [\"image\"]: false });\r\n    setFiles([]);\r\n    setImage(undefined);\r\n  };\r\n\r\n  // upload image and callback with download URL\r\n  const uploadImage = (callback) => {\r\n\r\n    setUpload_wait(true);\r\n    // Create a reference to the new image\r\n    let storageRef = firebase.storage();\r\n    let newImageRef = storageRef.ref('recept/' + title + '_image.jpg');\r\n\r\n    // Upload image as a Base64 formatted image string.\r\n    let uploadTask = newImageRef.putString(image, 'data_url');\r\n\r\n    uploadTask.on('state_changed', function(snapshot){\r\n    }, function(error) { // Handle unsuccessful uploads\r\n    }, function() { // Handle successful uploads on complete\r\n\r\n      uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\r\n        console.log('Successful upload. File available at', downloadURL);\r\n        callback(downloadURL);\r\n      });\r\n    });\r\n  }\r\n\r\n  const uploadAction = () => {\r\n    console.log(\"upload now\")\r\n\r\n    // make sure all valid\r\n    /*\r\n    if(!allValid())\r\n    {\r\n      console.log(\"some input is not valid\")\r\n      return;\r\n    } */\r\n\r\n    // make sure signed in\r\n    if(store.firestore_user == undefined) {\r\n      alert(\"you have to sign in first\")\r\n      return;\r\n    }\r\n\r\n    // console.log(\"editmode: \" + upload_store.editmode)\r\n\r\n    // prepare data\r\n    let username = store.firestore_user.username;\r\n    let recipe_name = upload_store.title;\r\n    const document = store.db.doc('recipes/' + recipe_name + '-' + username);\r\n\r\n    let r_img = \"temp_food1\";\r\n    let ref_to_user = store.db.collection('users').doc(store.firestore_user.email);\r\n\r\n    // if upload or create new doc\r\n    if(upload_store.editmode == false)\r\n    {\r\n      // when image is uploaded, continue with uploading the rest\r\n      uploadImage(function(returnValue_downloadURL) {\r\n        // use the return value here instead of like a regular (non-evented) return value\r\n        let downloadURL = returnValue_downloadURL;\r\n\r\n        // Enter new data into the document.\r\n        document.set({\r\n          user: username,\r\n          title: recipe_name,\r\n          img: r_img,\r\n          img_url: downloadURL,\r\n          ingredients: upload_store.ingredients,\r\n          description: upload_store.descriptions,\r\n          user_ref: ref_to_user\r\n        }).then((test) => {\r\n          // Document created successfully.\r\n          console.log( \"Document created/updated successfully.\")\r\n          setUpload_wait(false);\r\n          setDone(true);\r\n        });\r\n\r\n        // to be able to direct to recipe page\r\n        setId(document.id);\r\n\r\n      }); // end of image upload callback\r\n\r\n    } else {\r\n\r\n      // UPDATE MODE\r\n      let update_data = {\r\n        title: recipe_name,\r\n        ingredients: upload_store.ingredients,\r\n        description: upload_store.descriptions,\r\n      };\r\n\r\n      // either upload with or without image\r\n      if (image == undefined) {\r\n\r\n        store.db.collection('recipes').doc(upload_store.recipe_id).update(update_data);\r\n        setUpload_wait(false);\r\n        setDone(true);\r\n\r\n      } else {\r\n        uploadImage(function(returnValue_downloadURL) {\r\n          // use the return value here instead of like a regular (non-evented) return value\r\n          update_data.img_url = returnValue_downloadURL;\r\n          store.db.collection('recipes').doc(upload_store.recipe_id).update(update_data);\r\n\r\n          setUpload_wait(false);\r\n          setDone(true);\r\n\r\n        }); // end of image upload callback\r\n      }\r\n\r\n      // to be able to direct to recipe page\r\n      setId(upload_store.recipe_id);\r\n    }\r\n\r\n\r\n  };\r\n\r\n  // when done, there's an option to go to recipe page\r\n  const goToRecipe = () => {\r\n    history.push(\"/recipe/\" + title + \"/\" + id );\r\n  };\r\n\r\n  // whether uploading new recipe or editing an existing\r\n  let upload_done_text = (upload_store.editmode) ? \"Ändring\" : \"Uppladding\";\r\n  let upload_button_text = (upload_store.editmode) ? \"Ändra recept\" : \"Ladda upp\";\r\n  let bottom_content;\r\n\r\n  // if working on recipe\r\n  if(upload_wait == false && done == false)\r\n  {\r\n    bottom_content = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<CloudUploadIcon />}\r\n      onClick={uploadAction}\r\n    >\r\n      {upload_button_text}\r\n    </Button> );\r\n  }\r\n  else if ( upload_wait == true ) // if waiting on upload\r\n  {\r\n    bottom_content = (<div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#ffffff\" fadeIn=\"none\"/></div>);\r\n  } else // done with upload\r\n  {\r\n    bottom_content = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={goToRecipe}\r\n    >\r\n      {upload_done_text} klar! Visa recept\r\n    </Button> );\r\n  }\r\n\r\n  let page_title = (upload_store.editmode) ? \"Ändra recept\" : \"Ladda upp recept\";\r\n\r\n  let decs_valid = (valid.desc || (upload_store.descriptions && upload_store.descriptions.length > 1)) ? true : false;\r\n  let ingred_valid = (valid.ingredients || (upload_store.ingredients && upload_store.ingredients.length > 1)) ? true : false;\r\n  let title_valid = (title.length >= 3 );\r\n\r\n  //console.log(\"decs_valid \" + decs_valid)\r\n  //console.log(\"ingred_valid \" + ingred_valid)\r\n\r\n  return (\r\n\r\n\r\n    <div>\r\n      <h3>{page_title}</h3>\r\n\r\n      <form>\r\n\r\n      <Grid\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n        <ValidCheck checked={title_valid} xs={2}/>\r\n\r\n\r\n        <Grid item xs={9}>\r\n        <FormControl variant=\"outlined\">\r\n          <InputLabel ref={labelRef} htmlFor=\"component-outlined\"> Rubrik </InputLabel>\r\n          <OutlinedInput\r\n            value={title}\r\n            onChange={handleChange}\r\n            labelWidth={labelWidth}\r\n          />\r\n        </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n        <ExpansionPanel style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n            <FormControlLabel\r\n              aria-label=\"Acknowledge\"\r\n              control={<ValidCheck checked={ingred_valid} xs={2}/>}\r\n              label=\"Ingredienser\"\r\n              className={classes.formlabel}\r\n            />\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <IngredientsList handleAdd={handleIngredientsAdd}/>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n        <ExpansionPanel style={{background: '#f7f6f6'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n            <FormControlLabel\r\n              aria-label=\"Acknowledge\"\r\n              control={<ValidCheck checked={decs_valid} xs={2}/>}\r\n              label=\"Beskrivning\"\r\n              className={classes.formlabel}\r\n            />\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <DescriptionList handleAdd={handleDescriptionsAdd}/>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        </Grid>\r\n\r\n      </Grid>\r\n\r\n      <div className={classes.imagediv} >\r\n        <ValidCheck checked={valid.image} xs={2}/>\r\n        <Grid container spacing={1}>\r\n          <Grid item xs={9} style={{\r\n              display: 'flex',\r\n              marginBottom: '10px'\r\n          }}>\r\n          <FileInput value={files} onChange={onFileAdd} />\r\n          </Grid>\r\n\r\n        </Grid>\r\n        { image != undefined &&\r\n        <React.Fragment>\r\n          <Grid item xs={9}>\r\n            <img src={image} alt={\"loadedimage\"} className={classes.loadedimage} />\r\n          </Grid>\r\n          <Grid item xs={3}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={onFileRemove}\r\n              style={{lineHeight: '1.2'}}\r\n            >\r\n              Ta bort bild\r\n            </Button>\r\n          </Grid>\r\n        </React.Fragment>\r\n\r\n        }\r\n        </div>\r\n\r\n        <div className={classes.uploaddiv} >\r\n          <Grid container justify=\"center\" alignItems=\"center\">\r\n          <Grid item xs={4}>\r\n          {bottom_content}\r\n          </Grid>\r\n          </Grid>\r\n          </div>\r\n      </form>\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\n// className=\"whitebtn\"\r\n\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#f3f3f3'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n  }\r\n}));\r\n\r\nexport default UploadPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { blue } from '@material-ui/core/colors';\r\n\r\nconst emails = ['username@gmail.com', 'user02@gmail.com'];\r\nconst useStyles = makeStyles({\r\n  avatar: {\r\n    backgroundColor: blue[100],\r\n    color: blue[600],\r\n  },\r\n});\r\n\r\nfunction SimpleDialog(props) {\r\n  const classes = useStyles();\r\n  const { onClose, selectedValue, open } = props;\r\n\r\n  const handleClose = () => {\r\n    onClose(selectedValue);\r\n  };\r\n\r\n  const handleListItemClick = value => {\r\n    onClose(value);\r\n  };\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={open}>\r\n      <DialogTitle id=\"simple-dialog-title\">Set backup account</DialogTitle>\r\n      <List>\r\n        {emails.map(email => (\r\n          <ListItem button onClick={() => handleListItemClick(email)} key={email}>\r\n            <ListItemAvatar>\r\n              <Avatar className={classes.avatar}>\r\n                <PersonIcon />\r\n              </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText primary={email} />\r\n          </ListItem>\r\n        ))}\r\n\r\n        <ListItem autoFocus button onClick={() => handleListItemClick('addAccount')}>\r\n          <ListItemAvatar>\r\n            <Avatar>\r\n              <AddIcon />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary=\"Add account\" />\r\n        </ListItem>\r\n      </List>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nSimpleDialog.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  selectedValue: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default SimpleDialog;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams} from \"react-router\";\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from \"react-redux\";\r\n// import { recipeFetch } from '../actions/RecipeActions';\r\nimport SimpleDialog from '../components/simpledialog';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n// import Container from '@material-ui/core/container';\r\n\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n\r\n\r\nfunction RecipePage(props) {\r\n\r\n  const [ ifUser, setIfUser] = useState(false);\r\n  const [ recipe, setRecipe] = useState(undefined);\r\n  const [ saved, setSaved ] = useState({likes: false, doc_id: undefined});\r\n  const [ tried, setTried ] = useState(false);\r\n  const { recipetitle, id } = useParams();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    // someFetcher();\r\n\r\n    let ref = store.db.collection('recipes').doc(id);\r\n    // ref.on('value', function(snap) { console.log(snap.val()); })\r\n    recipeFetcher(ref);\r\n    // likeFetcher();\r\n\r\n\r\n  }, []);\r\n\r\n  // know if recipe belongs to this user\r\n  useEffect(() => {\r\n    // exit funtion if undefined\r\n    if(!store.firestore_user || !recipe || !recipe.user_doc.username )\r\n      return;\r\n\r\n    if(recipe.user_doc.username == store.firestore_user.username) {\r\n      console.log(\"same as logged in: \" + recipe.user_doc.username)\r\n      setIfUser(true);\r\n    } else {\r\n      console.log(\"NOT same as logged in: \" + recipe.user_doc.username)\r\n    }\r\n\r\n    console.log(store.firestore_user.email)\r\n    //let queryRef = store.db.collection('likes').where('email', '==', store.firestore_user.email);\r\n    //likeFetcher(queryRef);\r\n    likeFetcher(store.firestore_user.email);\r\n\r\n  }, [store.firestore_user, recipe]);\r\n\r\n  const likeFetcher = (current_email) => {\r\n\r\n    let likesRef = store.db.collection('recipe_likes').doc(current_email);\r\n    likesRef.get().then(function(doc) {\r\n\r\n      let data = doc.data();\r\n      let isliked = ( data.liked_recipes[recipe.id] !== undefined ) ? data.liked_recipes[recipe.id] : false;\r\n\r\n      if (isliked)\r\n        setSaved({likes: true, doc_id: doc.id});\r\n\r\n    })\r\n    .catch(err => {\r\n      console.log('Error getting documents', err);\r\n    });\r\n\r\n  }\r\n\r\n  const likeRecipe = () => {\r\n\r\n    if(!store.firestore_user) {\r\n      console.log(\"eh slow down, user not loaded yet\")\r\n      return;\r\n    }\r\n\r\n    console.log(\"likeRecipe\")\r\n\r\n    let likesRef = store.db.collection('recipe_likes').doc(store.firestore_user.email);\r\n\r\n    likesRef.get().then(function(doc) {\r\n      let data = doc.data();\r\n\r\n      data.liked_recipes[recipe.id] = (saved.likes) ? false : true;\r\n\r\n      store.db.collection(\"recipe_likes\").doc(doc.id).update(data);\r\n    });\r\n\r\n    //setSaved( !saved );\r\n    setSaved({likes: !saved.likes, doc_id: !saved.doc_id});\r\n\r\n  };\r\n\r\n  const tryRecipe = () => {\r\n    setTried( !tried );\r\n  };\r\n\r\n  const editRecipe = () => {\r\n\r\n    console.log(\"edit recipe\")\r\n\r\n    dispatch({\r\n      type: \"SETDESCRIPTIONS\",\r\n      descriptions: recipe.description\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETINGREDIENTS\",\r\n      ingredients: recipe.ingredients\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETTITLE\",\r\n      title: recipe.title\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETEDITMODE\",\r\n      editmode: true,\r\n      recipe_id: id\r\n    })\r\n\r\n    history.push(\"/upload\" );\r\n  }\r\n\r\n  const removeRecipe = () => {\r\n\r\n    store.db.collection('recipes').doc(id).delete();\r\n    console.log(\"recipe deleted\");\r\n    history.push(\"/home\");\r\n\r\n  }\r\n\r\n  const handleUserClick = () => {\r\n    history.push(\"/profile/\" + recipe.user_doc.username );\r\n  };\r\n\r\n  const recipeFetcher = (ref) => {\r\n    ref.get().then(function(doc) {\r\n        if (doc.exists) {\r\n            let data = doc.data()\r\n            data.id = doc.id;\r\n            // console.log(\"Document data:\", data);\r\n            if(data.user_ref) {\r\n              // get user info\r\n              data.user_ref.get().then(function(user_doc) {\r\n                let user_data = user_doc.data()\r\n                data.user_doc = user_data; // append to recipe data\r\n                // console.log(\"Document USER data:\", user_data);\r\n                setRecipe(data);\r\n              });\r\n            } else {\r\n              setRecipe(data);\r\n            }\r\n\r\n        } else {\r\n            // doc.data() will be undefined in this case\r\n            console.log(\"No such document!\");\r\n        }\r\n    }).catch(function(error) {\r\n        console.log(\"Error getting document:\", error);\r\n    });\r\n\r\n  }\r\n\r\n  let icon = (saved.likes === true) ? <FavoriteIcon/> : <FavoriteBorderIcon/>;\r\n  let r_img = ( recipe !== undefined) ? recipe.img : 'temp_food1';\r\n  let triedbyNum = 3;\r\n  // , zIndex: '-1'\r\n\r\n  /*\r\n\r\n  <h2 style={{display: 'inline'}}>\r\n    <Button disableTouchRipple onClick={likeRecipe}\r\n    style={{display: 'inline', backgroundColor: 'transparent'}}>\r\n      {icon}\r\n    </Button>\r\n    { recipetitle + ' | ' }\r\n\r\n  </h2>\r\n  <h2 onClick={ handleUserClick} style={{display: 'inline'}}>\r\n    { recipe.user }\r\n  </h2>\r\n\r\n  */\r\n\r\n  let img_src;\r\n\r\n  if  ( recipe !== undefined && recipe.img_url !== undefined) {\r\n    img_src = recipe.img_url;\r\n  } else {\r\n    img_src = require('../assets/'+ r_img + '.jpg');\r\n  }\r\n\r\n  // console.log(img_src)\r\n  // <SimpleDialogDemo/>\r\n\r\n  return (\r\n\r\n    <div>\r\n\r\n      { recipe !== undefined &&\r\n        <div>\r\n\r\n          <div className={classes.recipeheader}>\r\n          <span>\r\n            <Button disableTouchRipple onClick={likeRecipe}\r\n            style={{display: 'inline', backgroundColor: 'transparent'}}>\r\n              {icon}\r\n            </Button>\r\n            { recipetitle + ' | ' }\r\n\r\n          </span>\r\n          <span>\r\n\r\n            <Button disableTouchRipple onClick={handleUserClick}\r\n            style={{display: 'inline', backgroundColor: 'transparent', textTransform: 'none'}}>\r\n              { recipe.user_doc.username }\r\n            </Button>\r\n          </span>\r\n          </div>\r\n\r\n        <Grid\r\n          container\r\n          spacing={1}\r\n          justify=\"center\"\r\n\r\n        >\r\n          <Grid item xs={6} >\r\n            <img src={img_src} className={classes.listimage} alt={\"recipe img\"} />\r\n          </Grid>\r\n          <Grid item xs={4} className={classes.imagesidebar}>\r\n            { tried === true &&\r\n            <div className={classes.triedby} >\r\n              <span className={classes.triedbyText}> Testat av </span>\r\n              <span className={classes.triedbyNum}> {triedbyNum} </span>\r\n              <span className={classes.triedbyText}> { triedbyNum > 1 ? \"kockar\" : \"kock\" }! </span>\r\n            </div>\r\n            }\r\n            { tried === false &&\r\n            <div className={classes.triedby} onClick={tryRecipe}>\r\n              <span className={classes.triedbyText}>\r\n                Bli den första att testa detta recept!\r\n              </span>\r\n            </div>\r\n            }\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <IngredientsList ingredients={recipe.ingredients}/>\r\n        <RecipeDecsList description={recipe.description}/>\r\n\r\n        {ifUser &&\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<EditIcon />}\r\n            onClick={editRecipe}\r\n          >\r\n            Ändra recept\r\n          </Button>\r\n        }\r\n\r\n        &nbsp; &nbsp; &nbsp;\r\n\r\n        {ifUser &&\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<EditIcon />}\r\n            onClick={removeRecipe}\r\n          >\r\n            Ta bort recept\r\n          </Button>\r\n        }\r\n\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n\r\n  ); // style={{display: 'inline', backgroundColor: 'transparent', textTransform: 'none'}}\r\n\r\n}\r\n\r\n\r\n\r\nfunction IngredientsList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n/*\r\n  let ingredients = [\r\n  \"2 dl mjöl\", \"1 tsk salt\", \"4 dl mjölk\", \"2 ägg\"\r\n]; */\r\n\r\n\r\n  let temp_ingredients = [\r\n  {name: 'mjöl (default data)', quantity: \"2\", measure: \"dl\"},\r\n  {name: 'salt', quantity: \"1\", measure: \"tsk\"},\r\n  {name: 'mjölk', quantity: \"4\", measure: \"dl\"},\r\n  {name: 'ägg', quantity: \"2\", measure: \"\"}\r\n];\r\n\r\n  let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n\r\n  let ingredientsjsx = ingredients.map((ingred, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem>\r\n      <ListItemText\r\n        primary={ ingred.quantity + \" \" + ingred.measure + \" \" + ingred.name }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < ingredients.length - 1 && <Divider component=\"li\" /> }\r\n  </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h3> Ingredienser </h3>\r\n      <List dense={true} className={classes.ingredientslist}>\r\n        {ingredientsjsx}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RecipeDecsList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  let temp_description = [\r\n  {order: 0, text: \"Knäck äggen i en bunke (default data)\"},\r\n  {order: 2, text: \"Stek i pannan meed smör eller kokosolja\"},\r\n  {order: 1, text: \"Vispa i mjöl, mjölk och salt\"}\r\n  ];\r\n\r\n  let description = (props.description != undefined) ? props.description : temp_description;\r\n\r\n  // sort by order\r\n  description.sort( (desc1, desc2) => desc1.order - desc2.order );\r\n\r\n  let descjsx = description.map((desc, idx) =>\r\n    <RecipeDecsListItem idx={idx} key={idx} desc={desc.text} len={description.length}/>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h3> Gör så här </h3>\r\n      <List dense={true} className={classes.ingredientslist}>\r\n        {descjsx}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RecipeDecsListItem(props) {\r\n\r\n  const [checked, setChecked] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  let idx = props.idx;\r\n\r\n  const onIngredClick = (idx) => {\r\n    setChecked(!checked);\r\n  }\r\n\r\n  let icon = (checked === true ) ? <CheckBoxIcon className={classes.checkIcon}/> : <CheckBoxOutlineBlankIcon className={classes.checkIcon}/> ;\r\n  // console.log(props.desc)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListItem\r\n        onClick={() => onIngredClick(idx)}\r\n      >\r\n        {icon}\r\n        <ListItemText primary={ props.desc }/>\r\n      </ListItem>\r\n      { idx < props.len - 1 && <Divider component=\"li\" /> }\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  listimage: {\r\n    maxHeight: '100%',\r\n    maxWidth: '100%',\r\n    borderRadius: '4px',\r\n    objectFit: 'cover',\r\n    minHeight: '150px',\r\n    maxWidth: '150px'\r\n  },\r\n  imagesidebar: {\r\n    padding: 5\r\n  },\r\n  triedby: {\r\n    background: '#f1f1f1',\r\n    borderRadius: '4px',\r\n    padding: 5,\r\n    textAlign: 'center'\r\n  },\r\n  triedbyText: {\r\n    margin: '0',\r\n  },\r\n  triedbyNum: {\r\n    fontWeight: 'bold',\r\n    display: 'block',\r\n    fontSize: '2em'\r\n  },\r\n  ingredientslist: {\r\n   marginTop: '20px',\r\n },\r\n checkIcon: {\r\n   marginRight: '10px',\r\n   color: '#68bb8c'\r\n },\r\n recipeheader: {\r\n   margin: '20px 0px',\r\n   fontWeight: 'bold'\r\n }\r\n});\r\n\r\nexport default RecipePage;\r\n","import React, {useState} from 'react';\r\n\r\n// import { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\nfunction Login(props) {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  //const [signedInStatus, setSignedInStatus] = useState(\"Ej inloggad\");\r\n\r\n  const classes = useStyles();\r\n\r\n  /**\r\n   * Handles the sign in button press.\r\n   */\r\n  function toggleSignIn() {\r\n\r\n    console.log(\"toggleSignIn\")\r\n\r\n    // sign out if signed in\r\n    if (firebase.auth().currentUser) {\r\n      firebase.auth().signOut();\r\n    } else {\r\n\r\n      if (email.length < 4) {\r\n        alert('Ogiltig mailadress, måste innehålla mer än 4 tecken.');\r\n        return;\r\n      }\r\n      if (password.length < 4) {\r\n        alert('Ogiltigt lösenord, måste innehålla mer än 4 tecken.');\r\n        return;\r\n      }\r\n      // Sign in with email and pass.\r\n      firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n\r\n        if (errorCode === 'auth/wrong-password') {\r\n          alert('fel lösenord.');\r\n        } else {\r\n          alert(errorMessage);\r\n        }\r\n        console.log(error);\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Handles the sign up button press.\r\n   */\r\n  function handleSignUp() {\r\n\r\n    console.log(\"handleSignUp\")\r\n\r\n    if (email.length < 4) {\r\n      alert('Ogiltig mailadress, måste innehålla mer än 4 tecken');\r\n      return;\r\n    }\r\n    if (password.length < 4) {\r\n      alert('Ogiltigt lösenord, måste innehålla mer än 4 tecken');\r\n      return;\r\n    }\r\n    // Sign in with email and pass.\r\n    firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {\r\n      // Handle Errors here.\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n\r\n      if (errorCode === 'auth/weak-password') {\r\n        alert('Lösenordet är för svagt.');\r\n      } else {\r\n        alert(errorMessage);\r\n      }\r\n      console.log(error);\r\n    });\r\n    console.log(\"signed up \" + email);\r\n  }\r\n\r\n  function sendEmailVerification() {\r\n      firebase.auth().currentUser.sendEmailVerification().then(function() {\r\n        // Email Verification sent!\r\n        alert('Email Verification Sent!');\r\n      });\r\n  }\r\n\r\n  function resetPassword() {\r\n\r\n      firebase.auth().sendPasswordResetEmail(email).then(function() {\r\n        alert(\"sent password reset to email: \" + email);\r\n      }).catch(function(error) {\r\n        // An error happened.\r\n        console.log(\"could not send reset email\")\r\n      });\r\n  }\r\n\r\n  let signText = (firebase.auth().currentUser) ? \"Logga ut\" : \"Logga in\";\r\n  let btn_color = (firebase.auth().currentUser) ? \"secondary\" : \"primary\";\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n    <p>Ange email and lösenord för att logga in eller skapa ett konto</p>\r\n\r\n         <input type=\"text\" name=\"email\" placeholder=\"Email\" onChange={evt => setEmail(evt.target.value)}/>\r\n\r\n         &nbsp;&nbsp;&nbsp;\r\n         <input type=\"password\" name=\"password\" placeholder=\"Password\" onChange={evt => setPassword(evt.target.value)}/>\r\n\r\n         <br/><br/>\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color={btn_color}\r\n           onClick={toggleSignIn}\r\n         >\r\n           {signText}\r\n         </Button>\r\n\r\n         &nbsp;&nbsp;&nbsp;\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color=\"primary\"\r\n           onClick={handleSignUp}\r\n         >\r\n           Skapa konto\r\n         </Button>\r\n\r\n         <br/><br/>\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color=\"secondary\"\r\n           onClick={resetPassword}\r\n         >\r\n           Återställ lösenord\r\n         </Button>\r\n\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  login_div: {\r\n    background: '#f5f5f5',\r\n    padding: '1em',\r\n    margin: '0.5em',\r\n    borderRadius: '15px'\r\n }\r\n});\r\n\r\n// <span id=\"quickstart-sign-in-status\"> &nbsp; {signedInStatus} </span>\r\n// <button onClick={sendEmailVerification} name=\"verify\">Verifiera konto</button>\r\n\r\n/*\r\n\r\n<!--\r\n<button id=\"quickstart-verify-email\" onClick={handleChange} name=\"verify-email\">Send Email Verification</button>\r\n&nbsp;&nbsp;&nbsp;\r\n<button id=\"quickstart-password-reset\" onClick={handleChange} name=\"verify-email\">Send Password Reset Email</button> --> */\r\n\r\nexport default Login;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\n// import { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useHistory } from \"react-router-dom\";\r\n//import firebase from 'firebase'; // 'firebase/app';\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\n\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\n\r\n\r\nfunction Settings(props) {\r\n\r\n  const [username_textfield, setUsername_textfield] = useState(\"\");\r\n  const [has_changed, setHas_changed] = useState(false);\r\n  const [labelWidth, setLabelWidth] = useState(0);\r\n  const [in_editmode, setIn_editmode] = useState(false);\r\n  const [isAvailable, setIsAvailable] = useState(true);\r\n  const labelRef = React.useRef(null);\r\n  const [openSetting, setOpenSetting] = useState(\"\");\r\n\r\n  const [imageUrl, setImageUrl] = useState(undefined);\r\n  const [imageUrlList, setImageUrlList] = useState([]);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    setLabelWidth(labelRef.current.offsetWidth);\r\n\r\n    const storageRef = firebase.storage().ref().child('profileimages');\r\n    const available_images = [];\r\n\r\n    // Find all the prefixes and items.\r\n    storageRef.listAll().then(function(res) {\r\n      res.items.forEach(function(itemRef) {\r\n        itemRef.getDownloadURL().then((url) => { available_images.push(url); });\r\n      });\r\n      setImageUrlList(available_images);\r\n\r\n    }).catch(function(error) {\r\n      console.log(\"could not get storage list\")\r\n    });\r\n\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if(store.firestore_user && (username_textfield !== store.firestore_user.username || imageUrl !== store.firestore_user.profile_img_url)) {\r\n      setHas_changed(true)\r\n    }\r\n  }, [username_textfield, imageUrl]);\r\n\r\n  // when information about user signed in arrives, set textfield value\r\n  React.useEffect(() => {\r\n    if(store.firestore_user) {\r\n      setUsername_textfield(store.firestore_user.username)\r\n      if (store.firestore_user.profile_img_url !== undefined)\r\n        setImageUrl(store.firestore_user.profile_img_url);\r\n    }\r\n  }, [store.firestore_user]);\r\n\r\n\r\n  // exit edit mode\r\n  function cancel_edit() {\r\n\r\n    setIn_editmode(false);\r\n    if(has_changed) {\r\n      setUsername_textfield(store.firestore_user.username);\r\n      setImageUrl(store.firestore_user.profile_img_url);\r\n    }\r\n  }\r\n\r\n  function signOut() {\r\n\r\n    console.log(\"sign out\")\r\n\r\n    // sign out if signed in\r\n    if (firebase.auth().currentUser) {\r\n      firebase.auth().signOut();\r\n      history.push(\"/login\");\r\n    }\r\n  }\r\n\r\n  const editUsername = (new_value) => {\r\n    setUsername_textfield(new_value);\r\n    setIsAvailable(true);\r\n  }\r\n\r\n  var toChangePromise = function(current_username) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let listsRef = store.db.collection('recipes');\r\n      let list_ids = [];\r\n\r\n      let query = listsRef.where('user', '==', current_username).get()\r\n        .then(snapshot => {\r\n\r\n          snapshot.forEach(doc => {\r\n            list_ids.push(doc.id);\r\n          });\r\n          resolve(list_ids)\r\n        })\r\n    });\r\n  }\r\n\r\n  var isAvailableCheck = function() {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      // check if available\r\n      let is_available = true;\r\n      let query = store.db.collection('users').where('username', '==', username_textfield).get()\r\n        .then(snapshot => {\r\n          snapshot.forEach(doc => {\r\n            is_available = false;\r\n          });\r\n          resolve(is_available)\r\n        })\r\n    });\r\n  }\r\n\r\n  // update in Firebase\r\n  function save_username() {\r\n\r\n    console.log(\"set username to \" + username_textfield)\r\n\r\n    isAvailableCheck().then((is_available) => {\r\n\r\n      if(is_available === false)\r\n      {\r\n        console.log(\"is_available: \" + is_available)\r\n        setIsAvailable(false);\r\n        return;\r\n      }\r\n\r\n      // Set the 'username' field of the user\r\n      store.db.collection('users').doc(store.firestore_user.email).update({username: username_textfield});\r\n      setIn_editmode(false);\r\n\r\n      // update other docs (recipe docs) with this username\r\n      toChangePromise(store.firestore_user.username).then((loadedIds) => {\r\n        console.log(\"Yay!! loaded \" + loadedIds)\r\n        loadedIds.map( _id => {\r\n          store.db.collection('recipes').doc(_id).update({user: username_textfield});\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  // update in Firebase\r\n  function save_img() {\r\n\r\n    //console.log(\"set img url to: \" + imageUrl)\r\n\r\n    // Set the 'username' field of the user\r\n    store.db.collection('users').doc(store.firestore_user.email).update({profile_img_url: imageUrl});\r\n  }\r\n\r\n  function newName() {\r\n\r\n    let preNames = [\"Master\", \"Lill\", \"Pro\"];\r\n    let postNames = [\"Chef\", \"Sleven\", \"Pasta\", \"Vego\"];\r\n\r\n    let rand1 = Math.floor(Math.random() * preNames.length);\r\n    let rand2 = Math.floor(Math.random() * postNames.length);\r\n\r\n    let pre_n = preNames[rand1];\r\n    let post_n = postNames[rand2];\r\n\r\n    // props\r\n    return pre_n + post_n;\r\n  }\r\n\r\n  const randomName = () => {\r\n    let temp_username = newName();\r\n    setUsername_textfield(temp_username);\r\n  }\r\n\r\n  const randomImg = () => {\r\n\r\n    let continue_search = true;\r\n    let img_index, temp_url;\r\n    do {\r\n\r\n      img_index = Math.floor(Math.random() * imageUrlList.length);\r\n      temp_url = imageUrlList[img_index];\r\n\r\n      if(temp_url !== imageUrl) {\r\n        continue_search = false;\r\n        setImageUrl(temp_url);\r\n      }\r\n\r\n    } while(continue_search);\r\n  }\r\n\r\n  const onExpand = (e, expanded, id) => {\r\n    let openval = expanded ? id : \"\";\r\n    setOpenSetting(openval);\r\n    cancel_edit();\r\n  }\r\n\r\n  //console.log(\"openSetting: \" + openSetting)\r\n  //let signText = (firebase.auth().currentUser) ? \"Logga ut\" : \"Logga in\";\r\n\r\n  // let username = (store.firestore_user) ? store.firestore_user.username : \"unset\";\r\n\r\n  // fix if undefined\r\n  let img_src = imageUrl; // (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : undefined;\r\n\r\n  return (\r\n\r\n    <div>\r\n      <div className={classes.login_div}>\r\n        <h3>Inställningar</h3>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"username\")}\r\n          expanded={openSetting === \"username\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Användarnamn</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails style={{display: 'inline-block'}}>\r\n\r\n            <FormControl variant=\"outlined\">\r\n              <InputLabel ref={labelRef} htmlFor=\"component-outlined\"> Användarnamn </InputLabel>\r\n              <OutlinedInput\r\n                value={username_textfield}\r\n                onChange={(e) => editUsername(e.target.value)}\r\n                labelWidth={labelWidth}\r\n                disabled={!in_editmode}\r\n              />\r\n            </FormControl>\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra användarnamn\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => randomName()}\r\n                className={`${classes.buttons} ${classes.rainbow}`}\r\n              >\r\n                Slumpa 🤪\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_username()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara nytt användarnamn\r\n              </Button>\r\n              { !isAvailable &&\r\n              <Typography className={classes.available_text} >Namnet är upptaget</Typography>\r\n              }\r\n            </React.Fragment>\r\n            }\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"profileimage\")}\r\n          expanded={openSetting === \"profileimage\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Profilbild</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails style={{display: 'flex', flexWrap: 'wrap'}}>\r\n\r\n            { img_src &&\r\n            <div className={classes.fullrow}>\r\n              <img src={img_src} className={classes.profileimage}  alt={\"profile img\"} />\r\n            </div>\r\n            }\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra bild\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => randomImg()}\r\n                className={`${classes.buttons} ${classes.rainbow}`}\r\n              >\r\n                Slumpa 🤪\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_img()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara ny profilbild\r\n              </Button>\r\n            </React.Fragment>\r\n            }\r\n\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n      </div>\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"secondary\"\r\n        onClick={() => signOut()}\r\n        className={classes.center_btn}\r\n      >\r\n        Logga ut\r\n      </Button>\r\n\r\n    </div>\r\n  );\r\n}\r\n// className={classes.formlabel}\r\n// style={{display: 'flex', flexWrap: 'wrap'}\r\n\r\nconst useStyles = makeStyles({\r\n  login_div: {\r\n    background: '#f5f5f5',\r\n    padding: '1em',\r\n    margin: '0.5em',\r\n    borderRadius: '15px'\r\n },\r\n buttons: {\r\n   margin: '5px'\r\n },\r\n rainbow: {\r\n   backgroundImage: 'linear-gradient(to bottom right, #ff49e0 , #26ffa7)',\r\n   fontWeight: 'bold'\r\n },\r\n center_btn: {\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    marginTop: '20px',\r\n    display: 'flex'\r\n },\r\n available_text: {\r\n    fontSize: '13px',\r\n    color: '#f50057',\r\n    margin: '8px'\r\n},\r\nprofileimage: {\r\n  marginLeft: 'auto',\r\n  marginRight: 'auto',\r\n  marginBottom: '15px'\r\n},\r\nfullrow: {\r\n  flex: '0 0 100%',\r\n  display: 'flex'\r\n}\r\n});\r\n\r\nexport default Settings;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport RecipeGridList from '../components/recipegrid';\r\nimport FollowerList from '../components/followerlist';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction SearchPage(props) {\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const [recipes, setRecipes] = useState(undefined);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  const history = useHistory();\r\n\r\n  let searchstring = \"\";\r\n\r\n  useEffect(() => {\r\n    userFetcher('users');\r\n    userFetcher('recipes');\r\n  }, []);\r\n\r\n  const userFetcher = (collection_name) => {\r\n\r\n    store.db.collection(collection_name).onSnapshot(function(querySnapshot) {\r\n\r\n          let temp_users = [];\r\n          querySnapshot.forEach( doc => {\r\n            //let data = doc.data();\r\n            let data = doc.data();\r\n            data.id = doc.id;\r\n            temp_users.push(data);\r\n          });\r\n\r\n          if (collection_name === 'users')\r\n            setUsers(temp_users);\r\n          if (collection_name === 'recipes')\r\n            setRecipes(temp_users);\r\n      });\r\n  }\r\n\r\n  let followingInfo = users.map( user => {\r\n    let obj = {username: user.username, fullname: \"\", profile_img_url: user.profile_img_url, follows: false};\r\n    return obj;\r\n  });\r\n\r\n  /*\r\n  {\r\n    recipes.map( (recipe, idx) =>\r\n      <RecipeItem recipe={recipe} key={idx}/>\r\n    )\r\n  }\r\n\r\n  <Button\r\n    variant=\"contained\"\r\n    color=\"primary\"\r\n    onClick={() => history.push('/lists')}\r\n  >\r\n    Till ListPage\r\n  </Button>\r\n\r\n  */\r\n\r\n  // Sök specifikt recept eller användare ovan\r\n\r\n  return (\r\n\r\n    <div>\r\n      <h3>Sökresultat</h3>\r\n\r\n\r\n\r\n      { searchstring === \"\" && <p> Sökfunktionen kommer snart! Tills dess visas alla användare och recept nedan </p> }\r\n\r\n      { users.length <= 0 && <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div> }\r\n      { users.length > 0 && <React.Fragment>\r\n      <b> Alla användare: </b>\r\n      <div>\r\n      <FollowerList followerData={followingInfo}/>\r\n      </div>\r\n      <b> Alla recept: </b>\r\n      <div style={{paddingTop: '15px'}}>\r\n      { recipes != undefined && <RecipeGridList recipes={recipes}/> }\r\n\r\n      </div>\r\n      </React.Fragment> }\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\nexport default SearchPage;\r\n","import React from 'react';\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\n\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport LinkUI from '@material-ui/core/Link';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nfunction ProfileBtn (props) {\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  let btn = (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => history.push(\"/login\")}\r\n        className={classes.buttonPad}\r\n      >\r\n        logga in\r\n      </Button>\r\n    </div> );\r\n\r\n  // make sure info is loaded\r\n  let img_src = (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : undefined;\r\n\r\n  // if user has no profile image set in firebase\r\n  /*\r\n  if (img_src === undefined) {\r\n    img_src = <AccountCircleIcon/>;\r\n  } */\r\n\r\n  let icon_content = (img_src !== undefined) ? <img src={img_src} className={classes.smallprofileimage} alt={\"profile img\"} /> : <AccountCircleIcon/>;\r\n\r\n  let jsx_content = props.signedIn ? icon_content : btn;\r\n\r\n  if(props.signedIn === true && store.firestore_user)\r\n  {\r\n    return (\r\n      <IconButton\r\n        edge=\"start\"\r\n        className={classes.menuButton}\r\n        color=\"inherit\"\r\n        aria-label=\"open profile\"\r\n        onClick={() => history.push(\"/profile/\" + store.firestore_user.username)}\r\n      >\r\n      {jsx_content} </IconButton>\r\n\r\n    );\r\n  } else {\r\n    return btn;\r\n  }\r\n\r\n}\r\n\r\nfunction TopMenuBar(props) {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const isMenuOpen = Boolean(anchorEl);\r\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n\r\n\r\n  const handleProfileMenuOpen = event => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMobileMenuClose = () => {\r\n    setMobileMoreAnchorEl(null);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n    handleMobileMenuClose();\r\n  };\r\n\r\n  const handleMobileMenuOpen = event => {\r\n    setMobileMoreAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleSearchFocus = () => {\r\n    if(history.location.pathname !== \"/search\")\r\n      history.push(\"/search\")\r\n  };\r\n\r\n  const menuId = 'primary-search-account-menu';\r\n  const renderMenu = (\r\n    <Menu\r\n      anchorEl={anchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMenuOpen}\r\n      onClose={handleMenuClose}\r\n    >\r\n      <MenuItem onClick={handleMenuClose}>Profile</MenuItem>\r\n      <MenuItem onClick={handleMenuClose}>My account</MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  const mobileMenuId = 'primary-search-account-menu-mobile';\r\n  const renderMobileMenu = (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMobileMenuOpen}\r\n      onClose={handleMobileMenuClose}\r\n    >\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\r\n          <Badge badgeContent={4} color=\"secondary\">\r\n            <MailIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Messages</p>\r\n      </MenuItem>\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 11 new notifications\" color=\"inherit\">\r\n          <Badge badgeContent={11} color=\"secondary\">\r\n            <NotificationsIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Notifications</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleProfileMenuOpen}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n        <p>Profile</p>\r\n      </MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton\r\n            edge=\"start\"\r\n            className={classes.menuButton}\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={ () => history.goBack() }\r\n          >\r\n            <ArrowBackIosIcon />\r\n          </IconButton>\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n\r\n            <LinkUI component={Link} to=\"/home\" style={{ textDecoration: 'none', color: 'white' }}>\r\n              Campuskost\r\n            </LinkUI>\r\n          </Typography>\r\n          <div className={classes.search}>\r\n            <div className={classes.searchIcon}>\r\n              <SearchIcon />\r\n            </div>\r\n            <InputBase\r\n              placeholder=\"Search…\"\r\n              classes={{\r\n                root: classes.inputRoot,\r\n                input: classes.inputInput,\r\n              }}\r\n              inputProps={{ 'aria-label': 'search' }}\r\n              onBlur={() => console.log(\"onBlur\")}\r\n              onFocus={() => handleSearchFocus()}\r\n            />\r\n          </div>\r\n          <div className={classes.grow} />\r\n          <div className={classes.sectionDesktop}>\r\n          <ProfileBtn signedIn={props.signedIn} handleChange={props.handleChange}/>\r\n          </div>\r\n\r\n          <div className={classes.sectionMobile}>\r\n          <ProfileBtn signedIn={props.signedIn} handleChange={props.handleChange}/>\r\n          </div>\r\n\r\n        </Toolbar>\r\n      </AppBar>\r\n      {renderMobileMenu}\r\n      {renderMenu}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n    marginBottom: '50px'\r\n  },\r\n  menuButton: {\r\n    marginRight: 0, // theme.spacing(2),\r\n  },\r\n  title: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing(3),\r\n      width: 'auto',\r\n    },\r\n  },\r\n  searchIcon: {\r\n    width: theme.spacing(7),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 7),\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    [theme.breakpoints.up('md')]: {\r\n      width: 200,\r\n    },\r\n  },\r\n  sectionDesktop: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'flex',\r\n    },\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  whiteColor: {\r\n    color: 'white'\r\n  },\r\n  buttonPad: {\r\n    padding: '6px',\r\n    fontSize: 'small'\r\n  },\r\n  smallprofileimage: {\r\n    width: '40px'\r\n  }\r\n}));\r\n\r\nexport default TopMenuBar;\r\n","import React, {useState, useEffect} from 'react';\nimport { BrowserRouter as BrowserRouter, Router, Route, Link, Switch, Redirect } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n// import { useHistory } from \"react-router-dom\";\n// import { incrementdispatch } from './actions/RecipeActions';\nimport * as serviceWorker from './serviceWorker';\n\nimport MySnackbar from './components/snackbar';\n// import our css\nimport './App.css';\nimport './style/GlobalCssButton.css';\n\n// import our page components\nimport FeedPage from './pages/feedpage';\nimport ProfilePage from './pages/profilepage';\nimport NoticePage from './pages/noticepage';\nimport FavoritePage from './pages/favoritepage';\nimport UploadPage from './pages/uploadpage';\nimport RecipePage from './pages/recipepage';\nimport Login from './pages/login';\nimport Settings from './pages/settings';\nimport SearchPage from './pages/searchpage';\nimport TopMenuBar from './components/topmenubar';\nimport ListPage from './pages/listpage';\n\n// import material UI components\nimport Icon from '@material-ui/core/Icon';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport Badge from '@material-ui/core/Badge';\nimport PublishIcon from '@material-ui/icons/PublishRounded';\nimport NotificationsActiveRoundedIcon from '@material-ui/icons/NotificationsActiveRounded';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport LoyaltyRoundedIcon from '@material-ui/icons/LoyaltyRounded';\nimport HomeRoundedIcon from '@material-ui/icons/HomeRounded';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\n\nrequire('dotenv').config(); // check if we need this\n\nconst API_KEY = process.env.REACT_APP_FIREBASE_API_KEY;\n\n// for PWA - needed?\nlet deferredPrompt;\nwindow.addEventListener('beforeinstallprompt', (e) => {\n  // Stash the event so it can be triggered later.\n  deferredPrompt = e;\n  deferredPrompt.prompt();\n\n  // Update UI notify the user they can add to home screen\n  deferredPrompt.userChoice\n    .then((choiceResult) => {\n      if (choiceResult.outcome === 'accepted') {\n        console.log('User accepted the A2HS prompt');\n      } else {\n        console.log('User dismissed the A2HS prompt');\n      }\n      deferredPrompt = null;\n  });\n\n});\n\n// initiate Firebase\nlet db = undefined;\nfunction initFirebase() {\n\n  console.log(\"run initFirebase\")\n\n  const firebaseConfig = {\n    apiKey: API_KEY, // \"AIzaSyAq0vTBf0o5MckjHcCOJiJ_DRK8v_UZY88\",\n    authDomain: \"campuskost-firebase.firebaseapp.com\",\n    databaseURL: \"https://campuskost-firebase.firebaseio.com\",\n    projectId: \"campuskost-firebase\",\n    storageBucket: \"campuskost-firebase.appspot.com\",\n    messagingSenderId: \"477692438735\",\n    appId: \"1:477692438735:web:2e6dce163d7f7ce8baafba\",\n    measurementId: \"G-MDB52ZHJER\"\n  };\n\n  firebase.initializeApp(firebaseConfig);\n  const db = firebase.firestore();\n  //const storage = firebase.storage();\n  let storage = 1;\n\n  return [db, storage];\n}\n\n// main component of the app\nfunction App(props) {\n\n  const [value, setValue] = React.useState('default');\n  const [redirect, setRedirect] = React.useState(false);\n  const [openUpdateDialog, setOpenUpdateDialog] = React.useState(false);\n\n  const classes = useStyles();\n  const dispatch = useDispatch(); // be able to dispatch\n  const state_user = useSelector(state => state.userReducer); // subscribe to the redux store\n  const store = useSelector(state => state.fireReducer); // subscribe to the redux store\n\n  useEffect(() => {\n\n    // console.log(serviceWorker.hasUpdates)\n\n    if(serviceWorker.hasUpdates === true) {\n      setOpenUpdateDialog(true);\n    }\n\n  }, [serviceWorker.hasUpdates]); // end useEffect\n\n  // runs once on start\n  useEffect(() => {\n\n    // set listener for authentication changes\n    // either only set redux object or also create firestore instance\n    firebase.auth().onAuthStateChanged(user => {\n      dispatch({ type: user ? \"SIGNIN\" : \"SIGNOUT\" })\n\n      // if user is signed in, set redux object\n      if( user ) {\n\n        // dispatch auth info (such as last time logged in etc)\n        dispatch({\n          type: \"SETUSER\",\n          auth_user: user\n        })\n\n        const user_id = user.uid;\n        const user_email = user.email;\n\n        const usersRef = db.collection('users').doc(user_email);\n        // connect to firebase and check if a user doc for this email exists\n        usersRef.get()\n        .then((docSnapshot) => {\n          if (docSnapshot.exists) {\n            usersRef.onSnapshot((doc) => {\n\n              console.log(\"user exists in firestore\")\n\n              // dispatch user doc info (such as username, other info set in the app)\n              dispatch({\n                type: \"SETFIREUSER\",\n                firestore_user: doc.data()\n              })\n\n            });\n          } else {\n\n            // prepare to create firestore doc as this user signed in for the first time\n            let userObj = {\n              email: user_email,\n              username: \"DefaultChef\",\n              university: \"\",\n              fullname: \"Master Chef\"\n            };\n\n            console.log(\"create the document\")\n            usersRef.set(userObj); // create the document\n\n            // set redux state\n            dispatch({\n              type: \"SETFIREUSER\",\n              firestore_user: userObj\n            })\n          }\n      });\n\n      } // end if user\n      else {\n\n        // no user is signed in\n        dispatch({\n          type: \"SETUSER\",\n          user: undefined\n        })\n\n      }\n\n    }); // end auth listener\n\n  }, []); // end useEffect\n\n\n  if(db === undefined) // init firebase once\n  {\n    let storage;\n    [db, storage] = initFirebase();\n    dispatch({ type: \"SETDB\", db: db });\n    dispatch({ type: \"SETSTORAGE\", storage: storage });\n  }\n\n  const closeDialog = (action) => {\n    setOpenUpdateDialog(false);\n  };\n\n  // used in TopMenuBar, which needs to be refactored\n  const handleChange = (event = undefined, newValue) => {\n\n    console.log(\"heello\" + newValue + \".\")\n\n  };\n\n  let update_message = 'New content is available and will be used when all tabs for this page are closed';\n\n  // jsx code, looks like html\n  // renders top bar, page content and bottom bar.\n  // page content is based on url, defined with Route objects\n  return (\n    <div className=\"body\">\n\n      <BrowserRouter>\n      <div>\n\n        <div className={classes.headerrow}>\n        <TopMenuBar signedIn={state_user.signedIn} handleChange={handleChange}/>\n        </div>\n\n        <div className={classes.mainContainer}>\n\n          <Switch>\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/settings\" component={Settings} />\n            <Route path=\"/profile/:username_url\" component={ProfilePage} />\n            <Route path=\"/upload\" component={UploadPage} />\n            <Route path=\"/notices\" component={NoticePage} />\n            <Route path=\"/saved\" component={ListPage} />\n            <Route path=\"/recipe/:recipetitle/:id\" component={RecipePage} />\n            <Route path=\"/search\" component={SearchPage} />\n            <Route path=\"/home\" component={FeedPage}/>\n            <Route path=\"/lists\" component={ListPage}/>\n            <Redirect exact path=\"/\" to=\"/home\" />\n          </Switch>\n\n          <MySnackbar open={openUpdateDialog} handleClose={closeDialog} message={update_message} action={\"\"}/>\n\n        </div>\n        <div className={classes.footer}>\n          <BottomMenuBar/>\n        </div>\n\n      </div>\n      </BrowserRouter>\n\n    </div>\n  );\n}\n\n// extract as individual component\nfunction BottomMenuBar() {\n\n  const [value, setValue] = React.useState('default');\n\n  const history = useHistory();\n  const classes = useStyles();\n  const upload_store = useSelector(state => state.uploadReducer);\n  const dispatch = useDispatch();\n\n  const handleMenuClick = (event = undefined, val) => {\n    setValue(val);\n    history.push(\"/\" + val);\n\n    // set as one dispatch instead..\n    dispatch({\n      type: \"SETDESCRIPTIONS\",\n      descriptions: undefined\n    })\n\n    dispatch({\n      type: \"SETINGREDIENTS\",\n      ingredients: undefined\n    })\n\n    dispatch({\n      type: \"SETTITLE\",\n      title: undefined\n    })\n\n    if(val != \"upload\" && upload_store.editmode == true) {\n      dispatch({\n        type: \"SETEDITMODE\",\n        editmode: false\n      })\n\n    }\n\n  };\n\n  return (\n\n    <BottomNavigation value={value} onChange={ (evt,value) => handleMenuClick(evt, value) } className={classes.bottomMenu}>\n      <BottomNavigationAction label=\"Flöde\" value=\"home\" icon={<HomeRoundedIcon />} />\n      <BottomNavigationAction label=\"Ladda up\" value=\"upload\" icon={<PublishIcon />} />\n      <BottomNavigationAction label=\"Notiser\" value=\"notices\" icon={<Badge badgeContent={3} color=\"secondary\"><NotificationsIcon /></Badge>} />\n      <BottomNavigationAction label=\"Sparat\" value=\"saved\" icon={<LoyaltyRoundedIcon />} />\n    </BottomNavigation>\n\n  );\n\n}\n\n// margin: -15px -11px 50px -15px;\n\nconst useStyles = makeStyles({\n  body: {\n    padding: 15,\n    paddingTop: '35px'\n  },\n  mainContainer: {\n    paddingTop: '50px',\n    paddingBottom: '50px'\n  },\n  footer: {\n    position: 'fixed',\n    left: 0,\n    bottom: 0,\n    width: 100 + '%',\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  headerrow: {\n    position: 'fixed',\n    left: 0,\n    top: 0,\n    width: 100 + '%',\n    zIndex: 10\n  },\n  profileBtn: {\n    color: 'green'\n  },\n  bottomMenu: {\n    width: 500,\n  }\n\n});\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\n//import store from \"./store.js\";\nimport reducer from \"./store.js\";\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n//import { ReactReduxFirebaseProvider, firebaseReducer } from 'react-redux-firebase';\n\n// const initialState = {}\n\nconst store = createStore(\n   reducer,\n   window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n );\n\n// const store = createStoreWithFirebase(reducer, initialState)\n // window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(\n\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n);\n\n// ReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\nserviceWorker.register();\n"],"sourceRoot":""}