{"version":3,"sources":["assets/temp_food1.jpg","assets/userchef.png","assets/temp_food2.jpg","assets/temp_food3.jpg","assets/temp_food4.jpg","assets/temp_food5.jpg","store.js","serviceWorker.js","components/snackbar.js","components/recipeitem.js","components/recipegridlist.js","pages/feedpage.js","components/userpagetabs.js","components/followerlist.js","components/listcontainer.js","pages/listpage.js","pages/profilepage.js","components/loadspinner.js","pages/noticepage.js","pages/favoritepage.js","components/fileinput.js","components/validcheck.js","components/descriptionlist.js","components/ingredientslist.js","theme.js","components/RecipeCard.js","pages/uploadpage.js","components/simpledialog.js","components/pickuserdialog.js","components/ReactShare.js","pages/recipepage.js","pages/login.js","pages/settings.js","pages/searchpage.js","components/topmenubar.js","App.js","index.js","assets sync /^/.*/.jpg$"],"names":["module","exports","rootReducer","combineReducers","fireReducer","state","db","undefined","storage","auth_user","firestore_user","action","type","testReducers","num","url","step","uploadReducer","editmode","recipe_id","title","ingredients","descriptions","image","userReducer","signedIn","dragReducer","isDragging","draggableId","enableDrag","isLocalhost","Boolean","window","location","hostname","match","hasUpdates","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","reload","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","MySnackbar","props","useState","open","setOpen","useEffect","handleClose","event","reason","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","message","Fragment","Button","color","size","onClick","style","marginRight","IconButton","aria-label","fontSize","useStyles","makeStyles","listimage","maxHeight","maxWidth","minWidth","minHeight","objectFit","listtile_small","padding","listtile","pointer","cursor","RecipeItem","img_src","openDialog","setopenDialog","history","callback","ms","startLongPress","setStartLongPress","timerId","setTimeout","clearTimeout","useLongPress","result","useHistory","classes","recipe","r_img","img","img_url","require","tile_jsx","handeRecipeClick","clicked_recipe","push","id","src","className","alt","smalltiles","GridListTile","key","GridListTileBar","subtitle","user","handleaction","root","display","flexWrap","justifyContent","overflow","icon","spinner","marginTop","RecipeGridList","images","setImages","images_temp","recipes","map","idx","GridList","length","Spinner","ScrollableRecipes","concat","Grid","container","spacing","justify","scrolldiv","item","xs","scrolltitle","scrollimage","scrolltext","NewsContainer","recipe_index","Math","floor","random","feedback_form_link","href","target","alignItems","newscontainer","imageContainer","flexDirection","marginBottom","grid_background","backgroundColor","paddingTop","foodImg","height","width","margin","borderRadius","imagesidebar","triedby","background","textAlign","alignSelf","FeedPage","setRecipes","scrollview","store","useSelector","recpiesRef","collection","recipeFetcher","onSnapshot","querySnapshot","recipe_docs","forEach","doc","data","name","fadeIn","TabPanel","children","value","index","other","Typography","component","role","hidden","aria-labelledby","Box","p","a11yProps","theme","flexGrow","palette","paper","SimpleTabs","React","setValue","AppBar","position","Tabs","onChange","newValue","Tab","label","FollowerListItem","user_avatar","profile_img_url","smallprofileimage","Avatar","ListItem","ListItemAvatar","ListItemText","primary","username","secondary","fullname","handleChange","followerlist","followColor","notfollowColor","FollowerList","followData","setFollowData","handleUserClick","followerData","followersjsx","showFollowIcon","List","dense","listcontainer","list_header","ListContainer","list_doc","listdoc","recipeDocs","temp_recipes","Object","keys","recipe_fetcher","header","recipe_id_list","get","exists","spinner_jsx","recipeContent","update","noheader","listname","user_in_header","mine","createdby","split","DraggableRecipe","oncontextmenu","preventDefault","stopPropagation","getListStyle","isDraggingOver","listDroppable","draggingClass","marginLeft","displayNone","ListPage","listState","setlistState","setLikes","lists_by_user","setLists_by_user","updateState","useCallback","useDispatch","current_email","email","getListDocsForUser","loadedDocs","getLikesDocsForUser","like_docs","liked_recipes_ids","liked_recipes","Promise","resolve","reject","replaced_email","replace","listsRef","where","list_docs","snapshot","created_by","i","droppableId","direction","provided","ref","innerRef","userinfo","fontWeight","university","bio","ProfilePage","username_url","useParams","setUser","ifUser","setIfUser","followInfo","setFollowInfo","followingInfo","setFollowingInfo","following","following_this_user","setFollowing_this_user","url_user","recipeFetcher_new","followFetcher","doc_email","found","email_promise","loadedDoc","followBtn","url_username","doc_data","followUser","firebase_event_id","delete","set","date","Date","event_follow_object","event_image_url","other_username","timestamp","seen","current_username","current_user_email","follow_docs","followBuilder","followers","follows","variant","startIcon","userchef","LoadSpinner","B","NoticeListItem","noticeText","userClick","recipeClick","recipe_id_to_title","substring","indexOf","eventimg","time","body","NoticePage","eventList","setEventList","events_promise","temp_data","spinnerjsx","eventListjsx","FavoritePage","noop","FileInput","rest","f","join","boxSizing","transition","fontFamily","lineHeight","letterSpacing","boxShadow","e","files","nomargin","buttontext","textTransform","input","loadedimage","formlabel","imagediv","uploaddiv","greenicon","redicon","newListItem","titlediv","DescriptionList","editObject","setEditObject","setOrder","text","setText","description","setDescriptions","dispatch","upload_store","ingredientsDisp","existing_descriptions","saveEdited","temp_list","slice","ind","obj_copy","toUpperCase","handleAdd","descriptionjsx","desc","object","order","Divider","ingredientslist","new_obj","addDescription","TextField","InputLabelProps","shrink","onKeyPress","ev","enterPress","splice","IngredientsList","quantity","setQuantity","measure","setMeasure","setName","temp_ingredients","initiate_ingredients","setIngredients","ingredientsjsx","ingred","addIngredient","required","toLowerCase","createMuiTheme","purple","green","status","danger","media","expand","transform","transitions","create","duration","shortest","expandOpen","avatar","red","UploadPage","setTitle","setFiles","setImage","setId","upload_wait","setUpload_wait","done","setDone","labelWidth","setLabelWidth","labelRef","useRef","valid","setValid","imageDisp","current","offsetWidth","handleDescriptionsAdd","handleIngredientsAdd","bottom_content","uploadImage","uploadTask","firebase","putString","on","getDownloadURL","downloadURL","upload_done_text","upload_button_text","upload_disabled","recipe_name","document","ref_to_user","returnValue_downloadURL","user_ref","test","update_data","alert","disabled","page_title","FormControl","InputLabel","htmlFor","OutlinedInput","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","FormLabel","ExpansionPanelDetails","reader","FileReader","onload","readAsDataURL","blue","SimpleDialog","selectedValue","myFriends","setMyFriends","follow_data","email_jsx","friend","button","event_tips_object","recipeId","handleListItemClick","Dialog","DialogTitle","PickUserDialog","setSelectedValue","ReactShare","shareUrl","FacebookShareButton","quote","FacebookIcon","round","RecipeDecsList","sort","desc1","desc2","descjsx","RecipeDecsListItem","len","checked","setChecked","checkIcon","triedbyText","triedbyNum","recipeheader","RecipePage","setRecipe","likes","doc_id","saved","setSaved","recipetitle","user_doc","likeFetcher","isliked","err","extended_data","disableTouchRipple","pathname","SignUpContainer","setEmail","password","setPassword","isValid","setUsername","feedback","setFeedback","usenameIsAvailableCheck","username_totry","is_available","login_div","autoComplete","placeholder","evt","username_textfield","auth","createUserWithEmailAndPassword","errorCode","code","LoginContainer","loginProblem","setLoginProblem","signText","currentUser","btn_color","signOut","signInWithEmailAndPassword","errorMessage","sendPasswordResetEmail","SignupBanner","onAction","info_font","LogInBanner","fontStyle","LoginPage","setState","buttons","rainbow","backgroundImage","center_btn","available_text","profileimage","fullrow","flex","Settings","setUsername_textfield","fullname_textfield","setFullname_textfield","bio_textfield","setBio_textfield","imageUrl","setImageUrl","has_changed","setHas_changed","in_editmode","setIn_editmode","isAvailable","setIsAvailable","openSetting","setOpenSetting","imageUrlList","setImageUrlList","cancel_edit","save_username","list_ids","loadedIds","_id","storageRef","child","available_images","listAll","res","items","itemRef","randomName","temp_username","preNames","postNames","rand1","rand2","newName","onExpand","expanded","heading","new_value","TextareaAutosize","img_index","temp_url","continue_search","randomImg","SearchPage","users","setUsers","userFetcher","collection_name","temp_users","ProfileBtn","btn","buttonPad","icon_content","jsx_content","edge","menuButton","grow","breakpoints","up","search","shape","fade","common","white","searchIcon","pointerEvents","inputRoot","inputInput","sectionDesktop","sectionMobile","whiteColor","TopMenuBar","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","isMobileMenuOpen","handleMobileMenuClose","handleMenuClose","renderMenu","Menu","keepMounted","transformOrigin","MenuItem","renderMobileMenu","Badge","badgeContent","currentTarget","aria-haspopup","Toolbar","goBack","noWrap","Link","to","textDecoration","InputBase","inputProps","onBlur","onFocus","deferredPrompt","addEventListener","prompt","userChoice","choiceResult","outcome","BottomMenuBar","BottomNavigation","val","handleMenuClick","bottomMenu","BottomNavigationAction","mainContainer","paddingBottom","footer","left","bottom","headerrow","top","zIndex","profileBtn","App","openUpdateDialog","setOpenUpdateDialog","state_user","onAuthStateChanged","uid","user_email","usersRef","docSnapshot","userObj","firebaseConfig","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","firestore","initFirebase","Helmet","charSet","rel","path","Login","rootElement","getElementById","ReactDOM","render","createStore","reducer","__REDUX_DEVTOOLS_EXTENSION__","URL","origin","fetch","response","contentType","headers","ready","unregister","checkValidServiceWorker","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error"],"mappings":"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","file":"static/js/main.21d36f87.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/temp_food1.cd514d13.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/temp_food2.03e2fd15.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food3.c3c706f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food4.af2bb629.jpg\";","module.exports = __webpack_public_path__ + \"static/media/temp_food5.758c2926.jpg\";","import { createStore, combineReducers, compose } from 'redux'\r\n\r\nfunction testreducer(state = { num: 0, url: \"hey\" }, action) {\r\n  switch (action.type) {\r\n    case \"INCREMENT\":\r\n      return {\r\n        ...state,\r\n        num: state.num + action.step\r\n      };\r\n    case \"DECREMENT\":\r\n      return {\r\n        ...state,\r\n        num: state.num - action.step\r\n      };\r\n    default:\r\n      return state;\r\n    case \"SETURL\":\r\n      return {\r\n        ...state,\r\n        url: state.url\r\n      };\r\n  }\r\n}\r\n\r\nfunction uploadReducer(state = { editmode: false, recipe_id: undefined, title: undefined, ingredients: undefined, descriptions: undefined, image: undefined }, action) {\r\n  switch (action.type) {\r\n      case \"SETTITLE\":\r\n        return {\r\n          ...state,\r\n          title: action.title\r\n        };\r\n      case \"SETINGREDIENTS\":\r\n        return {\r\n          ...state,\r\n          ingredients: action.ingredients\r\n        };\r\n      case \"SETDESCRIPTIONS\":\r\n        return {\r\n          ...state,\r\n          descriptions: action.descriptions\r\n        };\r\n      case \"SETIMAGE\":\r\n        return {\r\n          ...state,\r\n          image: action.image\r\n        };\r\n      case \"SETEDITMODE\":\r\n        return {\r\n          ...state,\r\n          editmode: action.editmode,\r\n          recipe_id: action.recipe_id,\r\n        };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction userReducer(state = { signedIn: false }, action) {\r\n  switch (action.type) {\r\n    case \"SIGNIN\":\r\n      return {\r\n        ...state,\r\n        signedIn: true\r\n      };\r\n    case \"SIGNOUT\":\r\n      return {\r\n        ...state,\r\n        signedIn: false\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction fireReducer(state = { db: undefined, storage: undefined, auth_user: undefined, firestore_user: undefined }, action) {\r\n  switch (action.type) {\r\n    case \"SETDB\":\r\n      return {\r\n        ...state,\r\n        db: action.db\r\n      };\r\n    case \"SETSTORAGE\":\r\n      return {\r\n        ...state,\r\n        storage: action.storage\r\n      };\r\n    case \"SETUSER\":\r\n      return {\r\n        ...state,\r\n        auth_user: action.auth_user\r\n      };\r\n    case \"SETFIREUSER\":\r\n      return {\r\n        ...state,\r\n        firestore_user: action.firestore_user\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction dragReducer(state = { isDragging: false, draggableId: undefined, enableDrag: false }, action) {\r\n  switch (action.type) {\r\n    case \"SETISDRAGGING\":\r\n      return {\r\n        ...state,\r\n        isDragging: action.isDragging\r\n      };\r\n    case \"SETDRAGGABLEID\":\r\n      return {\r\n        ...state,\r\n        draggableId: action.draggableId\r\n      };\r\n    case \"SETENABLEDRAG\":\r\n      return {\r\n        ...state,\r\n        enableDrag: action.enableDrag\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// export default reducer;\r\n//  firestore: firestoreReducer,\r\n\r\nconst rootReducer = combineReducers({\r\n  fireReducer: fireReducer,\r\n  testReducers: testreducer,\r\n  uploadReducer: uploadReducer,\r\n  userReducer: userReducer,\r\n  dragReducer: dragReducer\r\n});\r\n\r\n export default rootReducer;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport let hasUpdates = false;\n\n/*\nexport function checkMyUpdate() {\n\n  return hasUpdates;\n}*/\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n\n        hasUpdates = true;\n        window.location.reload();\n\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n\n              // Sara added: Reload the page if new content is available\n              /*\n              navigator.serviceWorker.ready.then(registration => {\n                registration.unregister().then(() => {\n                  window.location.reload();\n                });\n              }); */\n\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        console.log(\"Service worker found. Proceed as normal.\")\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, {useState, useEffect} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nexport default function MySnackbar(props) {\r\n\r\n  const [open, setOpen] = useState(props.open);\r\n\r\n  useEffect(() => {\r\n    setOpen(props.open);\r\n  }, [props.open]);\r\n\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n\r\n\r\n    setOpen(false);\r\n    props.handleClose();\r\n  };\r\n\r\n  const handleAction = () => {\r\n\r\n    setOpen(false);\r\n    props.handleClose(\"remove\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n        message={props.message}\r\n        action={\r\n          <React.Fragment>\r\n            <Button color=\"secondary\" size=\"small\" onClick={handleAction} style={{marginRight: '25px'}}>\r\n              {props.action}\r\n            </Button>\r\n            <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </React.Fragment>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, {useState, useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport GridListTile from '@material-ui/core/GridListTile';\r\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\r\nimport MyDialog from '../components/dialog';\r\nimport MySnackbar from '../components/snackbar';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { blue } from '@material-ui/core/colors';\r\n\r\nfunction useLongPress(callback = () => {}, ms = 300) {\r\n  const [startLongPress, setStartLongPress] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let timerId;\r\n    if (startLongPress) {\r\n      timerId = setTimeout(callback, ms);\r\n    } else {\r\n      clearTimeout(timerId);\r\n    }\r\n\r\n    return () => {\r\n      clearTimeout(timerId);\r\n    };\r\n  }, [startLongPress]);\r\n\r\n  return {\r\n    onMouseDown: () => setStartLongPress(true),\r\n    onMouseUp: () => setStartLongPress(false),\r\n    onMouseLeave: () => setStartLongPress(false),\r\n    onTouchStart: () => setStartLongPress(true),\r\n    onTouchEnd: () => setStartLongPress(false),\r\n  };\r\n}\r\n\r\n\r\n\r\nfunction RecipeItem(props) {\r\n\r\n  const [openDialog, setopenDialog] = useState(false);\r\n\r\n  const onLongPress = result => {\r\n    setopenDialog(true);\r\n  }\r\n\r\n  const handleClose = (action) => {\r\n    setopenDialog(false);\r\n\r\n    if(action === \"remove\")\r\n      props.handleaction(props.recipe.id);\r\n  }\r\n\r\n  const backspaceLongPress = useLongPress(onLongPress, 500);\r\n\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const recipe = props.recipe;\r\n\r\n\r\n  let r_img = ( recipe.img !== undefined) ? recipe.img : 'temp_food1';\r\n  let img_src;\r\n\r\n  if  ( recipe.img_url !== undefined) {\r\n    img_src = recipe.img_url;\r\n  } else {\r\n    img_src = require('../assets/'+ r_img + '.jpg');\r\n  }\r\n\r\n  const handeRecipeClick = (clicked_recipe) => {\r\n    history.push(\"/recipe/\" + clicked_recipe.title + \"/\" + clicked_recipe.id );\r\n  };\r\n\r\n  let enable_press = false;\r\n  let image;\r\n\r\n  if (enable_press === true)\r\n    image = <div {...backspaceLongPress}> <img src={img_src} className={classes.listimage} alt={recipe.title} alt={\"recipe img\"} /> </div> ;\r\n  else\r\n    image = <div> <img src={img_src} className={classes.listimage} alt={recipe.title} alt={\"recipe img\"} /> </div> ;\r\n\r\n  let tile_jsx;\r\n  // if feed or list\r\n  if( props.smalltiles !== undefined && props.smalltiles === false) {\r\n    tile_jsx = (\r\n    <GridListTile key={r_img} className={classes.listtile + ' ' + classes.pointer } onClick={() => handeRecipeClick(recipe)}>\r\n      {image}\r\n      <GridListTileBar\r\n        title={recipe.title}\r\n        subtitle={<span>Av: {recipe.user}</span>}\r\n      />\r\n    </GridListTile>);\r\n  } else // LIST\r\n  {\r\n    tile_jsx = (\r\n    <React.Fragment>\r\n      <GridListTile key={r_img} className={classes.listtile_small} onClick={() => handeRecipeClick(recipe)}>\r\n        {image}\r\n      </GridListTile>\r\n    </React.Fragment>);\r\n  }\r\n\r\n  return (\r\n\r\n    <React.Fragment>\r\n        {tile_jsx}\r\n\r\n      <MySnackbar open={openDialog} handleClose={handleClose} message={recipe.title} action={\"ta bort från lista\"}/>\r\n    </React.Fragment>\r\n\r\n  );\r\n}\r\n\r\n// <MyDialog open={openDialog}/>\r\n\r\nconst useStyles = makeStyles({\r\n  listimage: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    minWidth: '150px',\r\n    minHeight: '150px',\r\n    objectFit: 'cover'\r\n  },\r\n  listtile_small: {\r\n    maxHeight: '100px',\r\n    maxWidth: '100px',\r\n    padding: '2px',\r\n  },\r\n  listtile: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    padding: '5px',\r\n  },\r\n  pointer: {\r\n   cursor: 'pointer'\r\n  }\r\n});\r\n\r\n\r\nexport default RecipeItem;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport GridList from '@material-ui/core/GridList';\r\nimport RecipeItem from '../components/recipeitem';\r\n\r\nfunction RecipeGridList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  const [images, setImages] = useState([]);\r\n  let smalltiles = (props.smalltiles) ? props.smalltiles : false;\r\n\r\n  useEffect(() => {\r\n\r\n    let images_temp = props.recipes.map((recipe, idx) =>\r\n      <RecipeItem recipe={recipe} key={idx} smalltiles={smalltiles} id={idx} handleaction={props.handleaction}/>\r\n    );\r\n\r\n    setImages(images_temp);\r\n\r\n  }, []);\r\n\r\n\r\n  // oh loading in parent component is what is taking time\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <GridList>\r\n      {images.length > 0 && images }\r\n      </GridList>\r\n    </div>\r\n  );\r\n}\r\n//    backgroundColor: '#f1f1f1',\r\n//    padding: '10px'\r\nconst useStyles = makeStyles({\r\n  root: {\r\n   display: 'flex',\r\n   flexWrap: 'wrap',\r\n   justifyContent: 'center',\r\n   overflow: 'hidden'\r\n  },\r\n  icon: {\r\n    color: 'rgba(255, 255, 255, 0.54)',\r\n  },\r\n  listimage: {\r\n    maxHeight: '150px',\r\n    maxWidth: '150px',\r\n    padding: '5px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\nexport default RecipeGridList;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { BrowserRouter as Link} from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport RecipeGridList from '../components/recipegridlist';\r\nimport RecipeItem from '../components/recipeitem';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport GridList from '@material-ui/core/GridList';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction FeedPage() {\r\n\r\n  // const [images, setImages] = useState();\r\n  const [recipes, setRecipes] = useState(undefined);\r\n  //const [docs, setDocs] = useState(undefined);\r\n  const [scrollview, setScrollview] = useState(true);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  useEffect(() => {\r\n\r\n    let recpiesRef = store.db.collection('recipes');\r\n    recipeFetcher(recpiesRef);\r\n\r\n  }, []);\r\n\r\n  const recipeFetcher = (recpiesRef) => {\r\n    store.db.collection(\"recipes\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        let recipe_docs = [];\r\n        querySnapshot.forEach( doc => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          recipe_docs.push(data);\r\n        });\r\n\r\n        setRecipes(recipe_docs);\r\n    });\r\n  }\r\n\r\n  // <div className={classes.imageContainer}>{images}</div>\r\n  // recipeData.PastaMaster.recipes\r\n// { recipes != undefined && <RecipeGridList imageData={recipes}/> }\r\n  if(scrollview === false )\r\n  {\r\n    return (\r\n\r\n      <div>\r\n\r\n      { recipes !== undefined && <ScrollableRecipes recipes={recipes}/> }\r\n\r\n       </div>\r\n\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <NewsContainer recipes={recipes}/>\r\n      <h3>Senaste recepten</h3>\r\n      { recipes !== undefined && <div className={classes.grid_background}><RecipeGridList recipes={recipes}/></div> }\r\n      { recipes === undefined && <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div> }\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\nfunction ScrollableRecipes(props) {\r\n\r\n  const classes = useStyles();\r\n  // className={classes.userinfo}\r\n\r\n  let recipes = props.recipes.concat(props.recipes);\r\n  recipes = recipes.concat(recipes);\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={1}\r\n      justify=\"center\"\r\n\r\n    >\r\n      {\r\n        recipes.map((recipe, idx) =>\r\n        <div className={classes.scrolldiv} key={idx}>\r\n        <Grid item xs={12}>\r\n        <h3 className={classes.scrolltitle}>\r\n          { recipe.title + ' | ' + recipe.user }\r\n        </h3>\r\n        </Grid>\r\n        <Grid item xs={12} >\r\n          <img src={require('../assets/'+ 'temp_food1' + '.jpg')} className={classes.scrollimage} alt={\"recipe img\"} />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n        <p className={classes.scrolltext}>\r\n          { 'Some text' }\r\n        </p>\r\n        </Grid>\r\n        </div>\r\n      )\r\n\r\n      }\r\n    </Grid>\r\n  );\r\n}\r\n\r\n// component above the feed at start page\r\nfunction NewsContainer(props) {\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  // className={classes.userinfo}\r\n\r\n\r\n  if(props.recipes === undefined || props.recipes.length < 1 )\r\n    return null; // <p style={{margin: 15}}>Sorry chefs, an issue! probably no internet connection.</p>\r\n\r\n  let recipe_index = Math.floor(Math.random() * props.recipes.length);\r\n\r\n  let viral_header = (props.recipes !== undefined && props.recipes[recipe_index] !== undefined ) ? props.recipes[recipe_index].title : \"Veckans favvo: \";\r\n\r\n  const handleUserClick = (user) => {\r\n    history.push(\"/profile/\" + user );\r\n  };\r\n\r\n  let username = props.recipes[recipe_index].user;\r\n\r\n  /*\r\n  <Grid item xs={5}>\r\n\r\n    {props.recipes !== undefined &&\r\n      <GridList><RecipeItem recipe={props.recipes[recipe_index]} smalltiles={false}/></GridList>\r\n    }\r\n\r\n  </Grid>\r\n  <Grid item xs={7}>\r\n    <h3>{viral_header}</h3>\r\n    <h5 onClick={() => handleUserClick(username)} style={{cursor: 'pointer'}}> @username</h5>\r\n  </Grid>\r\n  */\r\n\r\n  let feedback_form_link = <a href=\"https://forms.gle/wUSFkwExgdJbiAUL7\" target=\"_blank\" style={{color: '#68bb8c'}}>här</a>;\r\n\r\n  return (\r\n    <div>\r\n    <h3>Nyheter</h3>\r\n    <Grid\r\n      container\r\n      spacing={1}\r\n      justify=\"center\"\r\n      alignItems=\"center\"\r\n      className={classes.newscontainer}\r\n    >\r\n\r\n      <Grid item xs={12}>\r\n        <div style={{padding: '10px'}}>\r\n        <h3>Välkommen till nya Campuskost 🌱</h3>\r\n        <p> Campuskost har fått nytt utseende och funktion! Du kan nu skapa ett konto och själv ladda upp och redigera dina recept.\r\n        Snart kommer funktionalitet såsom att skapa listor och följa dina vänners listor med recept. Lämna gärna feedback {feedback_form_link} om du\r\n        hittar buggar eller har något roligt förslag</p>\r\n        </div>\r\n      </Grid>\r\n\r\n    </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n// used before for testing\r\n/*\r\nfunction ImageContainer(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Link to={\"/recipe/\" + props.data.title } >\r\n      <div>\r\n      <div className={classes.foodImg}></div>\r\n      {props.data.title}\r\n      </div>\r\n    </Link>\r\n  );\r\n} */\r\n\r\nconst useStyles = makeStyles({\r\n  imageContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    marginBottom: 50,\r\n  },\r\n  grid_background: {\r\n    backgroundColor: '#f1f1f1',\r\n    paddingTop: '10px'\r\n  },\r\n  foodImg: {\r\n    backgroundColor: 'pink',\r\n    height: 100,\r\n    width: 100,\r\n    margin: 5,\r\n    borderRadius: 20\r\n  },\r\n  newscontainer: {\r\n    borderRadius: 20,\r\n    backgroundColor: '#f1f1f1',\r\n    marginBottom: 15\r\n  },\r\n  listimage: {\r\n    maxHeight: '90px',\r\n    maxWidth: '90px',\r\n    padding: '5px',\r\n    margin: '15px',\r\n    borderRadius: '10px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  },\r\n  imagesidebar: {\r\n    padding: 5\r\n  },\r\n  triedby: {\r\n    background: '#f1f1f1',\r\n    borderRadius: '4px',\r\n    padding: 5,\r\n    textAlign: 'center'\r\n  },\r\n  scrollimage: {\r\n    maxWidth: '300px',\r\n  },\r\n  scrolltitle: {\r\n    alignSelf: 'flex-start'\r\n  },\r\n  scrolldiv: {\r\n    background: '#f2f2f2',\r\n    padding: '25px',\r\n    margin: '15px',\r\n    borderRadius: '12px'\r\n  },\r\n  scrolltext: {\r\n    color: 'black'\r\n  }\r\n});\r\n\r\nexport default FeedPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <Typography\r\n      component=\"div\"\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    'aria-controls': `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nexport default function SimpleTabs(props) {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Tabs value={value} onChange={handleChange} aria-label=\"simple tabs example\">\r\n          <Tab label=\"Recept\" {...a11yProps(0)} />\r\n          <Tab label=\"Listor\" {...a11yProps(1)} />\r\n          <Tab label=\"Följare\" {...a11yProps(2)} />\r\n          <Tab label=\"Följer\" {...a11yProps(3)} />\r\n        </Tabs>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        {props.children[0]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        {props.children[1]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        {props.children[2]}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        {props.children[3]}\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\n\r\nfunction FollowerListItem(props) {\r\n\r\n  const classes = useStyles();\r\n  let user = props.user;\r\n\r\n  let user_avatar = undefined;\r\n  if(user.profile_img_url != undefined) {\r\n    user_avatar = <img src={user.profile_img_url} className={classes.smallprofileimage} alt={\"profile-img\"} />; //\r\n  } else {\r\n    user_avatar = (\r\n      <Avatar>\r\n          <PersonIcon />\r\n      </Avatar>\r\n    );\r\n  }\r\n\r\n  return (\r\n\r\n    <ListItem className={classes.pointer}>\r\n      <ListItemAvatar>\r\n        {user_avatar}\r\n      </ListItemAvatar>\r\n\r\n      <ListItemText\r\n        primary= { user.username }\r\n        secondary={ user.fullname }\r\n        onClick={() => props.handleChange(user.username)}\r\n      />\r\n\r\n      { (false && props.showFollowIcon) &&\r\n      <ListItemSecondaryAction>\r\n        <IconButton edge=\"end\" aria-label=\"follows\">\r\n          <CheckCircleIcon className={(user.follows ? classes.followColor : classes.notfollowColor)}/>\r\n        </IconButton>\r\n      </ListItemSecondaryAction>\r\n      }\r\n    </ListItem>\r\n\r\n  );\r\n\r\n}\r\n\r\n// className={(user.follows ? 'followColor' : 'notfollowColor')}\r\n\r\nfunction FollowerList(props) {\r\n\r\n  const [followData, setFollowData] = useState([]);\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleUserClick = (user) => {\r\n    history.push(\"/profile/\" + user );\r\n  };\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    setFollowData(props.followerData);\r\n\r\n  }, [props.followerData]);\r\n\r\n\r\n  if (false && props.followerData.length < 1) {\r\n\r\n    return (\r\n      <p>sad, no followers</p>\r\n    );\r\n  }\r\n\r\n  let followersjsx = followData.map((user, idx) =>\r\n    <FollowerListItem key={idx} user={user} handleChange={handleUserClick} showFollowIcon={props.showFollowIcon}/>\r\n  );\r\n\r\n  return (\r\n    <List dense={true} className={classes.followerlist}>\r\n      {followersjsx}\r\n    </List>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  followerlist: {\r\n   marginTop: '20px',\r\n },\r\n   followColor: {\r\n     color: '#39A4B3'\r\n   },\r\n   notfollowColor: {\r\n     color: '#e8e8e8'\r\n   },\r\n   smallprofileimage: {\r\n     width: '40px'\r\n   },\r\n   pointer: {\r\n    cursor: 'pointer'\r\n   }\r\n});\r\n\r\nexport default FollowerList;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport RecipeGridList from '../components/recipegridlist';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nvar Spinner = require('react-spinkit');\r\n// import RecipeGridList from '../components/recipegrid';\r\n\r\nfunction ListContainer(props) {\r\n\r\n  const [recipes, setRecipes] = React.useState([]);\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  const list_doc = props.listdoc;\r\n\r\n  useEffect(() => {\r\n\r\n    // now using\r\n    if(props.recipeDocs != undefined) {\r\n\r\n      setRecipes(props.recipes);\r\n      return;\r\n    }\r\n\r\n    // using recipe ids\r\n    if (list_doc.recipes != undefined) {\r\n\r\n      let temp_recipes = [];\r\n\r\n      // previously liked recipes will persist in the firestore map but be false\r\n      Object.keys(list_doc.recipes).forEach(function(key) {\r\n          if(list_doc.recipes[key] === true)\r\n            temp_recipes.push(key)\r\n      });\r\n\r\n      recipe_fetcher(temp_recipes);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const handleaction = (recipe_id) => {\r\n\r\n    let listsRef = store.db.collection('recipe_lists').doc(list_doc.id);\r\n\r\n    listsRef.get().then(function(doc) {\r\n\r\n      let data = doc.data();\r\n      data.id = doc.id;\r\n      data.recipes[recipe_id] = false; // remove from list // my_map.delete(key)\r\n      store.db.collection(\"recipe_lists\").doc(doc.id).update(data);\r\n\r\n\r\n      //let updated_recipes = data.recipes[recipe_id];\r\n      // const nextState = recipes.map(a => a.id === doc.id ? { ...a, [recipes]: updated_recipes } : a);\r\n      // setRecipes(nextState);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  // fetch by list of recipe ids\r\n  const recipe_fetcher = (recipe_id_list) => {\r\n\r\n    let temp_recipes = [];\r\n    let ref;\r\n    recipe_id_list.map( (recipe_id, idx) => {\r\n\r\n      ref = store.db.collection('recipes').doc(recipe_id);\r\n      ref.get().then(function(doc) {\r\n          if (doc.exists) {\r\n\r\n              let data = doc.data();\r\n              data.id = doc.id;\r\n              temp_recipes.push(data);\r\n              if (idx == recipe_id_list.length - 1) {\r\n                setRecipes(temp_recipes);\r\n              }\r\n          } \r\n      }).catch(function(error) {\r\n          console.log(\"Error getting document:\", error);\r\n      });\r\n    })\r\n  }\r\n\r\n  // either spinner or recipe content is to be shown\r\n  let spinner_jsx = <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>;\r\n  let recipeContent = (recipes.length > 0) ? <RecipeGridList handleaction={handleaction} recipes={recipes} smalltiles={true}/> : spinner_jsx;\r\n\r\n  let header;\r\n  if (props.noheader == false) {\r\n    let listname = (list_doc.listname) ? list_doc.listname : \"<listname>\"; // \"Gillade recept\"\r\n    let user_in_header = (props.mine) ? \"\" : \"| \" + props.createdby.split(\"@\")[0];\r\n    header = <p className={classes.list_header}> {listname} <i>{user_in_header}</i> </p>;\r\n  }\r\n\r\n  let id = 5;\r\n\r\n  return (\r\n    <div style={{width: '100%'}}>\r\n      {header}\r\n      <div className={classes.listcontainer}>\r\n        {recipeContent}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  listcontainer: {\r\n    borderRadius: 20,\r\n    backgroundColor: '#f1f1f1',\r\n    marginBottom: 15,\r\n    minHeight: 50\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: '20px'\r\n  },\r\n  list_header: {\r\n    background: '#cab18e',\r\n    color: 'white',\r\n    padding: '3px 15px',\r\n    borderRadius: '5px'\r\n}\r\n});\r\n\r\nexport default ListContainer;\r\n","import React, {useState, useEffect, useCallback} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\n\r\nimport ListContainer from '../components/listcontainer';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\n// ********************************* */\r\n\r\n// a little function to help us with reordering the result\r\nconst reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n\r\n    return result;\r\n};\r\n\r\nlet grid = 15;\r\nconst getReicipeStyle = (isDragging, draggableStyle) => {\r\n\r\n  return {\r\n\r\n    userSelect: 'none',\r\n    margin: `0px 10px ${grid}px 0px`,\r\n    // background: isDragging ? 'lightgreen' : '#68bb8c', // 'lightgreen\r\n    borderRadius: 10,\r\n    width: '120px !important', // isDragging ? '50px !important' : '120px',\r\n    height: '120px !important', // isDragging ? '50px !important' : '120px',\r\n\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle\r\n}};\r\n\r\n\r\nconst getLikedListStyle = isDraggingOver => ({\r\n  background: isDraggingOver ? 'lightblue' : '#eeeeee',\r\n    background: '#eeeeee',\r\n    padding: grid,\r\n    width: '90%',\r\n    display: 'flex',\r\n    overflow: 'auto',\r\n    borderRadius: 12,\r\n});\r\n\r\nfunction DraggableRecipe(props) {\r\n\r\n  const classes = useStyles();\r\n  const recipe = props.recipe;\r\n\r\n  // SET IMAGE\r\n  let r_img = ( recipe.img !== undefined) ? recipe.img : 'temp_food1';\r\n  let img_src = ( recipe.img_url !== undefined) ? recipe.img_url : require('../assets/'+ r_img + '.jpg');\r\n  let image = <img src={img_src} className={classes.listimage} alt={recipe.title} alt={\"recipe img\"} />;\r\n\r\n  // RETURN JSX\r\n  return (\r\n    <React.Fragment>\r\n    {image}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nwindow.oncontextmenu = function(event) {\r\n     event.preventDefault();\r\n     event.stopPropagation();\r\n     return false;\r\n};\r\n\r\nfunction ListPage() {\r\n\r\n    const [listState, setlistState] = React.useState(undefined);\r\n    const [likes, setLikes] = React.useState(undefined);\r\n    const [recipes, setRecipes] = React.useState([]);\r\n    const [lists_by_user, setLists_by_user] = React.useState([]);\r\n    const [, updateState] = React.useState();\r\n    const forceUpdate = useCallback(() => updateState({}), []);\r\n    //const [isDragging, setisDragging] = React.useState(false);\r\n    // const [wasupdated, setwasupdated] = React.useState(false);\r\n\r\n    const store = useSelector(state => state.fireReducer);\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    // dragReducer\r\n    const dispatch = useDispatch(); // be able to dispatch\r\n\r\n    const dragDisp = (isDragging_val, draggableId_val = undefined) => {\r\n      dispatch({\r\n        type: \"SETISDRAGGING\",\r\n        isDragging: isDragging_val\r\n      })\r\n\r\n      dispatch({\r\n        type: \"SETDRAGGABLEID\",\r\n        draggableId: draggableId_val\r\n      })\r\n\r\n    }\r\n\r\n    let isDragging = false;\r\n\r\n\r\n    useEffect(() => {\r\n\r\n      if( !store.firestore_user) {\r\n        return;\r\n      }\r\n\r\n      let current_email = store.firestore_user.email;\r\n\r\n      // lists created by the user\r\n      getListDocsForUser(current_email, true).then((loadedDocs) => {\r\n        setLists_by_user(loadedDocs);\r\n      });\r\n\r\n      // lists likes for the user\r\n      getLikesDocsForUser(current_email).then((like_docs) => {\r\n\r\n        // if user has no liked recipes\r\n        if(!like_docs)\r\n          return;\r\n\r\n        setLikes(like_docs);\r\n\r\n        let liked_recipes_ids = like_docs.liked_recipes;\r\n        if ( liked_recipes_ids != undefined) {\r\n\r\n          let temp_recipes = [];\r\n          // previously liked recipes will persist in the firestore map but be false\r\n          Object.keys(liked_recipes_ids).forEach(function(key) {\r\n              if(liked_recipes_ids[key] === true)\r\n                temp_recipes.push(key)\r\n          });\r\n\r\n          recipe_fetcher(temp_recipes); // Object.keys(props.recipemap)\r\n        }\r\n\r\n      });\r\n\r\n    }, [store.firestore_user]);\r\n\r\n    let getLikesDocsForUser = function(current_email) {\r\n      return new Promise((resolve, reject) => {\r\n\r\n        let likesRef = store.db.collection('recipe_likes').doc(current_email);\r\n\r\n        likesRef.get().then(function(doc) {\r\n          let data = doc.data();\r\n          resolve(data);\r\n\r\n        });\r\n      });\r\n    }\r\n\r\n    // get list definitions\r\n    let getListDocsForUser = function(current_email, mine) {\r\n      return new Promise((resolve, reject) => {\r\n\r\n        let replaced_email = current_email.replace(/\\./g, ','); // replaces all dots\r\n        let listsRef = store.db.collection('recipe_lists').where('list_followers.' + replaced_email, '==', true);\r\n        let list_docs = [];\r\n\r\n        if (mine === true) {\r\n          listsRef = listsRef.where('created_by', '==', current_email);\r\n        }\r\n\r\n        let query = listsRef.get()\r\n          .then(snapshot => {\r\n\r\n            snapshot.forEach(doc => {\r\n\r\n              let data = doc.data();\r\n              // grab only lists of other users\r\n              if (mine === true || (mine === false && data.created_by != current_email)) {\r\n                data.id = doc.id;\r\n                list_docs.push(data);\r\n              }\r\n\r\n            });\r\n            resolve(list_docs);\r\n          })\r\n      });\r\n    }\r\n\r\n    // fetch by list of recipe ids\r\n    const recipe_fetcher = (recipe_id_list) => {\r\n\r\n      let temp_recipes = [];\r\n      let ref;\r\n      recipe_id_list.map( (recipe_id, idx) => {\r\n\r\n        ref = store.db.collection('recipes').doc(recipe_id);\r\n        ref.get().then(function(doc) {\r\n            if (doc.exists) {\r\n\r\n                let data = doc.data();\r\n                data.id = doc.id;\r\n                temp_recipes.push(data);\r\n                if (idx == recipe_id_list.length - 1) {\r\n                  setRecipes(temp_recipes);\r\n                  setlistState(temp_recipes);\r\n                }\r\n            }\r\n        }).catch(function(error) {\r\n            console.log(\"Error getting document:\", error);\r\n        });\r\n      })\r\n    }\r\n\r\n    const onDragStart = result => {\r\n\r\n      //setisDragging(true);\r\n      isDragging = true;\r\n\r\n      dragDisp(true, result.draggableId);\r\n    }\r\n\r\n    const onDragEnd = result => {\r\n        const { source, destination } = result;\r\n\r\n        // dropped outside the list\r\n        if (!destination) {\r\n            return;\r\n        }\r\n\r\n        // if added to list\r\n        if(destination.droppableId.substring(0, 4) === 'list') {\r\n\r\n          //listState.splice(source.index, 1); // remove from current list\r\n\r\n          //let listsRef = store.db.collection('recipe_lists').where('list_followers.' + replaced_email, '==', true);\r\n          // lists_by_user\r\n          let drop_id = result.destination.droppableId;\r\n          let list_index = drop_id.substring(drop_id.indexOf(\"_\")+1);\r\n\r\n          let list = lists_by_user[list_index];\r\n          let recipe_doc_id = result.draggableId;\r\n\r\n          let listsRef = store.db.collection('recipe_lists').doc(list.id);\r\n\r\n          listsRef.get().then(function(doc) {\r\n\r\n            let data = doc.data();\r\n            data.id = doc.id;\r\n            data.recipes[recipe_doc_id] = true; // add to list\r\n            store.db.collection(\"recipe_lists\").doc(doc.id).update(data).then(function(what) {\r\n              // history.go(0);\r\n            });\r\n\r\n            let updated_recipes = data.recipes[recipe_doc_id];\r\n            const nextState = lists_by_user.map(a => a.id === doc.id ? { ...a, [recipes]: updated_recipes } : a);\r\n            setLists_by_user(nextState);\r\n\r\n          });\r\n          }\r\n\r\n        //setisDragging(false);\r\n        isDragging = false;\r\n        dragDisp(false);\r\n\r\n        // if just reordered in same list\r\n        if (source.droppableId === destination.droppableId) {\r\n\r\n            const updated_items = reorder(\r\n                listState,\r\n                source.index,\r\n                destination.index\r\n            );\r\n\r\n            let temp_selected = updated_items;\r\n            setlistState(updated_items);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    let lists_by_user_jxs = lists_by_user.map((list_doc, i) =>\r\n      <Droppable key={\"list_\" + i} droppableId={\"list_\" + i} direction=\"horizontal\">\r\n          {(provided, snapshot) => {\r\n\r\n            return (\r\n              <div ref={provided.innerRef} >\r\n                <div\r\n                  style={getListStyle(snapshot.isDraggingOver)}\r\n                  className={isDragging ? null : classes.displayNone}>\r\n                    <p> {list_doc.listname} </p>\r\n                    <Spinner name=\"ball-scale-ripple\" color=\"white\" className={classes.spinner}/>\r\n                </div>\r\n\r\n                { !isDragging &&\r\n                <div>\r\n                    <ListContainer key={i}\r\n                       listdoc={list_doc}\r\n                       noheader={false} mine={true}\r\n                    />\r\n                </div>\r\n              }\r\n              </div>\r\n            );\r\n          }}\r\n      </Droppable>\r\n    );\r\n\r\n    //                  recipeDocs={list_doc.recipeDocs}\r\n    // className={isDragging ? classes.displayNone : null}\r\n\r\n    let starter_content = (<div>\r\n      <p> Du har inga gillade recept än</p>\r\n    </div>);\r\n\r\n    let loading_or_starting = (listState && listState.length < 1) ? starter_content : <p>spinner</p>;\r\n\r\n    return (listState && listState.length > 0) ? (\r\n      <div style={{margin: 10}}>\r\n        <h3>Gillade recept</h3>\r\n        <div>\r\n          {listState.map((item, index) => (\r\n            <DraggableRecipe recipe={item} key={index} className={classes.listimage}/>\r\n          ))}\r\n        </div>\r\n        <h3>Mina listor</h3>\r\n        <p>Kommer snart! 🥳 </p>\r\n      </div>\r\n    ) : <div><h3>Gillade recept</h3><p> Ledsen, du behöver logga in för att börja spara recept! 🍳 </p></div>;\r\n\r\n    /*\r\n    return (listState && listState.length > 0) ? (\r\n      <div style={{margin: 10}}>\r\n        <DragDropContext onDragEnd={onDragEnd} onDragStart={onDragStart}>\r\n\r\n            <h3>Gillade recept</h3>\r\n\r\n            <div className={classes.listDroppable}>\r\n                <Droppable droppableId=\"droppable\" direction=\"horizontal\">\r\n                    {(provided, snapshot) => (\r\n                        <div\r\n                            ref={provided.innerRef}\r\n                            style={getLikedListStyle(snapshot.isDraggingOver)}>\r\n                            {listState.map((item, index) => (\r\n                                <Draggable\r\n                                    key={item.id}\r\n                                    draggableId={item.id}\r\n                                    index={index}>\r\n                                    {(provided, snapshot) => (\r\n                                        <div\r\n                                            ref={provided.innerRef}\r\n                                            {...provided.draggableProps}\r\n                                            {...provided.dragHandleProps}\r\n                                            style={getReicipeStyle(\r\n                                                snapshot.isDragging,\r\n                                                provided.draggableProps\r\n                                                    .style\r\n                                            )}>\r\n                                            <DraggableRecipe recipe={item} isdragging={snapshot.isDragging}/>\r\n                                        </div>\r\n                                    )}\r\n                                </Draggable>\r\n                            ))}\r\n                            {provided.placeholder}\r\n                        </div>\r\n                    )}\r\n                </Droppable>\r\n            </div>\r\n\r\n\r\n        </DragDropContext>\r\n      </div>\r\n    ) : <div><h3>Gillade recept</h3><p> Ledsen, du behöver logga in för att börja spara recept! 🍳 </p></div>;\r\n    */\r\n}\r\n\r\n/*\r\n\r\n<h3>Mina listor</h3>\r\n\r\n  <div style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px', padding: '15px'}}\r\n       className=\"profilepageLists\"\r\n    >\r\n    {lists_by_user_jxs}\r\n  </div>\r\n\r\n<h3>Listor jag följer</h3>\r\n\r\n*/\r\n\r\nconst getListStyle = (isDraggingOver) => ({\r\n    background: isDraggingOver ? 'lightblue' : '#68bb8c', // '#eeeeee',\r\n    padding: grid,\r\n    width: '90%',\r\n    // display: 'flex',\r\n    overflow: 'auto',\r\n    borderRadius: 12,\r\n    height: '160px',\r\n    marginBottom: '10px',\r\n    textAlign: 'center',\r\n    fontSize: '18px',\r\n    color: 'white'\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  listDroppable: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    margin: 5\r\n  },\r\n  listimage: {\r\n    height: '120px',\r\n    width: '120px',\r\n    objectFit: 'cover',\r\n    borderRadius: 10,\r\n    margin: '5px'\r\n  },\r\n  draggingClass: {\r\n    height: '50px',\r\n    width: '50px',\r\n    objectFit: 'cover',\r\n    borderRadius: 10\r\n  },\r\n  spinner: {\r\n    color: 'white',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n    width: 'fit-content'\r\n  },\r\n  displayNone: {\r\n    display: 'none'\r\n  }\r\n});\r\n\r\n\r\n// Put the things into the DOM!\r\nexport default ListPage\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useParams} from \"react-router\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport 'firebase/auth';\r\n\r\nimport SimpleTabs from '../components/userpagetabs';\r\nimport RecipeGridList from '../components/recipegridlist';\r\nimport FollowerList from '../components/followerlist';\r\n// import FavoritePage from '../pages/favoritepage';\r\nimport ListPage from '../pages/listpage';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport userchef from '../assets/userchef.png';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\n// () =>\r\nfunction ProfilePage(props) {\r\n\r\n  const { username_url } = useParams();\r\n  // const [user, setUser] = useState(url_user); // props.match.params.url_user\r\n  const [user, setUser] = useState(undefined);\r\n  const [ifUser, setIfUser] = useState(false);\r\n  const [recipes, setRecipes] = useState(undefined);\r\n  //const [signedIn, setSignedIn] = useState(false);\n  const [followInfo, setFollowInfo] = useState([]);\n  const [followingInfo, setFollowingInfo] = useState([]);\n  const [following_this_user, setFollowing_this_user] = useState({following: false, email: \"\"});\n\n  const classes = useStyles();\n  const store = useSelector(state => state.fireReducer);\n  const history = useHistory();\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    // CLEAN UP - can be done better\r\n\r\n    recipeFetcher_new(username_url);\r\n\r\n    if(store.firestore_user && username_url === store.firestore_user.username) {\r\n\r\n      setIfUser(true)\r\n      followFetcher(username_url, store.firestore_user.email, \"followers\");\r\n      followFetcher(username_url, store.firestore_user.email, \"following\");\r\n    } else if ( store.firestore_user && username_url !== store.firestore_user.username ) {\r\n\r\n      getEmail(username_url) // fetches followers etc as well..\r\n      setIfUser(false)\r\n    }\r\n\r\n    // get email of user\r\n    email_promise(username_url).then((loadedDoc) => {\r\n\r\n      setUser(loadedDoc)\r\n    });\r\n\r\n  }, [store.firestore_user, username_url]);\r\n\r\n  var email_promise = function(url_username) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      store.db.collection('users').where('username', '==', url_username).get()\r\n        .then(snapshot => {\r\n\r\n          let doc_data;\r\n          snapshot.forEach(doc => {\r\n\r\n            doc_data = doc.data();\r\n          });\r\n          resolve(doc_data)\r\n        })\r\n    });\r\n  }\r\n\r\n  const followUser = () => {\r\n\r\n    let firebase_event_id = store.firestore_user.email + \"-follows-\" + following_this_user.email;\r\n\r\n    // in following, remove from following list\r\n    if(following_this_user.following) {\r\n      store.db.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\").doc(following_this_user.email).delete();\r\n      store.db.collection(\"followers\").doc(following_this_user.email).collection(\"followers\").doc(store.firestore_user.email).delete();\r\n      store.db.collection('events').doc(firebase_event_id).delete();\r\n\r\n    } else {\r\n      store.db.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\").doc(following_this_user.email).set({});\r\n      store.db.collection(\"followers\").doc(following_this_user.email).collection(\"followers\").doc(store.firestore_user.email).set({});\r\n\r\n      let date = new Date();\r\n\r\n      let event_follow_object = {\r\n        email: following_this_user.email,\r\n        event_image_url: store.firestore_user.profile_img_url,\r\n        other_username: store.firestore_user.username,\r\n        timestamp: date,\r\n        type: \"FOLLOWS\",\r\n        seen: false\r\n      };\r\n\r\n      store.db.collection('events').doc(firebase_event_id).set(event_follow_object);\r\n\r\n    }\r\n\r\n    setFollowing_this_user({following: !following_this_user.following, email: following_this_user.email});\r\n\r\n  }\r\n\r\n  // get email correspoding to username\r\n  function getEmail(url_user) {\r\n\r\n    // loop through all users to find email of user with this username\r\n    store.db.collection(\"users\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let doc_email = \"\";\r\n          if(doc.data().username === url_user) {\r\n            doc_email = doc.id;\r\n\r\n            followFetcher(username_url, doc_email, \"followers\");\r\n            followFetcher(username_url, doc_email, \"following\");\r\n          }\r\n\r\n          let found = false;\r\n          // check if user signed in is following the user of this profile page\r\n          store.db.collection(\"followers\").doc(store.firestore_user.email).collection(\"following\")\r\n          .onSnapshot(function(querySnapshot) {\r\n\r\n              querySnapshot.forEach( doc => {\r\n\r\n                if(doc.id === doc_email) {\r\n\r\n                  found = true;\r\n                  setFollowing_this_user({following: true, email: doc_email});\r\n                }\r\n              })\r\n          });\r\n\r\n          if(found === false && doc_email !== \"\") {\r\n            setFollowing_this_user({following: false, email: doc_email});\r\n          }\r\n\r\n        });\r\n\r\n    });\r\n  }\r\n\r\n  // get email of followers for the user profile in view\r\n  const followFetcher = (current_username, current_user_email, collection) => {\r\n\r\n    let follow_docs = [];\r\n\r\n    store.db.collection(\"followers\").doc(current_user_email).collection(collection)\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let data = {}; //  = doc.data(); // currently no other data\r\n          data.email = doc.id;\r\n          follow_docs.push(data);\r\n\r\n        })\r\n        followBuilder(current_username, follow_docs, collection);\r\n    });\r\n  }\r\n\r\n  // when all followers (emails) are collected\r\n  // function callback (current_username, follow_docs, collection) {\r\n  //  followBuilder(current_username, follow_docs, collection);\r\n  //}\r\n\r\n  // from emails, get further user info\r\n  const followBuilder = (current_username, follow_docs, collection) => {\r\n\r\n    let followers = [];\r\n    follow_docs.forEach((item, i) => {\r\n\r\n      store.db.collection(\"users\").doc(item.email)\r\n      .onSnapshot(function(doc) {\r\n          let data = doc.data();\r\n          followers.push({username: data.username, fullname: data.fullname, profile_img_url: data.profile_img_url, follows: false});\r\n      })\r\n    });\r\n\r\n    // callback2(followers, collection);\r\n    if(collection === \"followers\")\r\n      setFollowInfo(followers);\r\n    else if(collection === \"following\")\r\n      setFollowingInfo(followers);\r\n\r\n  }\r\n\r\n  /*\r\n  function callback2 (followers, collection) {\r\n\r\n    if(collection === \"followers\")\r\n      setFollowInfo(followers);\r\n    else if(collection === \"following\")\r\n      setFollowingInfo(followers);\r\n  } */\r\n\r\n\r\n  // fetch recipes for the user profile in view\r\n  const recipeFetcher_new = (current_username) => {\r\n    store.db.collection(\"recipes\")\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        let recipe_docs = [];\r\n        querySnapshot.forEach( doc => {\r\n\r\n          let data = doc.data();\r\n          if( data.user == current_username )\r\n          {\r\n            data.id = doc.id;\r\n            recipe_docs.push(data);\r\n          }\r\n        });\r\n        setRecipes(recipe_docs);\r\n    });\r\n  }\r\n\r\n  // fetch user correspoding to the url, compare to user signed in\r\n  /*\r\n  const userFetcher = () => {\r\n\r\n    // Create a reference to the cities collection\r\n    let usersRef = store.db.collection('users');\r\n\r\n    // Create a query against the collection\r\n    let queryRef = usersRef.where('username', '==', user);\r\n    let inSnapshot = false;\r\n\r\n    queryRef.onSnapshot(function(querySnapshot) {\r\n\r\n          inSnapshot = true;\r\n          querySnapshot.forEach( doc => {\r\n            let data = doc.data();\r\n\r\n            if(data.username === user) {\r\n              setIfUser(true);\r\n            }\r\n          });\r\n    });\r\n\r\n    if(inSnapshot === false)\r\n    {\r\n      setIfUser(false);\r\n    }\r\n  }\r\n  */\r\n  /*\r\n  <Button onClick={ () => firebase.auth().signOut()} variant=\"contained\" color=\"primary\">\r\n    Logga ut\r\n  </Button>\r\n  <button onClick={ () => firebase.auth().signOut() } name=\"signout\"> Logga ut </button>*/\r\n  let spinner_jsx = <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>;\r\n  let recipeContent = (recipes != undefined) ? <RecipeGridList recipes={recipes}/> : spinner_jsx;\r\n\r\n  let followBtn;\r\n  if (store.firestore_user && !ifUser && following_this_user.following == true) {\r\n\r\n    followBtn = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<RemoveIcon />}\r\n      onClick={() => followUser()}\r\n    >\r\n      Sluta följ\r\n    </Button>);\r\n\r\n  } else if (store.firestore_user && !ifUser) {\r\n\r\n    followBtn = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<AddIcon />}\r\n      onClick={() => followUser()}\r\n    >\r\n      Följ\r\n    </Button>);\r\n  }\r\n\r\n  // let followBtn =\r\n\r\n  let uni = (store.firestore_user != undefined) ? store.firestore_user.university : undefined;\r\n  let fullname = (store.firestore_user != undefined) ? store.firestore_user.fullname : undefined;\r\n  //let img_src = (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : userchef;\r\n\r\n  let img_src = userchef; // default user image\r\n  if (ifUser && store.firestore_user && store.firestore_user.profile_img_url) {\r\n    img_src = store.firestore_user.profile_img_url; // page shows profile for this user\r\n  } else if (!ifUser && user && user.profile_img_url) {\r\n    img_src = user.profile_img_url\r\n  }\r\n\r\n  return (\r\n\r\n    <React.Fragment>\r\n\r\n      <Grid\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n        className={classes.userinfo}\r\n      >\r\n\r\n        <Grid item xs={6}>\r\n          <span className={classes.username}>{username_url}</span>\r\n\r\n          { user != undefined &&\r\n            <span className={classes.university}> | {user.fullname}</span>\r\n          }\r\n\r\n          { (user != undefined && user.university != \"\") &&\r\n            <p className={classes.university}>🎓{user.university}</p>\r\n          }\r\n\r\n          { (user != undefined && user.bio != undefined ) &&\r\n            <p className={classes.bio}><i>{user.bio}</i></p>\r\n          }\r\n\r\n          <br/>\r\n\r\n          {ifUser && <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<SettingsIcon />}\r\n            onClick={() => history.push(\"/settings\")}\r\n\r\n          >\r\n            Inställningar\r\n          </Button>}\r\n          {followBtn}\r\n        </Grid>\r\n        <Grid item xs={3}>\r\n          <img src={img_src} alt=\"user-profile-img\"/>\r\n        </Grid>\r\n\r\n      </Grid>\r\n\r\n      <SimpleTabs value={0}>\r\n        <div style={{paddingTop: '15px'}}>\r\n        { recipeContent }\r\n        </div>\r\n        <div>\r\n        <ListPage/>\r\n        </div>\r\n        <div>\r\n        <FollowerList followerData={followInfo} showFollowIcon={true}/>\r\n        </div>\r\n        <div>\r\n        <FollowerList followerData={followingInfo} showFollowIcon={true}/>\r\n        </div>\r\n      </SimpleTabs>\r\n\r\n   </React.Fragment>\r\n\r\n  );\r\n// followInfo.length > 0 &&\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  userinfo: {\r\n   marginBottom: '20px',\r\n },\r\n spinner: {\r\n   display: 'flex',\r\n   justifyContent: 'center',\r\n   marginTop: 100\r\n },\r\n username: {\r\n   fontWeight: 'bold',\r\n   margin: '10px 0px'\r\n },\r\n university: {\r\n   margin: '10px 0px'\r\n },\r\n bio: {\r\n   fontSize: '13px',\r\n   maxWidth: '300px'\r\n }\r\n});\r\n\r\n\r\nexport default ProfilePage;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction LoadSpinner(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.spinner}>\r\n      <Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\nexport default LoadSpinner;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useSelector } from \"react-redux\";\r\n\r\n// import '../style/GlobalCssButton.css';\r\n// import * as ui from '../meterialuiimports';\r\nimport LoadSpinner from '../components/loadspinner';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport FolderIcon from '@material-ui/icons/Folder';\r\nimport ForwardIcon from '@material-ui/icons/Forward';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\n\r\n// var Spinner = require('react-spinkit');\r\n\r\nfunction generate(element) {\r\n  return [0, 1, 2].map(value =>\r\n    React.cloneElement(element, {\r\n      key: value,\r\n    }),\r\n  );\r\n}\r\n\r\n/*\r\n\r\n<ListItemText\r\n  primary= { props.user + \" följer nu dig\" }\r\n  secondary={true ? props.time : null}\r\n/>*/\r\n\r\nconst B = (props) => <span style={{fontWeight: 'bold'}}>{props.children}</span>\r\n\r\n\r\nfunction NoticeListItem(props) {\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  let noticeText;\r\n\r\n  const userClick = () => {\r\n    history.push(\"/profile/\" + props.user );\r\n  };\r\n\r\n  const recipeClick = () => {\r\n\r\n    // let recipe_title = props.recipe.substring(0, props.recipe.indexOf(\"-\"));\r\n    history.push(\"/recipe/\" + recipe_id_to_title(props.recipe) + \"/\" + props.recipe );\r\n  };\r\n\r\n  const recipe_id_to_title = (recipe_id) => {\r\n    let recipe_title = props.recipe.substring(0, props.recipe.indexOf(\"-\"));\r\n    return recipe_title;\r\n  }\r\n\r\n  switch (props.type) {\r\n    case \"FOLLOWS\":\r\n      noticeText = <div>\r\n                   <span className={classes.pointer} onClick={userClick}><B>{props.user}</B></span>\r\n                   <span> följer nu dig. </span>\r\n                   </div>;\r\n      break;\r\n    case \"TIPS\":\r\n      noticeText = <div>\r\n                  <span className={classes.pointer} onClick={userClick}><B>{props.user}</B></span>\r\n                  <span> tipsar dig om att laga </span>\r\n                  <span className={classes.pointer} onClick={recipeClick}><B>{recipe_id_to_title(props.recipe)}</B>.</span>\r\n                  </div>;\r\n      break;\r\n    case \"TESTED\":\r\n      noticeText = <div>\r\n                    <span className={classes.pointer} onClick={userClick}><B>{props.user}</B></span>\r\n                    <span> har testat ditt recept </span>\r\n                    <span className={classes.pointer} onClick={recipeClick}><B>{recipe_id_to_title(props.recipe)}</B>.</span>\r\n                  </div>;\r\n    default:\r\n\r\n  }\r\n\r\n  // if(props.type === \"FOLLOWS\")\r\n  //  noticeText = <span><B>{props.user}</B> följer nu dig.</span>;\r\n\r\n\r\n  let user_avatar = undefined;\r\n\r\n  if(props.eventimg != undefined) {\r\n    user_avatar = <img src={props.eventimg} className={classes.smallprofileimage + ' ' + classes.pointer } alt={\"profile-img\"} />; //\r\n  } else {\r\n    user_avatar = (\r\n      <Avatar>\r\n          <PersonIcon />\r\n      </Avatar>\r\n    );\r\n  }\r\n  /*\r\n  user_avatar = (\r\n    <Avatar>\r\n        <PersonIcon />\r\n    </Avatar>\r\n  ); */\r\n\r\n  return (\r\n\r\n    <ListItem>\r\n      <ListItemAvatar>\r\n        {user_avatar}\r\n      </ListItemAvatar>\r\n\r\n      <ListItemText\r\n        primary= { noticeText }\r\n        secondary={true ? props.time : null}\r\n      />\r\n\r\n\r\n    </ListItem>\r\n\r\n  );\r\n\r\n  /*\r\n\r\n  <ListItemSecondaryAction>\r\n    <IconButton edge=\"end\" aria-label=\"delete\">\r\n      <ForwardIcon />\r\n    </IconButton>\r\n  </ListItemSecondaryAction>\r\n\r\n  */\r\n\r\n}\r\n\r\nfunction NoticePage(props) {\r\n\r\n  const [eventList, setEventList] = useState(undefined);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    if(store.firestore_user === undefined) {\r\n      setEventList([]);\r\n      return;\r\n    }\r\n\r\n    // get email of user\r\n    events_promise(store.firestore_user.email).then((loadedDocs) => {\r\n      setEventList(loadedDocs);\r\n      //setUser(loadedDoc)\r\n    });\r\n\r\n  }, [store.firestore_user]);\r\n\r\n  var events_promise = function(email) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      store.db.collection('events').where('email', '==', email).get()\r\n        .then(snapshot => {\r\n\r\n          let doc_data = [];\r\n          snapshot.forEach(doc => {\r\n            let temp_data = doc.data();\r\n            doc_data.push(temp_data);\r\n          });\r\n\r\n          resolve(doc_data)\r\n        })\r\n    });\r\n  }\r\n\r\n  let spinnerjsx = <LoadSpinner/> // <div className={classes.spinner}><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>;\r\n  let eventListjsx = (eventList) ? eventList.map( (event, idx) =>\r\n    <NoticeListItem key={idx} type={event.type} user={event.other_username} recipe={event.recipe || undefined} time=\"\" eventimg={event.event_image_url}/>\r\n  ) : spinnerjsx;\r\n\r\n  /*\r\n  { !eventList &&\r\n    <div className={classes.spinner}><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div>\r\n  }\r\n  */\r\n\r\n  return (\r\n\r\n    <div>\r\n    <h3>Dina notiser</h3>\r\n\r\n\r\n\r\n    { (true || eventList) &&\r\n      <List dense={true}>\r\n        {eventListjsx}\r\n      </List>\r\n    }\r\n    { (eventList && eventList.length < 1) &&\r\n      <p> Ledsen, inga händelser än. Börja interagera med dina kockvänner! 🍳 </p>\r\n    }\r\n\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  smallprofileimage: {\r\n    width: '40px'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  },\r\n  pointer: {\r\n   cursor: 'pointer'\r\n  }\r\n});\r\n\r\n/*\r\n\r\n<List dense={true}>\r\n  <NoticeListItem type=\"FOLLOWS\" user=\"Vegokocken\" time=\"1 h\"/>\r\n  <NoticeListItem type=\"TIPS\" user=\"DelicatoKing\" recipe=\"Linsgryta\" time=\"3 h\"/>\r\n  <NoticeListItem type=\"TESTED\" user=\"PastaMaster\" recipe=\"Korvstroganoff\" time=\"2 dgr\"/>\r\n</List>\r\n\r\n*/\r\n\r\n\r\n/*\r\n\r\n<ListItem>\r\n  <ListItemAvatar>\r\n    <Avatar>\r\n        <PersonIcon />\r\n    </Avatar>\r\n  </ListItemAvatar>\r\n  <ListItemText\r\n    primary=\"Single-line item\"\r\n    secondary={true ? 'Secondary text' : null}\r\n  />\r\n  <ListItemSecondaryAction>\r\n    <IconButton edge=\"end\" aria-label=\"delete\">\r\n      <ForwardIcon />\r\n    </IconButton>\r\n  </ListItemSecondaryAction>\r\n</ListItem>\r\n\r\n*/\r\n\r\n\r\nexport default NoticePage;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport firebase from 'firebase/app';\r\n// import _ from 'underscore';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\nimport ListContainer from '../components/listcontainer';\r\n\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nfunction FavoritePage(props) {\r\n\r\n  const [lists, setLists] = React.useState([]);\r\n  const [lists_by_user, setLists_by_user] = React.useState([]);\r\n  const [likes, setLikes] = React.useState(undefined);\r\n\r\n  const [myLists, setMyLists] = React.useState({});\r\n  const [refList, setRefList] = React.useState([]);\r\n\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  useEffect(() => {\r\n\r\n    if( !( props.otheruser || store.firestore_user))\r\n      return;\r\n\r\n    let current_email = (props.otheruser) ? props.otheruser.email : store.firestore_user.email;\r\n\r\n    // lists the user follows\r\n    getListDocsForUser(current_email, false).then((loadedDocs) => {\r\n      setLists(loadedDocs);\r\n    });\r\n\r\n    // lists created by the user\r\n    getListDocsForUser(current_email, true).then((loadedDocs) => {\r\n      setLists_by_user(loadedDocs);\r\n    });\r\n\r\n    // lists likes for the user\r\n    getLikesDocsForUser(current_email).then((loadedDoc) => {\r\n      setLikes(loadedDoc); \r\n    });\r\n\r\n  }, [store.firestore_user]);\r\n\r\n  let getListDocsForUser = function(current_email, mine) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let replaced_email = current_email.replace(/\\./g, ','); // replaces all dots\r\n      let listsRef = store.db.collection('recipe_lists').where('list_followers.' + replaced_email, '==', true);\r\n      let list_docs = [];\r\n\r\n      if (mine === true) {\r\n        listsRef = listsRef.where('created_by', '==', current_email);\r\n      }\r\n\r\n      let query = listsRef.get()\r\n        .then(snapshot => {\r\n\r\n          snapshot.forEach(doc => {\r\n\r\n            let data = doc.data();\r\n            // grab only lists of other users\r\n            if (mine === true || (mine === false && data.created_by != current_email)) {\r\n              list_docs.push(data);\r\n            }\r\n\r\n          });\r\n          resolve(list_docs);\r\n        })\r\n    });\r\n  }\r\n\r\n  // fix not found\r\n  let getLikesDocsForUser = function(current_email) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let likesRef = store.db.collection('recipe_likes').doc(current_email);\r\n\r\n      likesRef.get().then(function(doc) {\r\n        let data = doc.data();\r\n        //data.id = doc.id;\r\n        resolve(data);\r\n      });\r\n    });\r\n  }\r\n\r\n  const onDragEnd = result => {\r\n      const { source, destination } = result;\r\n\r\n  }\r\n\r\n  // build jsx for lists this user follows\r\n  let lists_jxs = lists.map((item, i) =>\r\n    <ListContainer key={i} recipemap={item.recipes} listname={item.listname} createdby={item.created_by} noheader={false}/>\r\n  );\r\n\r\n  // build jsx for lists this user has created\r\n  let lists_by_user_jxs = lists_by_user.map((item, i) =>\r\n    <ListContainer key={i} recipemap={item.recipes} listname={item.listname} createdby={item.created_by} noheader={false} mine={true}/>\r\n  );\r\n\r\n  let likes_by_user_jxs = (likes != undefined) ? <ListContainer recipemap={likes.liked_recipes} noheader={true}/> : undefined;\r\n\r\n  // if user profile view, this prop will be available\r\n  let no_lists_text = (props.otheruser) ? props.otheruser + \" har ännu inga sparade listor\" : \"Inga sparade listor ännu\";\r\n  let liked_list_jsx = (refList.length >= 1) ? <ListContainer refs={refList} noheader={true}/> : <p> Gillade recept.. </p>\r\n\r\n  // <p> - kanske listor som <i>billig vecka, bra matlådemat</i> eller <i>att prova</i> ? </p>\r\n  // <p> Här kommer du se de listor skapade av andra använder som du följer 🍴💎 </p>\r\n  // { lists_I_follow.length < 1 && <p> {no_lists_text} </p>}\r\n // .body .MuiGridList-root\r\n\r\n const getListStyle = isDraggingOver => ({\r\n     background: isDraggingOver ? 'lightblue' : '#eeeeee',\r\n     padding: 8,\r\n     width: '90%',\r\n     display: 'flex',\r\n     overflow: 'auto',\r\n     borderRadius: 12,\r\n });\r\n\r\n  return (\r\n\r\n    <div>\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <Droppable droppableId=\"list_test2\" direction=\"horizontal\">\r\n          {(provided, snapshot) => (\r\n              <div\r\n                  ref={provided.innerRef}\r\n                  style={getListStyle(snapshot.isDraggingOver)}>\r\n                  {provided.placeholder}\r\n              </div>\r\n          )}\r\n      </Droppable>\r\n    { !props.otheruser &&\r\n\r\n      <ExpansionPanel style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px'}}\r\n        defaultExpanded={true}>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography style={{fontWeight: 'bold'}}> Gillade recept</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails>\r\n\r\n          {likes_by_user_jxs}\r\n\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n\r\n    }\r\n    { !props.otheruser && <h3>Listor</h3> }\r\n\r\n    { props.otheruser &&\r\n\r\n      <div style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px', padding: '15px'}}\r\n           className=\"profilepageLists\"\r\n        >\r\n        {lists_by_user_jxs}\r\n      </div>\r\n\r\n    }\r\n    { !props.otheruser &&\r\n    <ExpansionPanel style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px'}}>\r\n      <ExpansionPanelSummary\r\n        expandIcon={<ExpandMoreIcon />}\r\n        aria-controls=\"panel1a-content\"\r\n        id=\"panel1a-header\"\r\n      >\r\n        <Typography style={{fontWeight: 'bold'}}> Dina listor</Typography>\r\n      </ExpansionPanelSummary>\r\n      <ExpansionPanelDetails>\r\n\r\n        {lists_by_user_jxs}\r\n\r\n      </ExpansionPanelDetails>\r\n    </ExpansionPanel>\r\n    }\r\n    { !props.otheruser &&\r\n\r\n      <ExpansionPanel style={{background: '#f1f1f1', marginTop: '8px', borderRadius: '15px'}}>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography style={{fontWeight: 'bold'}}> Listor du följer</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails>\r\n\r\n          {lists_jxs}\r\n\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n\r\n    }\r\n    </DragDropContext>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default FavoritePage;\r\n","import React from \"react\";\r\n\r\nconst noop = () => {};\r\n\r\nconst FileInput = ({ value, onChange = noop, ...rest }) => (\r\n  <div>\r\n    {Boolean(value.length) && (\r\n      <div>Selected files: {value.map(f => f.name).join(\", \")}</div>\r\n    )}\r\n    <label style={{\r\n\r\n      padding: '6px 16px',\r\n      fontSize: '0.875rem',\r\n      minWidth: '64px',\r\n      boxSizing: 'border-box',\r\n      transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n      fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n      fontWeight: '500',\r\n      lineHeight: '1.75',\r\n      borderRadius: '4px',\r\n      letterSpacing: '0.02857em',\r\n      backgroundColor: '#3f51b5',\r\n      color: 'white',\r\n      boxShadow: '0px 3px 1px -2px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 1px 5px 0px rgba(0,0,0,0.12)'\r\n\r\n    }}>\r\n\r\n     Välj bild\r\n\r\n      <input\r\n        {...rest}\r\n        style={{ display: \"none\" }}\r\n        type=\"file\"\r\n        onChange={e => {\r\n          onChange([...e.target.files]);\r\n        }}\r\n      />\r\n    </label>\r\n  </div>\r\n);\r\n\r\n/*\r\n\r\n<Button\r\n  variant=\"contained\"\r\n  color=\"primary\"\r\n  startIcon={<PhotoCamera />}\r\n  style={{ textTransform: 'unset' }}\r\n>\r\n  Välj bild\r\n</Button>\r\n\r\n*/\r\n\r\nexport default FileInput;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nfunction ValidCheck(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid item xs={props.xs}>\r\n    <FormControlLabel disabled\r\n      control={\r\n        <Checkbox\r\n          checked={props.checked}\r\n          color= \"primary\"\r\n          className= {classes.nomargin}\r\n        />}\r\n    />\r\n    </Grid>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  nomargin: {\r\n    margin: 0,\r\n    color: '#68BB8C !important'\r\n  }\r\n});\r\n\r\nexport default ValidCheck;\r\n","\r\nimport React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n//import { withStyles } from '@material-ui/core/styles';\r\n//import { createMuiTheme, makeStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport '../style/GlobalCssButton.css';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\n\r\nfunction DescriptionList(props) {\r\n\r\n  const [editObject, setEditObject] = useState(undefined);\r\n  const [order, setOrder] = useState(-2);\r\n  const [text, setText] = useState(\"\");\r\n\r\n  const [descriptions, setDescriptions] = useState(() => initiate_descriptions());\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n\r\n  const ingredientsDisp = () => {\r\n    dispatch({\r\n      type: \"SETDESCRIPTIONS\",\r\n      descriptions: descriptions\r\n    })\r\n  }\r\n\r\n  function initiate_descriptions() {\r\n    return (props.description !== undefined) ? props.description : [];\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    let existing_descriptions = upload_store.descriptions;  // in in edit mode\r\n    if(existing_descriptions !== undefined)\r\n    {\r\n      setDescriptions(existing_descriptions);\r\n    }\r\n\r\n  }, []);\r\n\r\n\r\n  const addDescription = () => {\r\n\r\n    let temp_list = descriptions.slice(0);\r\n    let new_obj = {order: descriptions.length + 1, text: \"\"};\r\n    temp_list.push(new_obj);\r\n    setEditObject(new_obj);\r\n    setDescriptions(temp_list);\r\n\r\n    setOrder(descriptions.length + 1);\r\n    ingredientsDisp();\r\n  }\r\n\r\n  const removeDescription = () => {\r\n\r\n    let temp_list = descriptions.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n    temp_list.splice(ind, 1);\r\n\r\n    setDescriptions(temp_list);\r\n    setEditObject(undefined);\r\n\r\n    setText(\"\");\r\n    setOrder(-321); //\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const listClick = (object) => {\r\n\r\n    setEditObject(object);\r\n\r\n    // first letter to toUpperCase\r\n    object.text = (object.text.length > 0) ? object.text[0].toUpperCase() + object.text.slice(1) : \"\";\r\n\r\n    setText(object.text);\r\n    // setOrder(object.order);\r\n\r\n  }\r\n\r\n  const saveEdited = () => {\r\n\r\n\r\n    let temp_list = descriptions.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n\r\n    let obj_copy = editObject;\r\n    obj_copy.text = (text.length > 0) ? text[0].toUpperCase() + text.slice(1) : \"\";\r\n    //obj_copy.text = text[0].toUpperCase() + text.slice(1);\r\n    // obj_copy.order = order;\r\n\r\n    temp_list[ind] = obj_copy;\r\n\r\n    if(text.length < 1) {\r\n      console.log(\"not relevant to save\")\r\n    }\r\n\r\n    setDescriptions(temp_list);\r\n\r\n    setEditObject(undefined);\r\n    setText(\"\");\r\n    setOrder(-123)\r\n\r\n    props.handleAdd(temp_list.length);\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const enterPress = (ev) => {\r\n\r\n    if (ev.key === 'Enter') {\r\n\r\n      saveEdited();\r\n      ev.preventDefault();\r\n    }\r\n\r\n  }\r\n\r\n  // let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n  // idx < ingredients.length - 1\r\n\r\n\r\n  let descriptionjsx = descriptions.map((desc, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem onClick={() => listClick(desc)} className={(descriptions.indexOf(editObject) === idx ? 'testis' : '')} style={{minHeight: 40}}>\r\n      <ListItemText\r\n        primary={ desc.order + \". \" + desc.text }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < descriptions.length - 1 && <Divider component=\"li\" /> }\r\n\r\n  </React.Fragment>\r\n  );\r\n\r\n\r\n\r\n  return (\r\n    <div >\r\n\r\n      <Grid className=\"test\"\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n      <Grid item xs={12}>\r\n        <List dense={true} className={classes.ingredientslist}>\r\n\r\n          {descriptionjsx}\r\n\r\n          { editObject === undefined &&\r\n\r\n            <ListItem alignItems=\"center\" onClick={() => addDescription()} className={classes.newListItem}>\r\n              <ListItemText\r\n                primary=\"Lägg till beskrivning\"\r\n              />\r\n            </ListItem>\r\n          }\r\n\r\n\r\n        </List>\r\n      </Grid>\r\n\r\n      { (editObject !== undefined  ) &&\r\n\r\n        <React.Fragment>\r\n\r\n        <Grid item xs={10}>\r\n          <TextField variant=\"outlined\" label=\"steg\" InputLabelProps={{shrink: true}} value={text} onChange={ event => setText(event.target.value)} onKeyPress={(ev) => enterPress(ev)}/>\r\n        </Grid>\r\n\r\n        <Grid item xs={1}>\r\n          <SaveIcon onClick={saveEdited} className={classes.greenicon} />\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <DeleteForeverIcon onClick={removeDescription} className={classes.redicon} />\r\n        </Grid>\r\n\r\n        </React.Fragment>\r\n\r\n      }\r\n\r\n      </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n// .toLowerCase()\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#3f51b5',\r\n    color: 'white',\r\n    borderRadius: '5px',\r\n    width: '200px'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  }\r\n}));\r\n\r\nexport default DescriptionList;\r\n","\r\nimport React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n//import { withStyles } from '@material-ui/core/styles';\r\n//import { createMuiTheme, makeStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport '../style/GlobalCssButton.css';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\n\r\nfunction IngredientsList(props) {\r\n\r\n  const [editObject, setEditObject] = useState(undefined);\r\n  const [quantity, setQuantity] = useState(\"\");\r\n  const [measure, setMeasure] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [ingredients, setIngredients] = useState(() => initiate_ingredients());\r\n  const classes = useStyles();\r\n\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n\r\n  const ingredientsDisp = () => {\r\n    dispatch({\r\n      type: \"SETINGREDIENTS\",\r\n      ingredients: ingredients\r\n    })\r\n  }\r\n\r\n  function initiate_ingredients() {\r\n    let temp_ingredients = [\r\n    {name: \"mjöl (default data)\", quantity: \"2\", measure: \"dl\"},\r\n    {name: \"salt\", quantity: \"1\", measure: \"tsk\"},\r\n    {name: \"mjölk\", quantity: \"4\", measure: \"dl\"},\r\n    {name: \"ägg\", quantity: \"2\", measure: \"\"}\r\n    ];\r\n\r\n    temp_ingredients = [];\r\n\r\n    return (props.ingredients !== undefined) ? props.ingredients : temp_ingredients;\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    let temp_ingredients = upload_store.ingredients;\r\n    if(temp_ingredients !== undefined)\r\n    {\r\n      setIngredients(temp_ingredients);\r\n      // props.handleAdd(temp_ingredients.length);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const addIngredient = () => {\r\n\r\n    let temp_list = ingredients.slice(0);\r\n    let new_obj = {name: \"\", quantity: \"\", measure: \"\"};\r\n    temp_list.push(new_obj);\r\n    setEditObject(new_obj);\r\n    setIngredients(temp_list);\r\n\r\n    ingredientsDisp();\r\n  }\r\n\r\n  const removeIngredient = () => {\r\n\r\n    let temp_list = ingredients.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n    temp_list.splice(ind, 1);\r\n\r\n    setIngredients(temp_list);\r\n    setEditObject(undefined);\r\n\r\n    setQuantity(\"\");\r\n    setMeasure(\"\");\r\n    setName(\"\");\r\n\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const listClick = (object) => {\r\n\r\n    setEditObject(object);\r\n\r\n    setQuantity(object.quantity);\r\n    setMeasure(object.measure);\r\n    setName(object.name);\r\n  }\r\n\r\n  const saveEdited = () => {\r\n\r\n    let temp_list = ingredients.slice(0);\r\n    let ind = temp_list.indexOf(editObject);\r\n\r\n    let obj_copy = editObject;\r\n    obj_copy.quantity = quantity;\r\n    obj_copy.measure = measure;\r\n    obj_copy.name = name;\r\n\r\n    temp_list[ind] = obj_copy;\r\n\r\n    setIngredients(temp_list);\r\n\r\n    setEditObject(undefined);\r\n    setQuantity(\"\");\r\n    setMeasure(\"\");\r\n    setName(\"\");\r\n\r\n    props.handleAdd(temp_list.length);\r\n\r\n    ingredientsDisp();\r\n\r\n  }\r\n\r\n  const enterPress = (ev) => {\r\n\r\n    if (ev.key === 'Enter') {\r\n      saveEdited();\r\n      ev.preventDefault();\r\n    }\r\n\r\n  }\r\n\r\n  // let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n  // idx < ingredients.length - 1\r\n\r\n  let ingredientsjsx = ingredients.map((ingred, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem onClick={() => listClick(ingred)} className={(ingredients.indexOf(editObject) === idx ? 'testis' : '')} style={{minHeight: 40}}>\r\n      <ListItemText\r\n        primary={ ingred.quantity + \" \" + ingred.measure + \" \" + ingred.name }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < ingredients.length - 1 && <Divider component=\"li\" /> }\r\n\r\n  </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n\r\n      <Grid className=\"test\"\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n      <Grid item xs={12}>\r\n        <List dense={true} className={classes.ingredientslist}>\r\n\r\n          {ingredientsjsx}\r\n\r\n          { editObject === undefined &&\r\n\r\n            <ListItem alignItems=\"center\" onClick={() => addIngredient()} className={classes.newListItem}>\r\n              <ListItemText\r\n                primary=\"Lägg till ingrediens\"\r\n              />\r\n            </ListItem>\r\n          }\r\n\r\n        </List>\r\n      </Grid>\r\n\r\n      { (editObject !== undefined  ) &&\r\n\r\n        <React.Fragment>\r\n\r\n        <Grid item xs={3}>\r\n          <TextField required variant=\"outlined\" label=\"mängd\" InputLabelProps={{shrink: true}} value={quantity} onChange={ event => setQuantity(event.target.value.toLowerCase())}/>\r\n        </Grid>\r\n        <Grid item xs={2}>\r\n          <TextField variant=\"outlined\" label=\"mått\" InputLabelProps={{shrink: true}} value={measure} onChange={ event => setMeasure(event.target.value.toLowerCase())}/>\r\n        </Grid>\r\n        <Grid item xs={5}>\r\n          <TextField required variant=\"outlined\" label=\"ingrediens\" InputLabelProps={{shrink: true}} value={name} onChange={ event => setName(event.target.value.toLowerCase())} onKeyPress={(ev) => enterPress(ev)}/>\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <CheckCircleIcon onClick={saveEdited} className={classes.greenicon} />\r\n        </Grid>\r\n        <Grid item xs={1}>\r\n          <DeleteForeverIcon onClick={removeIngredient} className={classes.redicon} />\r\n        </Grid>\r\n\r\n        </React.Fragment>\r\n\r\n      }\r\n\r\n      </Grid>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#3f51b5',\r\n    color: 'white',\r\n    borderRadius: '5px',\r\n    width: '200px'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  }\r\n}));\r\n\r\nexport default IngredientsList;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport purple from '@material-ui/core/colors/purple';\r\nimport green from '@material-ui/core/colors/green';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: purple,\r\n    secondary: green,\r\n  },\r\n  status: {\r\n    danger: 'orange',\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 345,\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    backgroundColor: red[500],\r\n  },\r\n}));\r\n\r\nexport default function RecipeReviewCard() {\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = React.useState(false);\r\n\r\n  const handleExpandClick = () => {\r\n    setExpanded(!expanded);\r\n  };\r\n\r\n  let r_img = 'temp_food1';\r\n  let img_src = require('../assets/'+ r_img + '.jpg');\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\r\n            R\r\n          </Avatar>\r\n        }\r\n        action={\r\n          <IconButton aria-label=\"settings\">\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        }\r\n        title=\"Shrimp and Chorizo Paella\"\r\n        subheader=\"September 14, 2016\"\r\n      />\r\n      <CardMedia\r\n        className={classes.media}\r\n        image={img_src}\r\n        title=\"Paella dish\"\r\n      />\r\n      <CardContent>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          This impressive paella is a perfect party dish and a fun meal to cook together with your\r\n          guests. Add 1 cup of frozen peas along with the mussels, if you like.\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions disableSpacing>\r\n        <IconButton aria-label=\"add to favorites\">\r\n          <FavoriteIcon />\r\n        </IconButton>\r\n        <IconButton aria-label=\"share\">\r\n          <ShareIcon />\r\n        </IconButton>\r\n        <IconButton\r\n          className={clsx(classes.expand, {\r\n            [classes.expandOpen]: expanded,\r\n          })}\r\n          onClick={handleExpandClick}\r\n          aria-expanded={expanded}\r\n          aria-label=\"show more\"\r\n        >\r\n          <ExpandMoreIcon />\r\n        </IconButton>\r\n      </CardActions>\r\n      <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n        <CardContent>\r\n          <Typography paragraph>Method:</Typography>\r\n          <Typography paragraph>\r\n            Heat 1/2 cup of the broth in a pot until simmering, add saffron and set aside for 10\r\n            minutes.\r\n          </Typography>\r\n          <Typography paragraph>\r\n            Heat oil in a (14- to 16-inch) paella pan or a large, deep skillet over medium-high\r\n            heat. Add chicken, shrimp and chorizo, and cook, stirring occasionally until lightly\r\n            browned, 6 to 8 minutes. Transfer shrimp to a large plate and set aside, leaving chicken\r\n            and chorizo in the pan. Add pimentón, bay leaves, garlic, tomatoes, onion, salt and\r\n            pepper, and cook, stirring often until thickened and fragrant, about 10 minutes. Add\r\n            saffron broth and remaining 4 1/2 cups chicken broth; bring to a boil.\r\n          </Typography>\r\n          <Typography paragraph>\r\n            Add rice and stir very gently to distribute. Top with artichokes and peppers, and cook\r\n            without stirring, until most of the liquid is absorbed, 15 to 18 minutes. Reduce heat to\r\n            medium-low, add reserved shrimp and mussels, tucking them down into the rice, and cook\r\n            again without stirring, until mussels have opened and rice is just tender, 5 to 7\r\n            minutes more. (Discard any mussels that don’t open.)\r\n          </Typography>\r\n          <Typography>\r\n            Set aside off of the heat to let rest for 10 minutes, and then serve.\r\n          </Typography>\r\n        </CardContent>\r\n      </Collapse>\r\n    </Card>\r\n  );\r\n}\r\n","/*\r\n\r\nComponent: Page where recipes are uplaoded or edited.\r\nTODO: refactor - a lot of code right now!\r\nTODO: it should be possible to reorder ingredients (use Draggable?)\r\nTODO: let the user add extra information, as time to cook or num portions\r\n\r\n*/\r\n\r\nimport React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles, withStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport firebase from 'firebase'; // 'firebase/app';\r\n\r\nimport '../style/GlobalCssButton.css';\r\nimport FileInput from '../components/fileinput';\r\nimport ValidCheck from '../components/validcheck';\r\nimport DescriptionList from '../components/descriptionlist';\r\nimport IngredientsList from '../components/ingredientslist';\r\nimport theme from '../theme';\r\n\r\nimport RecipeCard from '../components/RecipeCard';\r\n\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction UploadPage(props) {\r\n\r\n  const [title, setTitle] = React.useState('');\r\n  const [files, setFiles] = React.useState([]);\r\n  const [image, setImage] = React.useState(undefined);\r\n  const [id, setId] = React.useState(undefined);\r\n  const [upload_wait, setUpload_wait] = React.useState(false);\r\n  const [done, setDone] = React.useState(false);\r\n  const [labelWidth, setLabelWidth] = React.useState(0);\r\n  const labelRef = React.useRef(null);\r\n  const [url, setUrl] = React.useState(\"temp\");\r\n\r\n  // remove these\r\n  const [valid, setValid] = React.useState({\r\n    title: false,\r\n    ingredients: false,\r\n    desc: false,\r\n    image: false\r\n  });\r\n\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch(); // be able to dispatch\r\n  const store = useSelector(state => state.fireReducer);\r\n  const upload_store = useSelector(state => state.uploadReducer);\r\n  const history = useHistory();\r\n\r\n  const imageDisp = img => {\r\n    dispatch({\r\n      type: \"SETIMAGE\",\r\n      image: img\r\n    })\r\n  }\r\n\r\n  const allValid = () => {\r\n\r\n    return (valid.title && valid.ingredients && valid.desc && valid.image)\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setLabelWidth(labelRef.current.offsetWidth);\r\n    // getImage();\r\n    if(upload_store.title != undefined)\r\n    {\r\n      setTitle(upload_store.title);\r\n      setValid({ ...valid, [\"title\"]: true });\r\n    }\r\n\r\n    if(upload_store.descriptions != undefined)\r\n    {\r\n      handleDescriptionsAdd(upload_store.descriptions.length);\r\n    }\r\n\r\n    if(upload_store.ingredients != undefined)\r\n    {\r\n      handleIngredientsAdd(upload_store.ingredients.length);\r\n    }\r\n\r\n  }, []);\r\n\r\n  /*\r\n  const getImage = () => {\r\n\r\n    let storageRef = firebase.storage();\r\n    storageRef.ref('recept/bananbröd.jpg').getDownloadURL().then(function(url) {\r\n\r\n      setUrl(\"temp 1\")\r\n\r\n    }).catch(function(error) {\r\n      // Handle any errors\r\n    });\r\n\r\n  } */\r\n\r\n  const handleChange = event => {\r\n\r\n    let value = event.target.value;\r\n    setTitle(value);\r\n    setValid({ ...valid, [\"title\"]: value.length > 2 ? true : false });\r\n\r\n    dispatch({\r\n      type: \"SETTITLE\",\r\n      title: value\r\n    })\r\n  };\r\n\r\n  const handleIngredientsAdd = length => {\r\n    setValid({ ...valid, [\"ingredients\"]: length > 1 ? true : false });\r\n  };\r\n\r\n  const handleDescriptionsAdd = length => {\r\n    setValid({ ...valid, [\"desc\"]: length > 1 ? true : false });\r\n  };\r\n\r\n  const onFileAdd = (files) => {\r\n    setValid({ ...valid, [\"image\"]: true });\r\n    setFiles(files);\r\n\r\n    var reader = new FileReader();\r\n    reader.onload = function(e) {\r\n      setImage(e.target.result);\r\n      imageDisp(e.target.result);\r\n    }\r\n\r\n    reader.readAsDataURL(files[0]);\r\n    imageDisp();\r\n  };\r\n\r\n  const onFileRemove = () => {\r\n    setValid({ ...valid, [\"image\"]: false });\r\n    setFiles([]);\r\n    setImage(undefined);\r\n  };\r\n\r\n  // upload image and callback with download URL\r\n  const uploadImage = (callback) => {\r\n\r\n    setUpload_wait(true);\r\n    // Create a reference to the new image\r\n    let storageRef = firebase.storage();\r\n    let newImageRef = storageRef.ref('recept/' + title + '_image.jpg');\r\n\r\n    // Upload image as a Base64 formatted image string.\r\n    let uploadTask = newImageRef.putString(image, 'data_url');\r\n\r\n    uploadTask.on('state_changed', function(snapshot){\r\n    }, function(error) { // Handle unsuccessful uploads\r\n    }, function() { // Handle successful uploads on complete\r\n\r\n      uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\r\n        callback(downloadURL);\r\n      });\r\n    });\r\n  }\r\n\r\n  const uploadAction = () => {\r\n\r\n    // make sure all valid\r\n    /*\r\n    if(!allValid())\r\n    {\r\n      return;\r\n    } */\r\n\r\n    // make sure signed in\r\n    if(store.firestore_user == undefined) {\r\n      alert(\"you have to sign in first\")\r\n      return;\r\n    }\r\n\r\n    // prepare data\r\n    let username = store.firestore_user.username;\r\n    let recipe_name = upload_store.title;\r\n\r\n    // const document = store.db.doc('recipes/' + recipe_name + '-' + username);\r\n    //const temp_doc = store.db.collection('recipes').doc();\r\n    //const _id = recipe_name + '-' + temp_doc.id;\r\n\r\n    const document = store.db.collection('recipes').doc();\r\n\r\n    let r_img = \"temp_food1\";\r\n    let ref_to_user = store.db.collection('users').doc(store.firestore_user.email);\r\n\r\n    // if upload or create new doc\r\n    if(upload_store.editmode == false)\r\n    {\r\n      // when image is uploaded, continue with uploading the rest\r\n      uploadImage(function(returnValue_downloadURL) {\r\n        // use the return value here instead of like a regular (non-evented) return value\r\n        let downloadURL = returnValue_downloadURL;\r\n\r\n        // Enter new data into the document.\r\n        document.set({\r\n          user: username,\r\n          title: recipe_name,\r\n          img: r_img,\r\n          img_url: downloadURL,\r\n          ingredients: upload_store.ingredients,\r\n          description: upload_store.descriptions,\r\n          user_ref: ref_to_user\r\n        }).then((test) => {\r\n          // Document created successfully.\r\n          console.log( \"Document created/updated successfully.\")\r\n          setUpload_wait(false);\r\n          setDone(true);\r\n        });\r\n\r\n        // to be able to direct to recipe page\r\n        setId(document.id);\r\n\r\n      }); // end of image upload callback\r\n\r\n    } else {\r\n\r\n      // UPDATE MODE\r\n      let update_data = {\r\n        title: recipe_name,\r\n        ingredients: upload_store.ingredients,\r\n        description: upload_store.descriptions,\r\n      };\r\n\r\n      // either upload with or without image\r\n      if (image == undefined) {\r\n\r\n        store.db.collection('recipes').doc(upload_store.recipe_id).update(update_data);\r\n        setUpload_wait(false);\r\n        setDone(true);\r\n\r\n      } else {\r\n        uploadImage(function(returnValue_downloadURL) {\r\n          // use the return value here instead of like a regular (non-evented) return value\r\n          update_data.img_url = returnValue_downloadURL;\r\n          store.db.collection('recipes').doc(upload_store.recipe_id).update(update_data);\r\n\r\n          setUpload_wait(false);\r\n          setDone(true);\r\n\r\n        }); // end of image upload callback\r\n      }\r\n\r\n      // to be able to direct to recipe page\r\n      setId(upload_store.recipe_id);\r\n    }\r\n\r\n\r\n  };\r\n\r\n  // when done, there's an option to go to recipe page\r\n  const goToRecipe = () => {\r\n    history.push(\"/recipe/\" + title + \"/\" + id );\r\n  };\r\n\r\n  // whether uploading new recipe or editing an existing\r\n  let upload_done_text = (upload_store.editmode) ? \"Ändring\" : \"Uppladding\";\r\n  let upload_button_text = (upload_store.editmode) ? \"Ändra recept\" : \"Ladda upp\";\r\n  let bottom_content;\r\n  let upload_disabled = !allValid();\r\n\r\n  // if working on recipe\r\n  if(upload_wait == false && done == false)\r\n  {\r\n    bottom_content = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      startIcon={<CloudUploadIcon />}\r\n      onClick={uploadAction}\r\n      disabled={upload_disabled}\r\n    >\r\n      {upload_button_text}\r\n    </Button> );\r\n  }\r\n  else if ( upload_wait == true ) // if waiting on upload\r\n  {\r\n    bottom_content = (<div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#ffffff\" fadeIn=\"none\"/></div>);\r\n  } else // done with upload\r\n  {\r\n    bottom_content = (<Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={goToRecipe}\r\n    >\r\n      {upload_done_text} klar! Visa recept\r\n    </Button> );\r\n  }\r\n\r\n  let page_title = (upload_store.editmode) ? \"Ändra recept\" : \"Ladda upp recept\";\r\n\r\n  let decs_valid = (valid.desc || (upload_store.descriptions && upload_store.descriptions.length > 1)) ? true : false;\r\n  let ingred_valid = (valid.ingredients || (upload_store.ingredients && upload_store.ingredients.length > 1)) ? true : false;\r\n  let title_valid = (title.length >= 3 );\r\n\r\n\r\n  return (\r\n\r\n\r\n    <div>\r\n      <h3>{page_title}</h3>\r\n\r\n      <form>\r\n\r\n      <Grid\r\n        container\r\n        spacing={1}\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n\r\n        {/* TITLE*/}\r\n        <Grid item xs={12}>\r\n        <FormControl variant=\"outlined\">\r\n          <InputLabel ref={labelRef} htmlFor=\"component-outlined\"> Namn på recept </InputLabel>\r\n          <OutlinedInput\r\n            value={title}\r\n            onChange={handleChange}\r\n            labelWidth={labelWidth}\r\n          />\r\n        </FormControl>\r\n        </Grid>\r\n\r\n        {/* INGREDIENTS*/}\r\n        <Grid item xs={12}>\r\n        <ExpansionPanel style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n\r\n          <FormLabel component=\"legend\" className={classes.formlabel}>Ingredienser</FormLabel>\r\n\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <IngredientsList handleAdd={handleIngredientsAdd}/>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        </Grid>\r\n\r\n        {/* DESCTIPTION*/}\r\n        <Grid item xs={12}>\r\n        <ExpansionPanel style={{background: '#f7f6f6'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n          <FormLabel component=\"legend\" className={classes.formlabel}>Beskrivning</FormLabel>\r\n\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <DescriptionList handleAdd={handleDescriptionsAdd}/>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        </Grid>\r\n\r\n        {/* IMAGE */}\r\n        <Grid item xs={12}>\r\n        <ExpansionPanel style={{background: '#f7f6f6'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-label=\"Expand\"\r\n            aria-controls=\"additional-actions1-content\"\r\n            id=\"additional-actions1-header\"\r\n          >\r\n          <FormLabel component=\"legend\" className={classes.formlabel}>Receptbild</FormLabel>\r\n\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n\r\n                  <Grid container spacing={1}>\r\n                    <Grid item xs={9} style={{\r\n                        display: 'flex',\r\n                        marginBottom: '10px'\r\n                    }}>\r\n                    <FileInput value={files} onChange={onFileAdd} />\r\n                    </Grid>\r\n\r\n                  </Grid>\r\n                  { image != undefined &&\r\n                  <React.Fragment>\r\n                    <Grid item xs={9}>\r\n                      <img src={image} alt={\"loadedimage\"} className={classes.loadedimage} />\r\n                    </Grid>\r\n                    <Grid item xs={3}>\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={onFileRemove}\r\n                        style={{lineHeight: '1.2'}}\r\n                      >\r\n                        Ta bort bild\r\n                      </Button>\r\n                    </Grid>\r\n                  </React.Fragment>\r\n\r\n          }\r\n\r\n\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n        </Grid>\r\n\r\n      </Grid>\r\n\r\n\r\n\r\n      <div className={classes.uploaddiv} >\r\n        <Grid container justify=\"center\" alignItems=\"center\">\r\n        <Grid item xs={4}>\r\n        {bottom_content}\r\n        </Grid>\r\n        </Grid>\r\n      </div>\r\n\r\n      </form>\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\n// <RecipeCard/>\r\n\r\n// material ui design\r\nconst useStyles = makeStyles(theme => ({\r\n  body: {\r\n    padding: 15\r\n  },\r\n  buttontext: {\r\n    textTransform: 'unset'\r\n  },\r\n  input: {\r\n    color: 'black',\r\n    width: 200\r\n  },\r\n  loadedimage: {\r\n    width: '100%',\r\n    borderRadius: '4px'\r\n  },\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  formlabel: {\r\n    marginRight: '30px',\r\n    fontWeight: 'bold'\r\n  },\r\n  imagediv: {\r\n    background: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  uploaddiv: {\r\n    background: '#68bb8c',\r\n    borderRadius: '4px',\r\n    padding: '40px',\r\n    marginTop: '8px'\r\n  },\r\n  greenicon: {\r\n    color: '#68BB8C'\r\n  },\r\n  redicon: {\r\n    color: 'red'\r\n  },\r\n  newListItem: {\r\n    background: '#f3f3f3'\r\n  },\r\n  titlediv: {\r\n    background: 'gray'\r\n  },\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n  }\r\n}));\r\n\r\nexport default UploadPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { blue } from '@material-ui/core/colors';\r\n\r\nconst emails = ['username@gmail.com', 'user02@gmail.com'];\r\nconst useStyles = makeStyles({\r\n  avatar: {\r\n    backgroundColor: blue[100],\r\n    color: blue[600],\r\n  },\r\n});\r\n\r\nfunction SimpleDialog(props) {\r\n  const classes = useStyles();\r\n  const { onClose, selectedValue, open } = props;\r\n\r\n  const handleClose = () => {\r\n    onClose(selectedValue);\r\n  };\r\n\r\n  const handleListItemClick = value => {\r\n    onClose(value);\r\n  };\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={open}>\r\n      <DialogTitle id=\"simple-dialog-title\">Set backup account</DialogTitle>\r\n      <List>\r\n        {emails.map(email => (\r\n          <ListItem button onClick={() => handleListItemClick(email)} key={email}>\r\n            <ListItemAvatar>\r\n              <Avatar className={classes.avatar}>\r\n                <PersonIcon />\r\n              </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText primary={email} />\r\n          </ListItem>\r\n        ))}\r\n\r\n        <ListItem autoFocus button onClick={() => handleListItemClick('addAccount')}>\r\n          <ListItemAvatar>\r\n            <Avatar>\r\n              <AddIcon />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary=\"Add account\" />\r\n        </ListItem>\r\n      </List>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nSimpleDialog.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  selectedValue: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default SimpleDialog;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { blue } from '@material-ui/core/colors';\r\n\r\n// const emails = ['username@gmail.com', 'user02@gmail.com'];\r\nconst useStyles = makeStyles({\r\n  avatar: {\r\n    backgroundColor: blue[100],\r\n    color: blue[600],\r\n  },\r\n});\r\n\r\nfunction SimpleDialog(props) {\r\n  const classes = useStyles();\r\n  const { onClose, selectedValue, open } = props;\r\n  const [myFriends, setMyFriends] = useState(undefined);\r\n\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  // when url changes, on load and on user click\r\n  useEffect(() => {\r\n\r\n    if(store.firestore_user) {\r\n      followFetcher(store.firestore_user.email, \"following\");\r\n    }\r\n\r\n  }, [store.firestore_user]);\r\n\r\n  const handleClose = () => {\r\n    onClose(selectedValue);\r\n  };\r\n\r\n  const handleListItemClick = (friend) => {\r\n\r\n    onClose(friend.email);\r\n\r\n    let date = new Date();\r\n\r\n    let event_tips_object = {\r\n      email: friend.email,\r\n      event_image_url: store.firestore_user.profile_img_url, // change to recipe image\r\n      other_username: store.firestore_user.username,\r\n      recipe: props.recipeId,\r\n      timestamp: date,\r\n      type: \"TIPS\",\r\n      seen: false\r\n    };\r\n\r\n    let firebase_event_id = store.firestore_user.email + \"-tips-\" + friend.email + \"-\" + props.recipeId;\r\n\r\n    store.db.collection('events').doc(firebase_event_id).set(event_tips_object);\r\n  };\r\n\r\n  // get email of followers for the user profile in view\r\n  const followFetcher = (current_user_email, collection) => {\r\n\r\n    let follow_docs = [];\r\n    let follow_data = [];\r\n\r\n    store.db.collection(\"followers\").doc(current_user_email).collection(collection)\r\n    .onSnapshot(function(querySnapshot) {\r\n\r\n        querySnapshot.forEach( doc => {\r\n\r\n          store.db.collection(\"users\").doc(doc.id)\r\n          .onSnapshot(function(doc) {\r\n              let data = doc.data();\r\n              follow_data.push({email: doc.id, username: data.username, fullname: data.fullname, profile_img_url: data.profile_img_url, follows: false});\r\n          })\r\n\r\n        })\r\n        //followBuilder(current_username, follow_docs, collection);\r\n\r\n        setMyFriends(follow_data);\r\n    });\r\n  }\r\n\r\n  let email_jsx = (myFriends != undefined) ? myFriends.map((friend) => (\r\n    <ListItem button onClick={() => handleListItemClick(friend)} key={friend.email}>\r\n      <ListItemAvatar>\r\n        <Avatar className={classes.avatar}>\r\n          <PersonIcon />\r\n        </Avatar>\r\n      </ListItemAvatar>\r\n      <ListItemText primary={friend.username} />\r\n    </ListItem>\r\n  )) : null;\r\n\r\n  //\r\n  return (\r\n    <Dialog onClose={handleClose} aria-labelledby=\"simple-dialog-title\" open={open}>\r\n      <DialogTitle id=\"simple-dialog-title\">Tipsa vän</DialogTitle>\r\n      <List>\r\n        {email_jsx}\r\n      </List>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nSimpleDialog.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  selectedValue: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default function PickUserDialog(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [selectedValue, setSelectedValue] = React.useState(\"temp\"); // emails[1]);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n    // props.handleClickOpen();\r\n  };\r\n\r\n  const handleClose = (value) => {\r\n    setOpen(false);\r\n    setSelectedValue(value);\r\n  };\r\n\r\n  // variant=\"outlined\" color=\"primary\"\r\n\r\n  return (\r\n    <div>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={handleClickOpen}>\r\n        Tipsa en vän\r\n      </Button>\r\n      <SimpleDialog recipeId={props.recipeId} selectedValue={selectedValue} open={open} onClose={handleClose} />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport {\r\n\r\n  FacebookShareButton,\r\n  FacebookIcon,\r\n  FacebookMessengerShareButton\r\n\r\n} from \"react-share\";\r\n\r\n\r\n\r\nexport default function ReactShare(props) {\r\n\r\n  let full_path = 'https://campuskost.se/#' + props.location;\r\n  let shareUrl = full_path; // 'https://campuskost.se/recipe/Bananbr%C3%B6d/Bananbr%C3%B6d-Sporkis';\r\n  let title = 'Spana in det här receptet på Campuskost! Låter gott med ' + props.title;\r\n\r\n  console.log(shareUrl)\r\n\r\n  return (\r\n\r\n\r\n\r\n      <FacebookShareButton\r\n        url={shareUrl}\r\n        quote={title}\r\n        className=\"Demo__some-network__share-button\"\r\n        >\r\n\r\n        <div style={{marginTop: 10}}>\r\n          <Button variant=\"contained\" color=\"gray\">\r\n            <span style={{marginRight: 10}}> Dela </span>\r\n            <FacebookIcon size={32} round />\r\n          </Button>\r\n        </div>\r\n\r\n        </FacebookShareButton>\r\n\r\n\r\n\r\n  );\r\n}\r\n\r\n/*\r\n\r\n<FacebookMessengerShareButton\r\n  url={shareUrl}\r\n  quote={title}\r\n  className=\"Demo__some-network__share-button\"\r\n  >\r\n  <FacebookIcon size={32} round />\r\n  </FacebookMessengerShareButton>\r\n\r\n*/\r\n","import React, {useState, useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams} from \"react-router\";\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport SimpleDialog from '../components/simpledialog';\r\nimport PickUserDialog from '../components/pickuserdialog';\r\nimport ReactShare from '../components/ReactShare';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n\r\nfunction RecipePage(props) {\r\n\r\n  const [ ifUser, setIfUser] = useState(false);\r\n  const [ recipe, setRecipe] = useState(undefined);\r\n  const [ saved, setSaved ] = useState({likes: false, doc_id: undefined});\r\n  const [ tried, setTried ] = useState(false);\r\n  const { recipetitle, id } = useParams();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  //console.log(\"hi\")\r\n  //console.log(history.location)\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    let ref = store.db.collection('recipes').doc(id);\r\n    recipeFetcher(ref);\r\n    // likeFetcher();\r\n\r\n  }, []);\r\n\r\n  // know if recipe belongs to this user\r\n  useEffect(() => {\r\n    // exit funtion if undefined\r\n    if(!store.firestore_user || !recipe || !recipe.user_doc.username )\r\n      return;\r\n\r\n    if(recipe.user_doc.username == store.firestore_user.username) {\r\n      setIfUser(true);\r\n    }\r\n\r\n    //let queryRef = store.db.collection('likes').where('email', '==', store.firestore_user.email);\r\n    //likeFetcher(queryRef);\r\n    likeFetcher(store.firestore_user.email);\r\n\r\n  }, [store.firestore_user, recipe]);\r\n\r\n  const likeFetcher = (current_email) => {\r\n\r\n    // let recipe_likesRef = store.db.collection('recipe_likes');\r\n    let likesRef = store.db.collection('recipe_likes').doc(current_email);\r\n\r\n    likesRef.get().then(function(doc) {\r\n\r\n      let isliked;\r\n\r\n      if (doc.exists) {\r\n\r\n        let data = doc.data();\r\n        isliked = ( data.liked_recipes[recipe.id] !== undefined ) ? data.liked_recipes[recipe.id] : false;\r\n\r\n      } else {\r\n        store.db.collection('recipe_likes').doc(current_email).set({liked_recipes: {}});\r\n        isliked = false;\r\n      }\r\n\r\n      // if (isliked)\r\n      setSaved({likes: isliked, doc_id: current_email});\r\n\r\n    })\r\n    .catch(err => {\r\n      console.log('Error getting documents', err);\r\n    });\r\n\r\n  }\r\n\r\n  const likeRecipe = () => {\r\n\r\n    if(!store.firestore_user) {\r\n      console.log(\"user not loaded yet..\")\r\n      return;\r\n    }\r\n\r\n    let likesRef = store.db.collection('recipe_likes').doc(store.firestore_user.email);\r\n\r\n    likesRef.get().then(function(doc) {\r\n\r\n      let data;\r\n\r\n      // add or remove like\r\n      if (doc.exists) {\r\n\r\n        data = doc.data();\r\n        data.liked_recipes[recipe.id] = (saved.likes) ? false : true;\r\n        store.db.collection(\"recipe_likes\").doc(doc.id).update(data);\r\n      }\r\n\r\n    });\r\n\r\n    setSaved({likes: !saved.likes, doc_id: saved.doc_id});\r\n\r\n  };\r\n\r\n  const tryRecipe = () => {\r\n    setTried( !tried );\r\n  };\r\n\r\n  const recipeToFriend = () => {\r\n    //setTried( !tried );\r\n  };\r\n\r\n  const editRecipe = () => {\r\n\r\n    dispatch({\r\n      type: \"SETDESCRIPTIONS\",\r\n      descriptions: recipe.description\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETINGREDIENTS\",\r\n      ingredients: recipe.ingredients\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETTITLE\",\r\n      title: recipe.title\r\n    })\r\n\r\n    dispatch({\r\n      type: \"SETEDITMODE\",\r\n      editmode: true,\r\n      recipe_id: id\r\n    })\r\n\r\n    history.push(\"/upload\" );\r\n  }\r\n\r\n  const removeRecipe = () => {\r\n\r\n    store.db.collection('recipes').doc(id).delete();\r\n    history.push(\"/home\");\r\n\r\n  }\r\n\r\n  const handleUserClick = () => {\r\n    history.push(\"/profile/\" + recipe.user_doc.username );\r\n  };\r\n\r\n\r\n  var user_promise = function(user_ref) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      // reject();\r\n\r\n      user_ref.get().then(function(doc) {\r\n\r\n          if (!doc.exists)\r\n            reject();\r\n\r\n          let doc_data = doc.data(); // append to recipe data\r\n          resolve(doc_data);\r\n\r\n        });\r\n    });\r\n  }\r\n\r\n  const recipeFetcher = (ref) => {\r\n    ref.get().then(function(doc) {\r\n      if (doc.exists) {\r\n          let data = doc.data()\r\n          data.id = doc.id;\r\n\r\n          user_promise(data.user_ref).then((extended_data) => {\r\n\r\n            data.user_doc = extended_data;\r\n            setRecipe(data);\r\n\r\n          }).catch(() => {\r\n            console.log(\"Could not get user data for recipe owner\")\r\n          })\r\n\r\n      }\r\n    }).catch(function(error) {\r\n        console.log(\"Error getting document:\", error);\r\n    });\r\n\r\n  }\r\n\r\n  let icon = (saved.likes === true) ? <FavoriteIcon/> : <FavoriteBorderIcon/>;\r\n  let r_img = ( recipe !== undefined) ? recipe.img : 'temp_food1';\r\n  let triedbyNum = 3;\r\n  // , zIndex: '-1'\r\n\r\n  /*\r\n\r\n  <h2 style={{display: 'inline'}}>\r\n    <Button disableTouchRipple onClick={likeRecipe}\r\n    style={{display: 'inline', backgroundColor: 'transparent'}}>\r\n      {icon}\r\n    </Button>\r\n    { recipetitle + ' | ' }\r\n\r\n  </h2>\r\n  <h2 onClick={ handleUserClick} style={{display: 'inline'}}>\r\n    { recipe.user }\r\n  </h2>\r\n\r\n  */\r\n\r\n  let img_src;\r\n\r\n  if  ( recipe !== undefined && recipe.img_url !== undefined) {\r\n    img_src = recipe.img_url;\r\n  } else {\r\n    img_src = require('../assets/'+ r_img + '.jpg');\r\n  }\r\n\r\n\r\n  return (\r\n\r\n    <div>\r\n\r\n\r\n\r\n      { recipe !== undefined &&\r\n        <div>\r\n\r\n          <div className={classes.recipeheader}>\r\n          <span>\r\n            <Button disableTouchRipple onClick={likeRecipe}\r\n            style={{display: 'inline', backgroundColor: 'transparent'}}>\r\n              {icon}\r\n            </Button>\r\n            { recipetitle + ' | ' }\r\n\r\n          </span>\r\n          <span>\r\n\r\n            <Button disableTouchRipple onClick={handleUserClick}\r\n            style={{display: 'inline', backgroundColor: 'transparent', textTransform: 'none'}}>\r\n              { recipe.user_doc.username }\r\n            </Button>\r\n          </span>\r\n          </div>\r\n\r\n        <Grid\r\n          container\r\n          spacing={1}\r\n          justify=\"center\"\r\n\r\n        >\r\n          <Grid item xs={6} >\r\n            <img src={img_src} className={classes.listimage} alt={\"recipe img\"} />\r\n          </Grid>\r\n          <Grid item xs={4} className={classes.imagesidebar}>\r\n            <div onClick={recipeToFriend}>\r\n              <PickUserDialog recipeId={recipe.id}/>\r\n            </div>\r\n\r\n            <ReactShare location={history.location.pathname} title={recipetitle}/>\r\n\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <IngredientsList ingredients={recipe.ingredients}/>\r\n        <RecipeDecsList description={recipe.description}/>\r\n\r\n        {ifUser &&\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<EditIcon />}\r\n            onClick={editRecipe}\r\n          >\r\n            Ändra recept\r\n          </Button>\r\n        }\r\n\r\n        &nbsp; &nbsp; &nbsp;\r\n\r\n        {ifUser &&\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<EditIcon />}\r\n            onClick={removeRecipe}\r\n          >\r\n            Ta bort recept\r\n          </Button>\r\n        }\r\n\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n\r\n  ); // style={{display: 'inline', backgroundColor: 'transparent', textTransform: 'none'}}\r\n\r\n  /*\r\n\r\n  // className={classes.triedby}\r\n\r\n  { tried === true &&\r\n  <div className={classes.triedby} >\r\n    <span className={classes.triedbyText}> Testat av </span>\r\n    <span className={classes.triedbyNum}> {triedbyNum} </span>\r\n    <span className={classes.triedbyText}> { triedbyNum > 1 ? \"kockar\" : \"kock\" }! </span>\r\n  </div>\r\n  }\r\n  { tried === false &&\r\n  <div className={classes.triedby} onClick={tryRecipe}>\r\n    <span className={classes.triedbyText}>\r\n      Bli den första att testa detta recept!\r\n    </span>\r\n  </div>\r\n  }\r\n\r\n  */\r\n\r\n}\r\n\r\n\r\n\r\nfunction IngredientsList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n\r\n  let temp_ingredients = [\r\n  {name: 'mjöl (default data)', quantity: \"2\", measure: \"dl\"},\r\n  {name: 'salt', quantity: \"1\", measure: \"tsk\"},\r\n  {name: 'mjölk', quantity: \"4\", measure: \"dl\"},\r\n  {name: 'ägg', quantity: \"2\", measure: \"\"}\r\n];\r\n\r\n  let ingredients = (props.ingredients != undefined) ? props.ingredients : temp_ingredients;\r\n\r\n  let ingredientsjsx = ingredients.map((ingred, idx) =>\r\n  <React.Fragment key={idx}>\r\n    <ListItem>\r\n      <ListItemText\r\n        primary={ ingred.quantity + \" \" + ingred.measure + \" \" + ingred.name }\r\n      />\r\n\r\n    </ListItem>\r\n    { idx < ingredients.length - 1 && <Divider component=\"li\" /> }\r\n  </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h3> Ingredienser </h3>\r\n      <List dense={true} className={classes.ingredientslist}>\r\n        {ingredientsjsx}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nfunction RecipeDecsList(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  let temp_description = [\r\n  {order: 0, text: \"Knäck äggen i en bunke (default data)\"},\r\n  {order: 2, text: \"Stek i pannan meed smör eller kokosolja\"},\r\n  {order: 1, text: \"Vispa i mjöl, mjölk och salt\"}\r\n  ];\r\n\r\n  let description = (props.description != undefined) ? props.description : temp_description;\r\n\r\n  // sort by order\r\n  description.sort( (desc1, desc2) => desc1.order - desc2.order );\r\n\r\n  let descjsx = description.map((desc, idx) =>\r\n    <RecipeDecsListItem idx={idx} key={idx} desc={desc.text} len={description.length}/>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h3> Gör så här </h3>\r\n      <List dense={true} className={classes.ingredientslist}>\r\n        {descjsx}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RecipeDecsListItem(props) {\r\n\r\n  const [checked, setChecked] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  let idx = props.idx;\r\n\r\n  const onIngredClick = (idx) => {\r\n    setChecked(!checked);\r\n  }\r\n\r\n  let icon = (checked === true ) ? <CheckBoxIcon className={classes.checkIcon}/> : <CheckBoxOutlineBlankIcon className={classes.checkIcon}/> ;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListItem\r\n        onClick={() => onIngredClick(idx)}\r\n      >\r\n        {icon}\r\n        <ListItemText primary={ props.desc }/>\r\n      </ListItem>\r\n      { idx < props.len - 1 && <Divider component=\"li\" /> }\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  listimage: {\r\n    maxHeight: '100%',\r\n    maxWidth: '100%',\r\n    borderRadius: '4px',\r\n    objectFit: 'cover',\r\n    minHeight: '150px',\r\n    maxWidth: '150px'\r\n  },\r\n  imagesidebar: {\r\n    padding: 5\r\n  },\r\n  triedby: {\r\n    background: '#f1f1f1',\r\n    borderRadius: '4px',\r\n    padding: 5,\r\n    textAlign: 'center',\r\n    marginTop: 5\r\n  },\r\n  triedbyText: {\r\n    margin: '0',\r\n  },\r\n  triedbyNum: {\r\n    fontWeight: 'bold',\r\n    display: 'block',\r\n    fontSize: '2em'\r\n  },\r\n  ingredientslist: {\r\n   marginTop: '20px',\r\n },\r\n checkIcon: {\r\n   marginRight: '10px',\r\n   color: '#68bb8c'\r\n },\r\n recipeheader: {\r\n   margin: '20px 0px',\r\n   fontWeight: 'bold'\r\n }\r\n});\r\n\r\nexport default RecipePage;\r\n","import React, {useState} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n//import testImg from '../assets/food-and-restaurant.png'\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst LOGIN_STATE = \"login\";\r\nconst SIGNUP_STATE = \"signup\";\r\n\r\nfunction LoginPage() {\r\n\r\n  const [state, setState] = useState(SIGNUP_STATE);\r\n\r\n  const classes = useStyles();\r\n\r\n  // render one container and the opposite banner\r\n  return (\r\n\r\n    <div>\r\n\r\n      { // either login container..\r\n        state === LOGIN_STATE &&\r\n        <div>\r\n          <LoginContainer/>\r\n          <SignupBanner onAction={() => setState(SIGNUP_STATE)}/>\r\n        </div>\r\n      }\r\n\r\n\r\n      { // ..or signup container\r\n        state === SIGNUP_STATE &&\r\n        <div>\r\n          <SignUpContainer/>\r\n          <LogInBanner onAction={() => setState(LOGIN_STATE)}/>\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nfunction SignUpContainer() {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [username, setUsername] = useState({value: \"\", isValid: false});\r\n  // const [validUsername, setValidUsername] = useState(\"\");\r\n\r\n\r\n  const [feedback, setFeedback] = useState({color: 'green', message: \"\"});\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  /**\r\n   * Handles the sign up button press.\r\n   */\r\n  function handleSignUp() {\r\n\r\n    if (email.length < 4 || password.length < 4) {\r\n      setFeedback({color: 'red', message: 'Mailadress/lösenord måste innehålla mer än 4 tecken.'});\r\n      return;\r\n    }\r\n\r\n    // Sign in with email and pass.\r\n    firebase.auth().createUserWithEmailAndPassword(email, password).then(function(value) {\r\n\r\n      setFeedback({color: 'green', message: \"Skapade ett konto för \" + email});\r\n\r\n    }).catch(function(error) {\r\n      // Handle Errors here.\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n\r\n      if (errorCode === 'auth/email-already-in-use')\r\n        setFeedback({color: 'red', message: 'Ett konto med denna email finns redan.'});\r\n      else if (errorCode === 'auth/weak-password')\r\n        setFeedback({color: 'red', message: 'Lösenordet är för svagt.'});\r\n    });\r\n  }\r\n\r\n  const handleUsername = () => {\r\n\r\n    let current_username = username.value;\r\n\r\n    if( current_username === \"\" ) {\r\n      setFeedback({color: 'orange', message: 'Skriv först in ett användarnamn.'});\r\n      return;\r\n    }\r\n\r\n    // not at every keypress..\r\n    usenameIsAvailableCheck(current_username).then((is_available) => {\r\n\r\n      setUsername({value: current_username, isValid: is_available});\r\n\r\n      if(is_available === false)\r\n        setFeedback({color: 'orange', message: 'Användarnamn upptaget.'});\r\n      else\r\n        setFeedback({color: 'green', message: 'Användarnamn ledigt.'});\r\n\r\n    })\r\n  }\r\n\r\n  // setUsername({value: evt.target.value, isValid: false})}\r\n  const editUsername = (username_textfield) => {\r\n\r\n    setUsername({value: username_textfield, isValid: false});\r\n    setFeedback({color: 'green', message: \"\"});\r\n  }\r\n\r\n  var usenameIsAvailableCheck = function(username_totry) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      // check if available\r\n      let is_available = true;\r\n      let query = store.db.collection('users').where('username', '==', username_totry).get()\r\n        .then(snapshot => {\r\n          snapshot.forEach(doc => {\r\n            is_available = false;\r\n          });\r\n          resolve(is_available)\r\n        })\r\n    });\r\n  }\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n    <h3> Skapa konto </h3>\r\n    <p>Ange email and lösenord för att skapa ett konto</p>\r\n\r\n         <input autoComplete=\"off\" value={email} type=\"email\" placeholder=\"Email\" onChange={evt => setEmail(evt.target.value)}/>\r\n         &nbsp;&nbsp;&nbsp;\r\n         <input autoComplete=\"off\" value={password} type=\"password\" placeholder=\"Password\" onChange={evt => setPassword(evt.target.value)}/>\r\n         <br/><br/>\r\n         <input autoComplete=\"off\" value={username.value} type=\"text\" placeholder=\"Usename\" onChange={evt => editUsername(evt.target.value)}/>\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color=\"primary\"\r\n           onClick={handleUsername}\r\n           style={{marginLeft: 20}}\r\n         >\r\n         Ledigt?\r\n         </Button>\r\n\r\n         <br/><br/>\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color=\"primary\"\r\n           onClick={handleSignUp}\r\n           disabled={!username.isValid}\r\n         >\r\n           Skapa konto\r\n         </Button>\r\n\r\n         <br/><br/>\r\n\r\n    <p style={{color: feedback.color}}> {feedback.message} </p>\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nfunction LoginContainer() {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [feedback, setFeedback] = useState({color: 'green', message: \"\"});\r\n  const [loginProblem, setLoginProblem] = useState(false);\r\n\r\n  const classes = useStyles();\r\n\r\n  /**\r\n   * Handles the sign in button press.\r\n   */\r\n  function toggleSignIn() {\r\n\r\n    // sign out if signed in\r\n    if (firebase.auth().currentUser) {\r\n      firebase.auth().signOut();\r\n    } else {\r\n\r\n      if (email.length < 4 || password.length < 4) {\r\n        setFeedback({color: 'red', message: 'Mailadress/lösenord måste innehålla mer än 4 tecken.'});\r\n        return;\r\n      }\r\n\r\n      // Sign in with email and pass.\r\n      firebase.auth().signInWithEmailAndPassword(email, password).then( () => {\r\n        setLoginProblem(false);\r\n        setFeedback({color: 'green', message: 'Välkommen tillbaka!'});\r\n\r\n      }).catch(function(error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n\r\n        if (errorCode === 'auth/wrong-password') {\r\n          setFeedback({color: 'red', message: 'Fel lösenord.'});\r\n          setLoginProblem(true);\r\n          //alert('fel lösenord.');\r\n        } else {\r\n          alert(errorMessage);\r\n        }\r\n        console.log(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  /* not used yet\r\n  function sendEmailVerification() {\r\n      firebase.auth().currentUser.sendEmailVerification().then(function() {\r\n        // Email Verification sent!\r\n        alert('Email Verification Sent!');\r\n      });\r\n  } */\r\n\r\n  function resetPassword() {\r\n\r\n      firebase.auth().sendPasswordResetEmail(email).then(function() {\r\n        alert(\"sent password reset to email: \" + email);\r\n      }).catch(function(error) {\r\n        // An error happened.\r\n        console.log(\"could not send reset email\")\r\n      });\r\n  }\r\n\r\n  let signText = (firebase.auth().currentUser) ? \"Logga ut\" : \"Logga in\";\r\n  let btn_color = (firebase.auth().currentUser) ? \"secondary\" : \"primary\";\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n    <h3> Logga in </h3>\r\n    <p>Ange email and lösenord för att logga in</p>\r\n\r\n         <input type=\"text\" name=\"email\" placeholder=\"Email\" onChange={evt => setEmail(evt.target.value)}/>\r\n         &nbsp;&nbsp;&nbsp;\r\n         <input type=\"password\" name=\"password\" placeholder=\"Password\" onChange={evt => setPassword(evt.target.value)}/>\r\n\r\n         <br/><br/>\r\n\r\n         <Button\r\n           variant=\"contained\"\r\n           color={btn_color}\r\n           onClick={toggleSignIn}\r\n         >\r\n           {signText}\r\n         </Button>\r\n\r\n         &nbsp;&nbsp;&nbsp;\r\n\r\n         { loginProblem === true &&\r\n         <Button\r\n           variant=\"contained\"\r\n           color=\"secondary\"\r\n           onClick={resetPassword}\r\n         >\r\n           Återställ lösenord\r\n         </Button>\r\n         }\r\n\r\n         <br/><br/>\r\n\r\n         <p style={{color: feedback.color}}> {feedback.message} </p>\r\n\r\n    </div>\r\n\r\n  );\r\n\r\n}\r\n\r\nfunction SignupBanner(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n      <h3> Ny på Campuskost? 🍼 </h3>\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={props.onAction}\r\n      >\r\n        Skapa konto\r\n      </Button>\r\n\r\n      <p className={classes.info_font}>\r\n        Det är gratis att ha ett konto på Campuskost. <br/>\r\n        Läs mer om vilkor och användardata <a>här</a>.\r\n      </p>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nfunction LogInBanner(props) {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n\r\n    <div className={classes.login_div}>\r\n      <h3> Har du redan ett konto? </h3>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={props.onAction}\r\n      >\r\n        Logga in\r\n      </Button>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  login_div: {\r\n    background: '#f5f5f5',\r\n    padding: '1em',\r\n    margin: '0.5em',\r\n    borderRadius: '15px'\r\n },\r\n info_font: {\r\n    fontStyle: 'italic',\r\n    fontSize: 'small'\r\n}\r\n});\r\n\r\n// <span id=\"quickstart-sign-in-status\"> &nbsp; {signedInStatus} </span>\r\n// <button onClick={sendEmailVerification} name=\"verify\">Verifiera konto</button>\r\n\r\n/*\r\n\r\n<!--\r\n<button id=\"quickstart-verify-email\" onClick={handleChange} name=\"verify-email\">Send Email Verification</button>\r\n&nbsp;&nbsp;&nbsp;\r\n<button id=\"quickstart-password-reset\" onClick={handleChange} name=\"verify-email\">Send Password Reset Email</button> --> */\r\n\r\nexport default LoginPage;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\n// import { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\n\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\n\r\n\r\nfunction Settings(props) {\r\n\r\n  const [username_textfield, setUsername_textfield] = useState(\"\");\r\n  const [fullname_textfield, setFullname_textfield] = useState(\"\");\r\n  const [bio_textfield, setBio_textfield] = useState(\"\");\r\n  const [imageUrl, setImageUrl] = useState(undefined);\r\n\r\n  const [has_changed, setHas_changed] = useState(false);\r\n  const [labelWidth, setLabelWidth] = useState(0);\r\n  const [in_editmode, setIn_editmode] = useState(false);\r\n  const [isAvailable, setIsAvailable] = useState(true);\r\n  const labelRef = React.useRef(null);\r\n  const [openSetting, setOpenSetting] = useState(\"\");\r\n\r\n  console.log(bio_textfield)\r\n\r\n\r\n  const [imageUrlList, setImageUrlList] = useState([]);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    setLabelWidth(labelRef.current.offsetWidth);\r\n\r\n    const storageRef = firebase.storage().ref().child('profileimages');\r\n    const available_images = [];\r\n\r\n    // Find all the prefixes and items.\r\n    storageRef.listAll().then(function(res) {\r\n      res.items.forEach(function(itemRef) {\r\n        itemRef.getDownloadURL().then((url) => { available_images.push(url); });\r\n      });\r\n      setImageUrlList(available_images);\r\n\r\n    }).catch(function(error) {\r\n      console.log(\"could not get storage list\")\r\n    });\r\n\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n\r\n    if(store.firestore_user && (username_textfield !== store.firestore_user.username ||\r\n      imageUrl !== store.firestore_user.profile_img_url ||\r\n      fullname_textfield !== store.firestore_user.fullname ||\r\n      (!store.firestore_user.bio || (store.firestore_user.bio && bio_textfield !== store.firestore_user.bio)) )) {\r\n      setHas_changed(true);\r\n    } else {\r\n      setHas_changed(false);\r\n    }\r\n  }, [username_textfield, fullname_textfield, bio_textfield, imageUrl]);\r\n\r\n  // when information about user signed in arrives, set textfield value\r\n  React.useEffect(() => {\r\n    if(store.firestore_user) {\r\n      setUsername_textfield(store.firestore_user.username)\r\n      setFullname_textfield(store.firestore_user.fullname)\r\n\r\n      if (store.firestore_user.profile_img_url !== undefined)\r\n        setImageUrl(store.firestore_user.profile_img_url);\r\n\r\n      if (store.firestore_user.bio !== undefined)\r\n        setBio_textfield(store.firestore_user.bio);\r\n    }\r\n  }, [store.firestore_user]);\r\n\r\n\r\n  // exit edit mode\r\n  function cancel_edit() {\r\n\r\n    setIn_editmode(false);\r\n    if(has_changed) {\r\n      setUsername_textfield(store.firestore_user.username);\r\n      setFullname_textfield(store.firestore_user.fullname);\r\n      setBio_textfield(store.firestore_user.bio);\r\n      setImageUrl(store.firestore_user.profile_img_url);\r\n    }\r\n  }\r\n\r\n  function signOut() {\r\n\r\n    // sign out if signed in\r\n    if (firebase.auth().currentUser) {\r\n      firebase.auth().signOut();\r\n      history.push(\"/login\");\r\n    }\r\n  }\r\n\r\n  const editUsername = (new_value) => {\r\n    setUsername_textfield(new_value);\r\n    setIsAvailable(true);\r\n  }\r\n\r\n  var toChangePromise = function(current_username) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let listsRef = store.db.collection('recipes');\r\n      let list_ids = [];\r\n\r\n      let query = listsRef.where('user', '==', current_username).get()\r\n        .then(snapshot => {\r\n\r\n          snapshot.forEach(doc => {\r\n            list_ids.push(doc.id);\r\n          });\r\n          resolve(list_ids)\r\n        })\r\n    });\r\n  }\r\n\r\n  var isAvailableCheck = function() {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      // check if available\r\n      let is_available = true;\r\n      let query = store.db.collection('users').where('username', '==', username_textfield).get()\r\n        .then(snapshot => {\r\n          snapshot.forEach(doc => {\r\n            is_available = false;\r\n          });\r\n          resolve(is_available)\r\n        })\r\n    });\r\n  }\r\n\r\n  // update in Firebase\r\n  function save_fullname() {\r\n\r\n    // Set the 'username' field of the user\r\n    store.db.collection('users').doc(store.firestore_user.email).update({fullname: fullname_textfield});\r\n    setIn_editmode(false);\r\n  }\r\n\r\n  // update in Firebase\r\n  function save_bio() {\r\n\r\n    // Set the 'username' field of the user\r\n    store.db.collection('users').doc(store.firestore_user.email).update({bio: bio_textfield});\r\n    setIn_editmode(false);\r\n  }\r\n\r\n  // update in Firebase\r\n  function save_username() {\r\n\r\n    isAvailableCheck().then((is_available) => {\r\n\r\n      if(is_available === false)\r\n      {\r\n        setIsAvailable(false);\r\n        return;\r\n      }\r\n\r\n      // Set the 'username' field of the user\r\n      store.db.collection('users').doc(store.firestore_user.email).update({username: username_textfield});\r\n      setIn_editmode(false);\r\n\r\n      // update other docs (recipe docs) with this username\r\n      toChangePromise(store.firestore_user.username).then((loadedIds) => {\r\n\r\n        loadedIds.map( _id => {\r\n          store.db.collection('recipes').doc(_id).update({user: username_textfield});\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  // update in Firebase\r\n  function save_img() {\r\n\r\n    // Set the 'username' field of the user\r\n    store.db.collection('users').doc(store.firestore_user.email).update({profile_img_url: imageUrl});\r\n  }\r\n\r\n  function newName() {\r\n\r\n    let preNames = [\"Master\", \"Lill\", \"Pro\"];\r\n    let postNames = [\"Chef\", \"Sleven\", \"Pasta\", \"Vego\"];\r\n\r\n    let rand1 = Math.floor(Math.random() * preNames.length);\r\n    let rand2 = Math.floor(Math.random() * postNames.length);\r\n\r\n    let pre_n = preNames[rand1];\r\n    let post_n = postNames[rand2];\r\n\r\n    // props\r\n    return pre_n + post_n;\r\n  }\r\n\r\n  const randomName = () => {\r\n    let temp_username = newName();\r\n    setUsername_textfield(temp_username);\r\n  }\r\n\r\n  const randomImg = () => {\r\n\r\n    let continue_search = true;\r\n    let img_index, temp_url;\r\n    do {\r\n\r\n      img_index = Math.floor(Math.random() * imageUrlList.length);\r\n      temp_url = imageUrlList[img_index];\r\n\r\n      if(temp_url !== imageUrl) {\r\n        continue_search = false;\r\n        setImageUrl(temp_url);\r\n      }\r\n\r\n    } while(continue_search);\r\n  }\r\n\r\n  const onExpand = (e, expanded, id) => {\r\n    let openval = expanded ? id : \"\";\r\n    setOpenSetting(openval);\r\n    cancel_edit();\r\n  }\r\n\r\n\r\n  //let signText = (firebase.auth().currentUser) ? \"Logga ut\" : \"Logga in\";\r\n\r\n  // let username = (store.firestore_user) ? store.firestore_user.username : \"unset\";\r\n\r\n  // fix if undefined\r\n  // style={{display: 'inline-block'}}\r\n\r\n  let img_src = imageUrl; // (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : undefined;\r\n\r\n  return (\r\n\r\n    <div>\r\n      <div className={classes.login_div}>\r\n        <h3>Inställningar</h3>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"username\")}\r\n          expanded={openSetting === \"username\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Användarnamn</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n\r\n            <FormControl variant=\"outlined\">\r\n              <InputLabel ref={labelRef} htmlFor=\"component-outlined\"> Användarnamn </InputLabel>\r\n              <OutlinedInput\r\n                value={username_textfield}\r\n                onChange={(e) => editUsername(e.target.value)}\r\n                labelWidth={labelWidth}\r\n                disabled={!in_editmode}\r\n              />\r\n            </FormControl>\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra användarnamn\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => randomName()}\r\n                className={`${classes.buttons} ${classes.rainbow}`}\r\n              >\r\n                Slumpa 🤪\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_username()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara nytt användarnamn\r\n              </Button>\r\n              { !isAvailable &&\r\n              <Typography className={classes.available_text} >Namnet är upptaget</Typography>\r\n              }\r\n            </React.Fragment>\r\n            }\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"fullname\")}\r\n          expanded={openSetting === \"fullname\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Namn</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n\r\n            <FormControl variant=\"outlined\">\r\n              <InputLabel ref={labelRef} htmlFor=\"component-outlined\"> Namn </InputLabel>\r\n              <OutlinedInput\r\n                value={fullname_textfield}\r\n                onChange={(e) => setFullname_textfield(e.target.value)}\r\n                labelWidth={labelWidth}\r\n                disabled={!in_editmode}\r\n              />\r\n            </FormControl>\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra namn\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_fullname()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara namn\r\n              </Button>\r\n            </React.Fragment>\r\n            }\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"bio\")}\r\n          expanded={openSetting === \"bio\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Biografi</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n\r\n            <FormControl variant=\"outlined\">\r\n\r\n              <TextareaAutosize\r\n                value={bio_textfield}\r\n                onChange={(e) => setBio_textfield(e.target.value)}\r\n                disabled={!in_editmode}\r\n              />\r\n            </FormControl>\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra biografi\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_bio()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara biografi\r\n              </Button>\r\n            </React.Fragment>\r\n            }\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel\r\n          onChange={(e, expanded) => onExpand(e, expanded, \"profileimage\")}\r\n          expanded={openSetting === \"profileimage\"}\r\n          style={{background: '#fbfbfb', marginTop: '8px'}}>\r\n          <ExpansionPanelSummary\r\n            expandIcon={<ExpandMoreIcon />}\r\n            aria-controls=\"panel1a-content\"\r\n            id=\"panel1a-header\"\r\n          >\r\n            <Typography className={classes.heading}>Profilbild</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails style={{display: 'flex', flexWrap: 'wrap'}}>\r\n\r\n            { img_src &&\r\n            <div className={classes.fullrow}>\r\n              <img src={img_src} className={classes.profileimage}  alt={\"profile img\"} />\r\n            </div>\r\n            }\r\n\r\n            { !in_editmode &&\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => setIn_editmode(true)}\r\n              className={classes.buttons}\r\n            >\r\n              Ändra bild\r\n            </Button>\r\n            }\r\n            { in_editmode &&\r\n            <React.Fragment>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => cancel_edit() }\r\n                className={classes.buttons}\r\n              >\r\n                Avbryt\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => randomImg()}\r\n                className={`${classes.buttons} ${classes.rainbow}`}\r\n              >\r\n                Slumpa 🤪\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => save_img()}\r\n                className={classes.buttons}\r\n                disabled={!has_changed}\r\n              >\r\n                Spara ny profilbild\r\n              </Button>\r\n            </React.Fragment>\r\n            }\r\n\r\n          </ExpansionPanelDetails>\r\n\r\n        </ExpansionPanel>\r\n\r\n      </div>\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"secondary\"\r\n        onClick={() => signOut()}\r\n        className={classes.center_btn}\r\n      >\r\n        Logga ut\r\n      </Button>\r\n\r\n    </div>\r\n  );\r\n}\r\n// className={classes.formlabel}\r\n// style={{display: 'flex', flexWrap: 'wrap'}\r\n\r\nconst useStyles = makeStyles({\r\n  login_div: {\r\n    background: '#f5f5f5',\r\n    padding: '1em',\r\n    margin: '0.5em',\r\n    borderRadius: '15px'\r\n },\r\n buttons: {\r\n   margin: '5px'\r\n },\r\n rainbow: {\r\n   backgroundImage: 'linear-gradient(to bottom right, #ff49e0 , #26ffa7)',\r\n   fontWeight: 'bold'\r\n },\r\n center_btn: {\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    marginTop: '20px',\r\n    display: 'flex'\r\n },\r\n available_text: {\r\n    fontSize: '13px',\r\n    color: '#f50057',\r\n    margin: '8px'\r\n},\r\nprofileimage: {\r\n  marginLeft: 'auto',\r\n  marginRight: 'auto',\r\n  marginBottom: '15px'\r\n},\r\nfullrow: {\r\n  flex: '0 0 100%',\r\n  display: 'flex'\r\n}\r\n});\r\n\r\nexport default Settings;\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport RecipeGridList from '../components/recipegridlist';\r\nimport FollowerList from '../components/followerlist';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nvar Spinner = require('react-spinkit');\r\n\r\nfunction SearchPage(props) {\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const [recipes, setRecipes] = useState(undefined);\r\n\r\n  const classes = useStyles();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  const history = useHistory();\r\n\r\n  let searchstring = \"\";\r\n\r\n  useEffect(() => {\r\n    userFetcher('users');\r\n    userFetcher('recipes');\r\n  }, []);\r\n\r\n  const userFetcher = (collection_name) => {\r\n\r\n    store.db.collection(collection_name).onSnapshot(function(querySnapshot) {\r\n\r\n          let temp_users = [];\r\n          querySnapshot.forEach( doc => {\r\n            //let data = doc.data();\r\n            let data = doc.data();\r\n            data.id = doc.id;\r\n            temp_users.push(data);\r\n          });\r\n\r\n          if (collection_name === 'users')\r\n            setUsers(temp_users);\r\n          if (collection_name === 'recipes')\r\n            setRecipes(temp_users);\r\n      });\r\n  }\r\n\r\n  let followingInfo = users.map( user => {\r\n    let obj = {username: user.username, fullname: user.fullname, profile_img_url: user.profile_img_url, follows: false};\r\n    return obj;\r\n  });\r\n\r\n  /*\r\n  {\r\n    recipes.map( (recipe, idx) =>\r\n      <RecipeItem recipe={recipe} key={idx}/>\r\n    )\r\n  }\r\n\r\n  <Button\r\n    variant=\"contained\"\r\n    color=\"primary\"\r\n    onClick={() => history.push('/lists')}\r\n  >\r\n    Till ListPage\r\n  </Button>\r\n\r\n  */\r\n\r\n  // Sök specifikt recept eller användare ovan\r\n\r\n  return (\r\n\r\n    <div>\r\n      <h3>Sökresultat</h3>\r\n\r\n\r\n\r\n      { searchstring === \"\" && <p> Sökfunktionen kommer snart! Tills dess visas alla användare och recept nedan </p> }\r\n\r\n      { users.length <= 0 && <div className={classes.spinner} ><Spinner name=\"ball-scale-multiple\" color=\"#68BB8C\" fadeIn=\"none\"/></div> }\r\n      { users.length > 0 && <React.Fragment>\r\n      <b> Alla användare: </b>\r\n      <div>\r\n      <FollowerList followerData={followingInfo}/>\r\n      </div>\r\n      <b> Alla recept: </b>\r\n      <div style={{paddingTop: '15px'}}>\r\n      { recipes != undefined && <RecipeGridList recipes={recipes}/> }\r\n\r\n      </div>\r\n      </React.Fragment> }\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  spinner: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: 100\r\n  }\r\n});\r\n\r\nexport default SearchPage;\r\n","import React from 'react';\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\n\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport LinkUI from '@material-ui/core/Link';\r\nimport { useSelector } from 'react-redux';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nfunction TopMenuBar(props) {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  const isMenuOpen = Boolean(anchorEl);\r\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n\r\n\r\n  const handleProfileMenuOpen = event => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMobileMenuClose = () => {\r\n    setMobileMoreAnchorEl(null);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n    handleMobileMenuClose();\r\n  };\r\n\r\n  const handleMobileMenuOpen = event => {\r\n    setMobileMoreAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleSearchFocus = () => {\r\n    if(history.location.pathname !== \"/search\")\r\n      history.push(\"/search\")\r\n  };\r\n\r\n  const menuId = 'primary-search-account-menu';\r\n  const renderMenu = (\r\n    <Menu\r\n      anchorEl={anchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMenuOpen}\r\n      onClose={handleMenuClose}\r\n    >\r\n      <MenuItem onClick={handleMenuClose}>Profile</MenuItem>\r\n      <MenuItem onClick={handleMenuClose}>My account</MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  const mobileMenuId = 'primary-search-account-menu-mobile';\r\n  const renderMobileMenu = (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMobileMenuOpen}\r\n      onClose={handleMobileMenuClose}\r\n    >\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\r\n          <Badge badgeContent={4} color=\"secondary\">\r\n            <MailIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Messages</p>\r\n      </MenuItem>\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 11 new notifications\" color=\"inherit\">\r\n          <Badge badgeContent={11} color=\"secondary\">\r\n            <NotificationsIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Notifications</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleProfileMenuOpen}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n        <p>Profile</p>\r\n      </MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n\r\n          <div className={classes.sectionMobile}>\r\n            <IconButton\r\n              edge=\"start\"\r\n              className={classes.menuButton}\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              onClick={ () => history.goBack() }\r\n            >\r\n              <ArrowBackIosIcon />\r\n            </IconButton>\r\n          </div>\r\n\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n\r\n            <LinkUI component={Link} to=\"/home\" style={{ textDecoration: 'none', color: 'white' }}>\r\n              Campuskost\r\n            </LinkUI>\r\n          </Typography>\r\n          <div className={classes.search}>\r\n            <div className={classes.searchIcon}>\r\n              <SearchIcon />\r\n            </div>\r\n            <InputBase\r\n              placeholder=\"Search…\"\r\n              classes={{\r\n                root: classes.inputRoot,\r\n                input: classes.inputInput,\r\n              }}\r\n              inputProps={{ 'aria-label': 'search' }}\r\n              onBlur={() => console.log(\"onBlur\")}\r\n              onFocus={() => handleSearchFocus()}\r\n            />\r\n          </div>\r\n          <div className={classes.grow} />\r\n          <div className={classes.sectionDesktop}>\r\n          <ProfileBtn signedIn={props.signedIn} handleChange={props.handleChange}/>\r\n          </div>\r\n\r\n          <div className={classes.sectionMobile}>\r\n          <ProfileBtn signedIn={props.signedIn} handleChange={props.handleChange}/>\r\n          </div>\r\n\r\n        </Toolbar>\r\n      </AppBar>\r\n      {renderMobileMenu}\r\n      {renderMenu}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction ProfileBtn (props) {\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const store = useSelector(state => state.fireReducer);\r\n\r\n  let btn = (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => history.push(\"/login\")}\r\n        className={classes.buttonPad}\r\n      >\r\n        logga in\r\n      </Button>\r\n    </div> );\r\n\r\n  // make sure info is loaded\r\n  let img_src = (store.firestore_user && store.firestore_user.profile_img_url ) ? store.firestore_user.profile_img_url : undefined;\r\n\r\n  // if user has no profile image set in firebase\r\n  /*\r\n  if (img_src === undefined) {\r\n    img_src = <AccountCircleIcon/>;\r\n  } */\r\n\r\n  let icon_content = (img_src !== undefined) ? <img src={img_src} className={classes.smallprofileimage} alt={\"profile img\"} /> : <AccountCircleIcon/>;\r\n\r\n  let jsx_content = props.signedIn ? icon_content : btn;\r\n\r\n  if(props.signedIn === true && store.firestore_user)\r\n  {\r\n    return (\r\n      <React.Fragment>\r\n      <p style={{marginRight: 15, color: 'rgba(255,255,255,0.5)'}}> {store.firestore_user.username} </p>\r\n      <IconButton\r\n        edge=\"start\"\r\n        className={classes.menuButton}\r\n        color=\"inherit\"\r\n        aria-label=\"open profile\"\r\n        onClick={() => history.push(\"/profile/\" + store.firestore_user.username)}\r\n      >\r\n      {jsx_content} </IconButton></React.Fragment>\r\n\r\n    );\r\n  } else {\r\n    return btn;\r\n  }\r\n\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n    //marginBottom: '50px'\r\n  },\r\n  menuButton: {\r\n    marginRight: 0, // theme.spacing(2),\r\n  },\r\n  title: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing(3),\r\n      width: 'auto',\r\n    },\r\n  },\r\n  searchIcon: {\r\n    width: theme.spacing(7),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 7),\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    [theme.breakpoints.up('md')]: {\r\n      width: 200,\r\n    },\r\n  },\r\n  sectionDesktop: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'flex',\r\n    },\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  whiteColor: {\r\n    color: 'white'\r\n  },\r\n  buttonPad: {\r\n    padding: '6px',\r\n    fontSize: 'small'\r\n  },\r\n  smallprofileimage: {\r\n    width: '40px'\r\n  }\r\n}));\r\n\r\nexport default TopMenuBar;\r\n","import React, {useState, useEffect} from 'react';\nimport { HashRouter as BrowserRouter, Router, Route, Link, Switch, Redirect } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\n// import { useHistory } from \"react-router-dom\";\n// import { incrementdispatch } from './actions/RecipeActions';\nimport * as serviceWorker from './serviceWorker';\n\nimport MySnackbar from './components/snackbar';\n// import our css\nimport './App.css';\nimport './style/GlobalCssButton.css';\n\n// import our page components\nimport FeedPage from './pages/feedpage';\nimport ProfilePage from './pages/profilepage';\nimport NoticePage from './pages/noticepage';\nimport FavoritePage from './pages/favoritepage';\nimport UploadPage from './pages/uploadpage';\nimport RecipePage from './pages/recipepage';\nimport Login from './pages/login';\nimport Settings from './pages/settings';\nimport SearchPage from './pages/searchpage';\nimport TopMenuBar from './components/topmenubar';\nimport ListPage from './pages/listpage';\n\n// import material UI components\nimport Icon from '@material-ui/core/Icon';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport Badge from '@material-ui/core/Badge';\nimport PublishIcon from '@material-ui/icons/PublishRounded';\nimport NotificationsActiveRoundedIcon from '@material-ui/icons/NotificationsActiveRounded';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport LoyaltyRoundedIcon from '@material-ui/icons/LoyaltyRounded';\nimport HomeRoundedIcon from '@material-ui/icons/HomeRounded';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\n\nimport {Helmet} from \"react-helmet\";\n\nrequire('dotenv').config(); // check if we need this\n\nconst API_KEY = process.env.REACT_APP_FIREBASE_API_KEY;\n\n// for PWA - needed?\nlet deferredPrompt;\nwindow.addEventListener('beforeinstallprompt', (e) => {\n  // Stash the event so it can be triggered later.\n  deferredPrompt = e;\n  deferredPrompt.prompt();\n\n  // Update UI notify the user they can add to home screen\n  deferredPrompt.userChoice\n    .then((choiceResult) => {\n      if (choiceResult.outcome === 'accepted') {\n        console.log('User accepted the A2HS prompt');\n      } else {\n        console.log('User dismissed the A2HS prompt');\n      }\n      deferredPrompt = null;\n  });\n\n});\n\n// initiate Firebase\nlet db = undefined;\nfunction initFirebase() {\n\n  console.log(\"run initFirebase\")\n\n  const firebaseConfig = {\n    apiKey: API_KEY, // \"AIzaSyAq0vTBf0o5MckjHcCOJiJ_DRK8v_UZY88\",\n    authDomain: \"campuskost-firebase.firebaseapp.com\",\n    databaseURL: \"https://campuskost-firebase.firebaseio.com\",\n    projectId: \"campuskost-firebase\",\n    storageBucket: \"campuskost-firebase.appspot.com\",\n    messagingSenderId: \"477692438735\",\n    appId: \"1:477692438735:web:2e6dce163d7f7ce8baafba\",\n    measurementId: \"G-MDB52ZHJER\"\n  };\n\n  firebase.initializeApp(firebaseConfig);\n  const db = firebase.firestore();\n  //const storage = firebase.storage();\n  let storage = 1;\n\n  return [db, storage];\n}\n\n// main component of the app\nfunction App(props) {\n\n  const [value, setValue] = React.useState('default');\n  const [redirect, setRedirect] = React.useState(false);\n  const [openUpdateDialog, setOpenUpdateDialog] = React.useState(false);\n\n  const classes = useStyles();\n  const dispatch = useDispatch(); // be able to dispatch\n  const state_user = useSelector(state => state.userReducer); // subscribe to the redux store\n  const store = useSelector(state => state.fireReducer); // subscribe to the redux store\n\n  useEffect(() => {\n\n    // console.log(serviceWorker.hasUpdates)\n\n    if(serviceWorker.hasUpdates === true) {\n      setOpenUpdateDialog(true);\n    }\n\n  }, [serviceWorker.hasUpdates]); // end useEffect\n\n  // runs once on start\n  useEffect(() => {\n\n    // set listener for authentication changes\n    // either only set redux object or also create firestore instance\n    firebase.auth().onAuthStateChanged(user => {\n      dispatch({ type: user ? \"SIGNIN\" : \"SIGNOUT\" })\n\n      // if user is signed in, set redux object\n      if( user ) {\n\n        // dispatch auth info (such as last time logged in etc)\n        dispatch({\n          type: \"SETUSER\",\n          auth_user: user\n        })\n\n        const user_id = user.uid;\n        const user_email = user.email;\n\n        const usersRef = db.collection('users').doc(user_email);\n        // connect to firebase and check if a user doc for this email exists\n        usersRef.get()\n        .then((docSnapshot) => {\n          if (docSnapshot.exists) {\n            usersRef.onSnapshot((doc) => {\n\n              console.log(\"user exists in firestore\")\n\n              // dispatch user doc info (such as username, other info set in the app)\n              dispatch({\n                type: \"SETFIREUSER\",\n                firestore_user: doc.data()\n              })\n\n            });\n          } else {\n\n            // prepare to create firestore doc as this user signed in for the first time\n            let userObj = {\n              email: user_email,\n              username: \"DefaultChef\",\n              university: \"\",\n              fullname: \"Master Chef\"\n            };\n\n            console.log(\"create the document\")\n            usersRef.set(userObj); // create the document\n\n            // set redux state\n            dispatch({\n              type: \"SETFIREUSER\",\n              firestore_user: userObj\n            })\n          }\n      });\n\n      } // end if user\n      else {\n\n        // no user is signed in\n        dispatch({\n          type: \"SETUSER\",\n          user: undefined\n        })\n\n      }\n\n    }); // end auth listener\n\n  }, []); // end useEffect\n\n\n  if(db === undefined) // init firebase once\n  {\n    let storage;\n    [db, storage] = initFirebase();\n    dispatch({ type: \"SETDB\", db: db });\n    dispatch({ type: \"SETSTORAGE\", storage: storage });\n  }\n\n  const closeDialog = (action) => {\n    setOpenUpdateDialog(false);\n  };\n\n  // used in TopMenuBar, which needs to be refactored\n  const handleChange = (event = undefined, newValue) => {\n\n    console.log(\"heello\" + newValue + \".\")\n\n  };\n\n  let update_message = 'New content is available and will be used when all tabs for this page are closed';\n\n  // jsx code, looks like html\n  // renders top bar, page content and bottom bar.\n  // page content is based on url, defined with Route objects\n  return (\n    <div className=\"body\">\n\n      <Helmet>\n          <meta charSet=\"utf-8\" />\n          <title>My Title</title>\n          <link rel=\"canonical\" href=\"https://campuskost.se\" />\n      </Helmet>\n\n      <BrowserRouter>\n      <div>\n\n        <div className={classes.headerrow}>\n        <TopMenuBar signedIn={state_user.signedIn} handleChange={handleChange}/>\n        </div>\n\n        <div className={classes.mainContainer}>\n\n          <Switch>\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/settings\" component={Settings} />\n            <Route path=\"/profile/:username_url\" component={ProfilePage} />\n            <Route path=\"/upload\" component={UploadPage} />\n            <Route path=\"/notices\" component={NoticePage} />\n            <Route path=\"/saved\" component={ListPage} />\n            <Route path=\"/recipe/:recipetitle/:id\" component={RecipePage} />\n            <Route path=\"/search\" component={SearchPage} />\n            <Route path=\"/home\" component={FeedPage}/>\n            <Route path=\"/lists\" component={ListPage}/>\n            <Route component={FeedPage} />\n\n          </Switch>\n\n          <MySnackbar open={openUpdateDialog} handleClose={closeDialog} message={update_message} action={\"\"}/>\n\n        </div>\n        <div className={classes.footer}>\n          <BottomMenuBar/>\n        </div>\n\n      </div>\n      </BrowserRouter>\n\n    </div>\n  );\n}\n\n// extract as individual component\nfunction BottomMenuBar() {\n\n  const [value, setValue] = React.useState('default');\n\n  const history = useHistory();\n  const classes = useStyles();\n  const upload_store = useSelector(state => state.uploadReducer);\n  const dispatch = useDispatch();\n\n  const handleMenuClick = (event = undefined, val) => {\n    setValue(val);\n    history.push(\"/\" + val);\n\n    // set as one dispatch instead..\n    dispatch({\n      type: \"SETDESCRIPTIONS\",\n      descriptions: undefined\n    })\n\n    dispatch({\n      type: \"SETINGREDIENTS\",\n      ingredients: undefined\n    })\n\n    dispatch({\n      type: \"SETTITLE\",\n      title: undefined\n    })\n\n    if(val != \"upload\" && upload_store.editmode == true) {\n      dispatch({\n        type: \"SETEDITMODE\",\n        editmode: false\n      })\n\n    }\n\n  };\n\n  return (\n\n    <BottomNavigation value={value} onChange={ (evt,value) => handleMenuClick(evt, value) } className={classes.bottomMenu}>\n      <BottomNavigationAction label=\"Flöde\" value=\"home\" icon={<HomeRoundedIcon />} />\n      <BottomNavigationAction label=\"Ladda upp\" value=\"upload\" icon={<PublishIcon />} />\n      <BottomNavigationAction label=\"Notiser\" value=\"notices\" icon={<NotificationsIcon />} />\n      <BottomNavigationAction label=\"Sparat\" value=\"saved\" icon={<LoyaltyRoundedIcon />} />\n    </BottomNavigation>\n\n  );\n\n  // <Badge badgeContent={3} color=\"secondary\"><NotificationsIcon /></Badge>\n\n}\n\n// margin: -15px -11px 50px -15px;\n\nconst useStyles = makeStyles({\n  body: {\n    padding: 15,\n    paddingTop: '35px'\n  },\n  mainContainer: {\n    paddingTop: '80px',\n    paddingBottom: '50px'\n  },\n  footer: {\n    position: 'fixed',\n    left: 0,\n    bottom: 0,\n    width: 100 + '%',\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  headerrow: {\n    position: 'fixed',\n    left: 0,\n    top: 0,\n    width: 100 + '%',\n    zIndex: 10\n  },\n  profileBtn: {\n    color: 'green'\n  },\n  bottomMenu: {\n    width: 500,\n  }\n\n});\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\nimport reducer from \"./store.js\";\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// wrapper for the provider to work properly\nconst AppWrapper = () => {\n const store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\n return (\n   <Provider store={store}>\n     <App />\n   </Provider>\n )\n}\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(\n\n  <AppWrapper/>,\n  rootElement\n);\n\n// ReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\nserviceWorker.register();\n","var map = {\n\t\"./temp_food1.jpg\": 124,\n\t\"./temp_food2.jpg\": 188,\n\t\"./temp_food3.jpg\": 189,\n\t\"./temp_food4.jpg\": 190,\n\t\"./temp_food5.jpg\": 191\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 82;"],"sourceRoot":""}